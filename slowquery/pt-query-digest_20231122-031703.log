
# 15.3s user time, 90ms system time, 54.31M rss, 389.87G vsz
# Current date: Wed Nov 22 03:03:38 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 351.43k total, 178 unique, 3.82k QPS, 5.69x concurrency _______
# Time range: 2023-11-21T18:00:11 to 2023-11-21T18:01:43
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           524s     1us      9s     1ms     5ms    16ms   176us
# Lock time             3s       0   247ms     9us     1us   731us     1us
# Rows sent        677.79k       0    1012    1.97   13.83    6.28       0
# Rows examine      23.66M       0 235.97k   70.60  271.23  516.57    0.99
# Query size       112.01M       6 1008.95k  334.22  234.30  13.88k   80.10

# Profile
# Rank Query ID                            Response time  Calls R/Call V/M
# ==== =================================== ============== ===== ====== ===
#    1 0x8CA5C26DA1F53D285B58FE47352DA00A  106.8673 20.4% 17382 0.0061  0.02 SELECT user_sessions
#    2 0x03FFA53B9AEA23779E51FE7DD3DC165E   42.0513  8.0% 53119 0.0008  0.01 INSERT user_presents
#    3 0x611363ACBD1690538F137757E45B738C   41.6835  8.0%  3139 0.0133  0.04 SELECT user_presents
#    4 0x6E790EE92EFF4755B6E0FA83F9CA8363   38.9635  7.4%  3131 0.0124  0.03 UPDATE user_presents
#    5 0xF0F3320DE1260EAD27BC0426FCB34A4D   33.5927  6.4%  3139 0.0107  0.03 SELECT user_presents
#    6 0xE89B4FB5E77ED142BEAF8C3B369FA2FE   26.0097  5.0%  3131 0.0083  0.03 SELECT user_presents
#    7 0xBC551EACF5A3BE27E3F2CC3C5133F3D5   16.5008  3.2%  9720 0.0017  0.01 SELECT gacha_item_masters
#    8 0xED0711EB833D06BBD84F496A9784760B   16.3088  3.1% 27533 0.0006  0.01 UPDATE user_items
#    9 0x41CEDDDAFB6289B60E5F30D0462408DB   14.9709  2.9% 28918 0.0005  0.01 INSERT user_present_all_received_history
#   10 0x07D5CE9B533D56A3B70C17C590E82A7F   12.6548  2.4% 20484 0.0006  0.02 SELECT version_masters
#   11 0x584D7D428BA6602840353479CEB359A1   11.6964  2.2% 10463 0.0011  0.01 SELECT user_devices
#   12 0x2372FB123B18A108CFBB5352F61B370B   11.3028  2.2% 17786 0.0006  0.01 SELECT users
#   13 0xFFFCA4D67EA0A788813031B8BBC3B329   11.2475  2.1%  9403 0.0012  0.01 COMMIT
#   14 0x2096778F723F6666B5D7DDC9D01010C7   11.1296  2.1%    46 0.2419  0.06 INSERT user_cards
#   15 0xAB2AB35C6EFA17C04018A132A84A16C9   11.0612  2.1% 19743 0.0006  0.01 SELECT user_bans
#   16 0x79A889ED30BFA8BF517F86F6D70065B6    8.6713  1.7%     1 8.6713  0.00 LOAD DATA user_presents
#   17 0xE3341326DCBBC41D81C9550FEAE6F248    7.5308  1.4%  2521 0.0030  0.01 SELECT user_present_all_received_history
#   18 0x1049606E13674A053E0CC69500F839DC    6.3695  1.2%  3092 0.0021  0.01 UPDATE user_one_time_tokens
#   19 0x975F0A7CC9BCA46BBC7DAD888BA0794F    5.5819  1.1%  9199 0.0006  0.01 SELECT item_masters
#   20 0x0B3509236B570F5C5FE423B079765901    5.5372  1.1%  9814 0.0006  0.01 INSERT user_cards
# MISC 0xMISC                               83.8827 16.0% 99664 0.0008   0.0 <158 ITEMS>

# Query 1: 289.70 QPS, 1.78x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 129081988
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   17382
# Exec time     20    107s   110us   147ms     6ms    30ms    11ms     2ms
# Lock time      3   113ms       0    17ms     6us     1us   181us     1us
# Rows sent      2  16.97k       0       1    1.00    0.99    0.01    0.99
# Rows examine  87  20.69M       4   2.45k   1.22k   2.27k  717.51   1.20k
# Query size     1   1.76M      81     106  106.00  102.22    0.17  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##############################################
#   1ms  ################################################################
#  10ms  #######################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='f925a0eb-6a94-4d03-b74b-2c1a9af905d7' AND deleted_at IS NULL\G

# Query 2: 870.80 QPS, 0.69x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 163498585
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         15   53119
# Exec time      8     42s    47us   100ms   791us     3ms     3ms   131us
# Lock time      5   189ms       0    15ms     3us     1us   103us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    10  12.15M     231     255  239.91  234.30    1.67  234.30
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ############################
# 100us  ################################################################
#   1ms  #############
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (3792297920, 1311128034, 1661709688, 3, 17, 1, '3周年ガチャの付与アイテムです', 1661709688, 1661709688)\G

# Query 3: 52.32 QPS, 0.69x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 125740602
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3139
# Exec time      7     42s   223us   213ms    13ms    61ms    23ms     4ms
# Lock time      0    19ms       0     5ms     6us     1us   112us     1us
# Rows sent      9  65.64k       0      67   21.41   36.69    9.82   22.53
# Rows examine   3 740.86k      47     690  241.68  652.75  230.25  124.25
# Query size     0 394.89k     126     129  128.82  124.25       0  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ###################################
#   1ms  ################################################################
#  10ms  #########################################
# 100ms  ##
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 2839002201 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 4: 52.18 QPS, 0.65x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 147118656
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3131
# Exec time      7     39s    97us   255ms    12ms    56ms    21ms     3ms
# Lock time      0    15ms       0     2ms     4us     1us    77us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  65.49k       1      67   21.42   36.69    9.81   22.53
# Query size     0   1.03M      93     929  344.98  537.02  121.50  363.48
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ############################
#   1ms  ################################################################
#  10ms  #######################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661709679, updated_at=1661709679 WHERE id IN (1116904805, 3947943036, 7080873630, 8750819532, 12175344184, 21258931994, 21651586963, 26909275309, 37555446489, 39593670940, 42381067250, 48686997811, 50913746055, 53163181786, 54207581523, 59243877710, 60093906683, 64652504608, 75934179636, 77428276375, 85516945858, 90238682662, 91668318372, 93118597418, 95735864290)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661709679, updated_at=1661709679 from user_presents where  id IN (1116904805, 3947943036, 7080873630, 8750819532, 12175344184, 21258931994, 21651586963, 26909275309, 37555446489, 39593670940, 42381067250, 48686997811, 50913746055, 53163181786, 54207581523, 59243877710, 60093906683, 64652504608, 75934179636, 77428276375, 85516945858, 90238682662, 91668318372, 93118597418, 95735864290)\G

# Query 5: 52.32 QPS, 0.56x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 176721581
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3139
# Exec time      6     34s   190us   178ms    11ms    53ms    19ms     2ms
# Lock time      1    39ms       0    16ms    12us     1us   309us     1us
# Rows sent      0   3.07k       1       1       1       1       0       1
# Rows examine   2 675.22k      27     665  220.27  621.67  225.90  112.70
# Query size     0 256.95k      81      84   83.82   80.10       0   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ####################################################
#   1ms  ################################################################
#  10ms  ######################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 1336246477 AND deleted_at IS NULL\G

# Query 6: 52.18 QPS, 0.43x concurrency, ID 0xE89B4FB5E77ED142BEAF8C3B369FA2FE at byte 153538876
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3131
# Exec time      4     26s   101us   132ms     8ms    46ms    16ms   972us
# Lock time      1    33ms       0     8ms    10us     1us   208us     1us
# Rows sent      9  65.49k       1      67   21.42   36.69    9.81   22.53
# Rows examine   0  65.49k       1      67   21.42   36.69    9.81   22.53
# Query size     0 996.71k      74     910  325.98  511.45  120.46  346.17
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ###################################
#  10ms  ############################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents WHERE id IN (771982081, 20351961979, 3049119045, 96210236728, 54040307255, 14901958867, 53025852792, 45755249965, 15279942348, 33698106884, 6163219537, 33349442744) AND deleted_at IS NULL\G

# Query 7: 162 QPS, 0.28x concurrency, ID 0xBC551EACF5A3BE27E3F2CC3C5133F3D5 at byte 176492413
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9720
# Exec time      3     17s   160us    84ms     2ms     8ms     4ms   445us
# Lock time      2    73ms       0    21ms     7us     1us   229us     1us
# Rows sent     39 270.52k      27      29   28.50   28.75       1   28.75
# Rows examine   2 541.04k      54      58   57.00   56.92       2   56.92
# Query size     0 631.21k      66      68   66.50   65.89       0   65.89
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ######################
#  10ms  ###
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'gacha_item_masters'\G
#    SHOW CREATE TABLE `isucon`.`gacha_item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM gacha_item_masters WHERE gacha_id=40 ORDER BY id ASC\G

# Query 8: 458.88 QPS, 0.27x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 163507041
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   27533
# Exec time      3     16s    53us   100ms   592us     2ms     2ms   125us
# Lock time      3    97ms       0     8ms     3us     1us    82us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  26.89k       1       1       1       1       0       1
# Query size     1   1.97M      70      76   74.90   72.65    0.48   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=26, updated_at=1661709688 WHERE id=25395008661\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=26, updated_at=1661709688 from user_items where  id=25395008661\G

# Query 9: 474.07 QPS, 0.25x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 118316162
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   28918
# Exec time      2     15s    42us    49ms   517us     2ms     2ms   103us
# Lock time      4   127ms       0    12ms     4us     1us   131us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     4   5.03M     178     183  182.32  174.84       0  174.84
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###############################################################
#   1ms  #############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (4273823046, 9358021178, 23, 1661709665, 1661709665, 1661709665)\G

# Query 10: 341.40 QPS, 0.21x concurrency, ID 0x07D5CE9B533D56A3B70C17C590E82A7F at byte 93135570
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   20484
# Exec time      2     13s    58us   164ms   617us     2ms     3ms   144us
# Lock time      4   152ms       0    24ms     7us     1us   205us     1us
# Rows sent      2  20.00k       1       1       1       1       0       1
# Rows examine   0  33.77k       1       2    1.69    1.96    0.45    1.96
# Query size     0 880.17k      44      44      44      44       0      44
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ######################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'version_masters'\G
#    SHOW CREATE TABLE `isucon`.`version_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM version_masters WHERE status=1\G

# Query 11: 174.38 QPS, 0.19x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 155395678
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   10463
# Exec time      2     12s   101us   101ms     1ms     4ms     3ms   236us
# Lock time      1    40ms       0     5ms     3us     1us    63us     1us
# Rows sent      1  10.22k       1       1       1       1       0       1
# Rows examine   0  10.23k       1       2    1.00    0.99    0.03    0.99
# Query size     0 789.49k      74      78   77.27   76.28    1.21   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #############
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=3756326997 AND platform_id='2840905'\G

# Query 12: 296.43 QPS, 0.19x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 133038750
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   17786
# Exec time      2     11s    54us    87ms   635us     2ms     2ms   144us
# Lock time      5   162ms       0    39ms     9us     1us   329us     1us
# Rows sent      2  17.37k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  17.37k       0       1    1.00    0.99    0.01    0.99
# Query size     0 674.49k      33      39   38.83   38.53    0.66   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###########################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=1979956564\G

# Query 13: 154.15 QPS, 0.18x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 180276537
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9403
# Exec time      2     11s    38us    95ms     1ms     5ms     4ms   236us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  55.10k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############################################
# 100us  ################################################################
#   1ms  ######################
#  10ms  ###
# 100ms
#    1s
#  10s+
COMMIT\G

# Query 14: 4.18 QPS, 1.01x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 19827799
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.06
# Time range: 2023-11-21T18:00:14 to 2023-11-21T18:00:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      2     11s   147ms   564ms   242ms   455ms   119ms   180ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    40  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (41495665151,3703247521,3,76,38,7696,1571593513,1571593513,NULL) /*... omitted ...*/\G

# Query 15: 329.05 QPS, 0.18x concurrency, ID 0xAB2AB35C6EFA17C04018A132A84A16C9 at byte 174770473
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   19743
# Exec time      2     11s    48us    99ms   560us     2ms     2ms   125us
# Lock time      4   137ms       0    35ms     6us     1us   286us     1us
# Rows sent      0     549       0       1    0.03       0    0.16       0
# Rows examine   0     549       0       1    0.03       0    0.16       0
# Query size     0 922.26k      45      48   47.83   46.83    0.29   46.83
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ######################################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_bans'\G
#    SHOW CREATE TABLE `isucon`.`user_bans`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_bans WHERE user_id=59355076\G

# Query 16: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650801
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-21T18:00:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      1      9s      9s      9s      9s      9s       0      9s
# Lock time      0     3us     3us     3us     3us     3us       0     3us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s  ################################################################
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 17: 42.02 QPS, 0.13x concurrency, ID 0xE3341326DCBBC41D81C9550FEAE6F248 at byte 76656591
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2521
# Exec time      1      8s   225us   141ms     3ms    14ms     6ms   839us
# Lock time      0    22ms       0     9ms     8us     1us   191us     1us
# Rows sent      5  40.48k       0      29   16.44   26.08   11.10   13.83
# Rows examine   1 276.44k       0 235.97k  112.29   26.08   4.65k   13.83
# Query size     0 486.48k     192     199  197.60  192.76    0.18  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ###########################################
#  10ms  #########
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=10208648 AND present_all_id IN (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28)\G

# Query 18: 51.53 QPS, 0.11x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 170656740
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3092
# Exec time      1      6s   140us   103ms     2ms     9ms     5ms   403us
# Lock time      0    26ms       0     8ms     8us     1us   188us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0   3.02k       1       1       1       1       0       1
# Query size     0 314.03k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ########################
#  10ms  ####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661709692 WHERE token='20f075ac-95d0-401a-b1de-aebe3e30164b'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661709692 from user_one_time_tokens where  token='20f075ac-95d0-401a-b1de-aebe3e30164b'\G

# Query 19: 153.32 QPS, 0.09x concurrency, ID 0x975F0A7CC9BCA46BBC7DAD888BA0794F at byte 174854340
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9199
# Exec time      1      6s    61us    64ms   606us     2ms     2ms   152us
# Lock time      1    44ms       0     8ms     4us     1us   120us     1us
# Rows sent      1   8.98k       1       1       1       1       0       1
# Rows examine   0   8.98k       1       1       1       1       0       1
# Query size     0 478.43k      53      54   53.26   51.63       0   51.63
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ######################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'item_masters'\G
#    SHOW CREATE TABLE `isucon`.`item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM item_masters WHERE id=3 AND item_type=2\G

# Query 20: 163.57 QPS, 0.09x concurrency, ID 0x0B3509236B570F5C5FE423B079765901 at byte 106571760
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T18:00:42 to 2023-11-21T18:01:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9814
# Exec time      1      6s    51us    40ms   564us     2ms     2ms   131us
# Lock time      1    43ms       0     6ms     4us     1us    99us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1   1.59M     166     176  170.18  166.51    0.88  166.51
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #####################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO user_cards(id, user_id, card_id, amount_per_sec, level, total_exp, created_at, updated_at) VALUES (3794413463, 7122585243, 2, 1, 1, 0, 1661623259, 1661623259)\G
