
# 31.7s user time, 210ms system time, 54.70M rss, 390.12G vsz
# Current date: Tue Nov 21 04:45:09 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 819.06k total, 180 unique, 9.20k QPS, 6.66x concurrency _______
# Time range: 2023-11-20T19:42:28 to 2023-11-20T19:43:57
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           593s     1us     11s   723us     2ms    12ms    57us
# Lock time            41s       0   209ms    49us     1us     2ms       0
# Rows sent        572.57k       0    1012    0.72    0.99    3.92       0
# Rows examine      23.76M       0 235.97k   30.41   28.75  331.58       0
# Query size       124.00M       6 1008.95k  158.75  246.02   9.09k   31.70

# Profile
# Rank Query ID                            Response time Calls  R/Call  V/
# ==== =================================== ============= ====== ======= ==
#    1 0xDA556F9115773A1A99AA0165670CE848  83.9301 14.2% 260925  0.0003  0.01 ADMIN PREPARE
#    2 0x8CA5C26DA1F53D285B58FE47352DA00A  75.4461 12.7%  14720  0.0051  0.02 SELECT user_sessions
#    3 0x1049606E13674A053E0CC69500F839DC  74.0574 12.5%   2598  0.0285  0.05 UPDATE user_one_time_tokens
#    4 0x03FFA53B9AEA23779E51FE7DD3DC165E  46.5401  7.9%  45170  0.0010  0.02 INSERT user_presents
#    5 0x611363ACBD1690538F137757E45B738C  35.9881  6.1%   2672  0.0135  0.04 SELECT user_presents
#    6 0x6E790EE92EFF4755B6E0FA83F9CA8363  35.7753  6.0%   2656  0.0135  0.04 UPDATE user_presents
#    7 0xF0F3320DE1260EAD27BC0426FCB34A4D  28.2891  4.8%   2672  0.0106  0.04 SELECT user_presents
#    8 0x84505E5BA52EFFCA6A20B2B28E72AC54  20.6729  3.5%   2600  0.0080  0.02 SELECT user_one_time_tokens
#    9 0xE89B4FB5E77ED142BEAF8C3B369FA2FE  19.1480  3.2%   2656  0.0072  0.04 SELECT user_presents
#   10 0x162DA0A184B905E35E1254C1FDBF900B  16.0120  2.7%   4160  0.0038  0.03 SELECT user_cards
#   11 0x07D5CE9B533D56A3B70C17C590E82A7F  11.2150  1.9%  17414  0.0006  0.02 SELECT version_masters
#   12 0x79A889ED30BFA8BF517F86F6D70065B6  10.6229  1.8%      1 10.6229  0.00 LOAD DATA user_presents
#   13 0x2096778F723F6666B5D7DDC9D01010C7  10.2619  1.7%     46  0.2231  0.05 INSERT user_cards
#   14 0xED0711EB833D06BBD84F496A9784760B  10.0386  1.7%  23063  0.0004  0.00 UPDATE user_items
#   15 0xFFFCA4D67EA0A788813031B8BBC3B329   9.8135  1.7%   7956  0.0012  0.02 COMMIT
#   16 0x41CEDDDAFB6289B60E5F30D0462408DB   8.8251  1.5%  24930  0.0004  0.01 INSERT user_present_all_received_history
#   17 0xBC551EACF5A3BE27E3F2CC3C5133F3D5   8.2299  1.4%   8186  0.0010  0.01 SELECT gacha_item_masters
#   18 0x584D7D428BA6602840353479CEB359A1   7.2477  1.2%   8816  0.0008  0.01 SELECT user_devices
#   19 0xAB2AB35C6EFA17C04018A132A84A16C9   6.3888  1.1%  16766  0.0004  0.01 SELECT user_bans
#   20 0x2372FB123B18A108CFBB5352F61B370B   6.2490  1.1%  15135  0.0004  0.01 SELECT users
# MISC 0xMISC                              67.7696 11.4% 355919  0.0002   0.0 <160 ITEMS>

# Query 1: 4.35k QPS, 1.40x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 274855050
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         31  260925
# Exec time     14     84s    17us    86ms   321us     1ms     1ms    63us
# Lock time      0    22us       0     3us       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     6   7.47M      30      30      30      30       0      30
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #########################
#   1ms  #####
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 2: 245.33 QPS, 1.26x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 210040060
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1   14720
# Exec time     12     75s    66us   123ms     5ms    24ms     9ms     1ms
# Lock time      0    39ms       0     4ms     2us     1us    43us     1us
# Rows sent      2  14.37k       0       1    1.00    0.99    0.01    0.99
# Rows examine  62  14.77M       4   2.08k   1.03k   1.96k  607.64 1012.63
# Query size     1   1.49M      81     106  106.00  102.22    0.18  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ###########################################################
#   1ms  ################################################################
#  10ms  #######################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='d9fc5830-94f4-4ed9-82a4-b3e1d85511cd' AND deleted_at IS NULL\G

# Query 3: 43.30 QPS, 1.23x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 274694781
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2598
# Exec time     12     74s   130us   230ms    29ms   105ms    37ms    11ms
# Lock time     94     38s       0   209ms    15ms    78ms    28ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine  13   3.24M       1   2.57k   1.28k   2.38k  736.33   1.26k
# Query size     0 263.86k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##########################
#   1ms  ###########################################
#  10ms  ################################################################
# 100ms  ###########
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661715831 WHERE token='9e946ff2-a26d-4b35-8594-756f6442f023'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661715831 from user_one_time_tokens where  token='9e946ff2-a26d-4b35-8594-756f6442f023'\G

# Query 4: 752.83 QPS, 0.78x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 259653351
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   45170
# Exec time      7     47s    32us   118ms     1ms     4ms     5ms    84us
# Lock time      0    98ms       0    18ms     2us     1us    89us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     8  10.94M     243     272  253.91  258.32    6.89  246.02
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ######################################
#   1ms  #########
#  10ms  ###
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (6129764731322088542, 2840502522, 1661715826, 4, 21, 1, '3周年ガチャの付与アイテムです', 1661715826, 1661715826)\G

# Query 5: 44.53 QPS, 0.60x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 274562526
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2672
# Exec time      6     36s   149us   188ms    13ms    61ms    22ms     4ms
# Lock time      0     9ms       0     2ms     3us     1us    45us     1us
# Rows sent      9  56.08k       0      66   21.49   36.69    9.89   22.53
# Rows examine   2 621.32k      47     695  238.11  652.75  228.76  124.25
# Query size     0 346.98k     127     138  132.97  136.99    5.50  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##################################################
#   1ms  ################################################################
#  10ms  ###################################################
# 100ms  ##
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 5815908581 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 6: 44.27 QPS, 0.60x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 273938290
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2656
# Exec time      6     36s    83us   184ms    13ms    59ms    22ms     3ms
# Lock time      0    14ms       0     4ms     5us     1us   107us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  55.77k       1      66   21.50   36.69    9.88   22.53
# Query size     0   1.14M     103   1.02k  450.83  685.39  181.64  363.48
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ######################################
#   1ms  ################################################################
#  10ms  ###############################################
# 100ms  ##
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661715830, updated_at=1661715830 WHERE id IN (6412733877, 9891988725, 11784122059, 13155361052, 18075993383, 24507627599, 25725691083, 33522544815, 36900094977, 37941264198, 38093739882, 45332534621, 47387457520, 53845734216, 59306533810, 74951667038, 78577094060, 81061802527, 86413477475, 87846124527, 97141175425, 99718450303, 6129764731322092252, 6129764731322092290, 6129764731322092292, 6129764731322092309, 6129764731322092338, 6129764731322092402, 6129764731322092449, 6129764731322092463, 6129764731322092465, 6129764731322092498, 6129764731322092591, 6129764731322092593, 6129764731322092608, 6129764731322092673, 6129764731322092700)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661715830, updated_at=1661715830 from user_presents where  id IN (6412733877, 9891988725, 11784122059, 13155361052, 18075993383, 24507627599, 25725691083, 33522544815, 36900094977, 37941264198, 38093739882, 45332534621, 47387457520, 53845734216, 59306533810, 74951667038, 78577094060, 81061802527, 86413477475, 87846124527, 97141175425, 99718450303, 6129764731322092252, 6129764731322092290, 6129764731322092292, 6129764731322092309, 6129764731322092338, 6129764731322092402, 6129764731322092449, 6129764731322092463, 6129764731322092465, 6129764731322092498, 6129764731322092591, 6129764731322092593, 6129764731322092608, 6129764731322092673, 6129764731322092700)\G

# Query 7: 44.53 QPS, 0.47x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 260742993
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2672
# Exec time      4     28s   122us   203ms    11ms    56ms    20ms     2ms
# Lock time      0    11ms       0     4ms     4us     1us    80us     1us
# Rows sent      0   2.61k       1       1       1       1       0       1
# Rows examine   2 565.24k      27     662  216.62  621.67  224.27  112.70
# Query size     0 229.56k      82      93   87.97   92.72    5.50   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##############################################################
#   1ms  ################################################################
#  10ms  ########################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 7780901236 AND deleted_at IS NULL\G

# Query 8: 43.33 QPS, 0.34x concurrency, ID 0x84505E5BA52EFFCA6A20B2B28E72AC54 at byte 255678533
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2600
# Exec time      3     21s    69us   142ms     8ms    36ms    14ms     2ms
# Lock time      0    19ms       0     6ms     7us     1us   150us     1us
# Rows sent      0   2.54k       0       1    1.00    0.99    0.03    0.99
# Rows examine  13   3.23M       1   2.56k   1.27k   2.38k  735.73   1.26k
# Query size     0 317.38k     125     125     125     125       0     125
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ########################################
#   1ms  ################################################################
#  10ms  ##############################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_one_time_tokens WHERE token='7fda409e-d5b8-470b-b9e0-bfe62b0fdd5c' AND token_type=2 AND deleted_at IS NULL\G

# Query 9: 44.27 QPS, 0.32x concurrency, ID 0xE89B4FB5E77ED142BEAF8C3B369FA2FE at byte 259615510
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2656
# Exec time      3     19s    76us   269ms     7ms    38ms    16ms   626us
# Lock time      0     8ms       0     1ms     2us     1us    32us     1us
# Rows sent      9  55.77k       1      66   21.50   36.69    9.88   22.53
# Rows examine   0  55.77k       1      66   21.50   36.69    9.88   22.53
# Query size     0   1.09M      84   1.00k  431.83  652.75  179.56  346.17
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #########################
#  10ms  #####################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents WHERE id IN (6129764731322086481, 6129764731322086501, 6129764731322086531, 6129764731322086550, 6129764731322086598, 6129764731322086602, 6129764731322086606, 6129764731322086609, 6129764731322086615, 6129764731322086628, 6129764731322086654, 6129764731322086657, 6129764731322086677, 6129764731322086726, 6129764731322086759, 6129764731322086775, 6129764731322086790, 6129764731322086797, 6129764731322086810, 6129764731322086818, 6129764731322086836, 6129764731322086858, 6129764731322086892, 6129764731322086952, 6129764731322086983, 6129764731322087038, 6129764731322087050, 6129764731322087081) AND deleted_at IS NULL\G

# Query 10: 69.33 QPS, 0.27x concurrency, ID 0x162DA0A184B905E35E1254C1FDBF900B at byte 259135400
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4160
# Exec time      2     16s    62us   120ms     4ms    22ms    10ms   204us
# Lock time      0    27ms       0    14ms     6us     1us   215us     1us
# Rows sent      2  12.19k       3       3       3       3       0       3
# Rows examine   0  12.19k       3       3       3       3       0       3
# Query size     0 335.48k      72     100   82.58   97.36   11.15   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #######################
# 100us  ################################################################
#   1ms  ####################
#  10ms  ##############
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_cards WHERE id IN (96069710649, 51733999431, 59535813776)\G

# Query 11: 290.23 QPS, 0.19x concurrency, ID 0x07D5CE9B533D56A3B70C17C590E82A7F at byte 114711163
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   17414
# Exec time      1     11s    49us   159ms   644us     2ms     3ms   138us
# Lock time      0   135ms       0    14ms     7us     1us   188us     1us
# Rows sent      2  17.01k       1       1       1       1       0       1
# Rows examine   0  28.20k       1       2    1.66    1.96    0.46    1.96
# Query size     0 748.26k      44      44      44      44       0      44
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###########################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'version_masters'\G
#    SHOW CREATE TABLE `isucon`.`version_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM version_masters WHERE status=1\G

# Query 12: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650770
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-20T19:42:56
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      1     11s     11s     11s     11s     11s       0     11s
# Lock time      0     3us     3us     3us     3us     3us       0     3us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 13: 4.60 QPS, 1.03x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 39415119
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-20T19:42:29 to 2023-11-20T19:42:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      1     10s   137ms   575ms   223ms   412ms   105ms   171ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    36  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (82696878935,2338266922,5,320,32,2672,1560798201,1560798201,NULL) /*... omitted ...*/\G

# Query 14: 384.38 QPS, 0.17x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 245788131
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   23063
# Exec time      1     10s    42us    57ms   435us     2ms     1ms    93us
# Lock time      0    53ms       0     8ms     2us     1us    67us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  22.52k       1       1       1       1       0       1
# Query size     1   1.65M      71      82   75.14   72.65    1.18   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=75, updated_at=1661715823 WHERE id=14366538191\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=75, updated_at=1661715823 from user_items where  id=14366538191\G

# Query 15: 132.60 QPS, 0.16x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 239722320
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    7956
# Exec time      1     10s    36us    82ms     1ms     4ms     5ms   214us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  46.62k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############################################
# 100us  ################################################################
#   1ms  ################
#  10ms  ###
# 100ms
#    1s
#  10s+
COMMIT\G

# Query 16: 415.50 QPS, 0.15x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 218308501
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   24930
# Exec time      1      9s    27us    60ms   353us     1ms     1ms    69us
# Lock time      0    36ms       0     3ms     1us     1us    24us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     3   4.71M     190     201  197.95  192.76    4.26  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #############################
#   1ms  #####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (6129764731322071136, 7170639063, 16, 1661715815, 1661715815, 1661715815)\G

# Query 17: 136.43 QPS, 0.14x concurrency, ID 0xBC551EACF5A3BE27E3F2CC3C5133F3D5 at byte 281736379
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    8186
# Exec time      1      8s    94us    64ms     1ms     4ms     3ms   273us
# Lock time      0    25ms       0     4ms     2us     1us    54us     1us
# Rows sent     39 227.82k      27      29   28.50   28.75       1   28.75
# Rows examine   1 455.63k      54      58   57.00   56.92       2   56.92
# Query size     0 531.57k      66      68   66.49   65.89       0   65.89
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ##############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'gacha_item_masters'\G
#    SHOW CREATE TABLE `isucon`.`gacha_item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM gacha_item_masters WHERE gacha_id='37' ORDER BY id ASC\G

# Query 18: 146.93 QPS, 0.12x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 193740291
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    8816
# Exec time      1      7s    80us    48ms   822us     3ms     2ms   185us
# Lock time      0    25ms       0     1ms     2us     1us    29us     1us
# Rows sent      1   8.61k       1       1       1       1       0       1
# Rows examine   0   8.61k       1       2    1.00    0.99    0.02    0.99
# Query size     0 691.89k      75      86   80.36   84.10    3.85   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=1116035482 AND platform_id='13002762'\G

# Query 19: 279.43 QPS, 0.11x concurrency, ID 0xAB2AB35C6EFA17C04018A132A84A16C9 at byte 255051398
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   16766
# Exec time      1      6s    29us    53ms   381us     1ms     1ms    89us
# Lock time      0   100ms       0    53ms     5us     1us   393us     1us
# Rows sent      0     536       0       1    0.03       0    0.17       0
# Rows examine   0     536       0       1    0.03       0    0.17       0
# Query size     0 836.83k      45      57   51.11   56.92    4.83   46.83
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###############################################
#   1ms  #######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_bans'\G
#    SHOW CREATE TABLE `isucon`.`user_bans`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_bans WHERE user_id=8845827595\G

# Query 20: 252.25 QPS, 0.10x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 201991113
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:42:57 to 2023-11-20T19:43:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1   15135
# Exec time      1      6s    33us    74ms   412us     1ms     2ms    98us
# Lock time      0    47ms       0     9ms     3us     1us    82us     1us
# Rows sent      2  14.78k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  14.78k       0       1    1.00    0.99    0.01    0.99
# Query size     0 623.38k      32      48   42.18   46.83    4.09   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ##########################################################
#   1ms  ########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=6129764731322063235\G
