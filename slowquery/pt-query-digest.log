
# 17.7s user time, 200ms system time, 66.38M rss, 390.01G vsz
# Current date: Thu Nov 23 17:50:37 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 374.61k total, 189 unique, 1.17k QPS, 1.67x concurrency _______
# Time range: 2023-11-23T08:44:18 to 2023-11-23T08:49:39
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           536s     1us     11s     1ms     4ms    24ms   185us
# Lock time             3s       0   188ms     8us     1us   620us     1us
# Rows sent        756.24k       0    1012    2.07   12.54    6.27       0
# Rows examine       1.84M       0    1012    5.14   40.45   12.84    0.99
# Query size       579.16M       6 1012.90k   1.58k  234.30  37.84k   72.65

# Profile
# Rank Query ID                            Response time  Calls  R/Call  V
# ==== =================================== ============== ====== ======= =
#    1 0x0289EE1948A7DB665332876ADF2A4CC2  150.2036 28.0%    395  0.3803  0.29 INSERT user_presents
#    2 0x03FFA53B9AEA23779E51FE7DD3DC165E   44.8058  8.4%  33125  0.0014  0.02 INSERT user_presents
#    3 0x6E790EE92EFF4755B6E0FA83F9CA8363   33.1592  6.2%   4008  0.0083  0.02 UPDATE user_presents
#    4 0x611363ACBD1690538F137757E45B738C   24.1526  4.5%   4020  0.0060  0.01 SELECT user_presents
#    5 0x2096778F723F6666B5D7DDC9D01010C7   20.1206  3.8%     92  0.2187  0.08 INSERT user_cards
#    6 0xED0711EB833D06BBD84F496A9784760B   19.0922  3.6%  33551  0.0006  0.00 UPDATE user_items
#    7 0x8CA5C26DA1F53D285B58FE47352DA00A   18.6061  3.5%  22138  0.0008  0.01 SELECT user_sessions
#    8 0xFFFCA4D67EA0A788813031B8BBC3B329   14.7179  2.7%  12031  0.0012  0.01 COMMIT
#    9 0xBC551EACF5A3BE27E3F2CC3C5133F3D5   14.1113  2.6%  12222  0.0012  0.01 SELECT gacha_item_masters
#   10 0x07D5CE9B533D56A3B70C17C590E82A7F   12.9332  2.4%  25914  0.0005  0.00 SELECT version_masters
#   11 0x2372FB123B18A108CFBB5352F61B370B   12.0732  2.3%  22408  0.0005  0.00 SELECT users
#   12 0xAB2AB35C6EFA17C04018A132A84A16C9   11.6402  2.2%  24905  0.0005  0.00 SELECT user_bans
#   13 0x79A889ED30BFA8BF517F86F6D70065B6   10.7421  2.0%      1 10.7421  0.00 LOAD DATA user_presents
#   14 0x584D7D428BA6602840353479CEB359A1   10.6130  2.0%  13199  0.0008  0.01 SELECT user_devices
#   15 0xE89B4FB5E77ED142BEAF8C3B369FA2FE    9.3399  1.7%   4008  0.0023  0.01 SELECT user_presents
#   16 0x1049606E13674A053E0CC69500F839DC    7.1134  1.3%   3961  0.0018  0.01 UPDATE user_one_time_tokens
#   17 0x0B3509236B570F5C5FE423B079765901    6.7754  1.3%  12554  0.0005  0.00 INSERT user_cards
#   18 0x975F0A7CC9BCA46BBC7DAD888BA0794F    6.5855  1.2%  11464  0.0006  0.00 SELECT item_masters
#   19 0xE63C5805E48DA98A0AD3A20E4E0B9976    6.3134  1.2%   9453  0.0007  0.01 SELECT user_login_bonuses
#   20 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A    6.1764  1.2%   3987  0.0015  0.01 INSERT user_one_time_tokens
# MISC 0xMISC                               97.1668 18.1% 121176  0.0008   0.0 <169 ITEMS>

# Query 1: 2.56 QPS, 0.98x concurrency, ID 0x0289EE1948A7DB665332876ADF2A4CC2 at byte 413757632
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.29
# Time range: 2023-11-23T08:44:35 to 2023-11-23T08:47:09
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     395
# Exec time     27    150s   136ms      2s   380ms      1s   333ms   266ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    67 390.48M 789.87k 1012.90k 1012.27k 1009.33k  12.87k 1009.33k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s  ######
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO `user_presents` VALUES (82631879492,616130165,1568556624,3,17,1,'ガチャ取得アイテムです',1568557224,1568557224,1568557224) /*... omitted ...*/\G

# Query 2: 552.08 QPS, 0.75x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 599091020
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   33125
# Exec time      8     45s    53us   118ms     1ms     5ms     5ms   185us
# Lock time      4   132ms       0     7ms     3us     1us    94us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1  11.56M     234   3.32k  365.82   1.69k  552.32  234.30
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############
# 100us  ################################################################
#   1ms  ################
#  10ms  ##
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (3666371401, 1116779146, 1661676539, 1, 1, 3000, 'リリース記念プレゼントです！', 1661676539, 1661676539),(1260649600, 1116779146, 1661676539, 1, 1, 1000, '１ヶ月突破プレゼントです！', 1661676539, 1661676539),(4248871390, 1116779146, 1661676539, 1, 1, 1000, '２ヶ月突破プレゼントです！', 1661676539, 1661676539),(967217285, 1116779146, 1661676539, 1, 1, 2000, '３ヶ月突破プレゼントです！', 1661676539, 1661676539),(230764086, 1116779146, 1661676539, 1, 1, 2000, '４ヶ月突破プレゼントです！', 1661676539, 1661676539),(2501167468, 1116779146, 1661676539, 1, 1, 2000, '５ヶ月突破プレゼントです！', 1661676539, 1661676539),(2969091652, 1116779146, 1661676539, 1, 1, 3000, 'ハーフアニバーサリープレゼントです！', 1661676539, 1661676539),(1030475890, 1116779146, 1661676539, 1, 1, 2000, '７ヶ月突破プレゼントです！', 1661676539, 1661676539),(229246187, 1116779146, 1661676539, 1, 1, 2000, '８ヶ月突破プレゼントです！', 1661676539, 1661676539),(2660812866, 1116779146, 1661676539, 1, 1, 2000, '９ヶ月突破プレゼントです！', 1661676539, 1661676539),(4253583776, 1116779146, 1661676539, 1, 1, 2000, '１０ヶ月突破プレゼントです！', 1661676539, 1661676539),(3945577, 1116779146, 1661676539, 1, 1, 2000, '１１ヶ月突破プレゼントです！', 1661676539, 1661676539),(3241764948, 1116779146, 1661676539, 1, 1, 3000, '１周年突破プレゼントです！', 1661676539, 1661676539),(1458766921, 1116779146, 1661676539, 1, 1, 6000, '周年記念プレゼントです！', 1661676539, 1661676539),(3958113936, 1116779146, 1661676539, 1, 1, 2000, '１３ヶ月突破プレゼントです！', 1661676539, 1661676539),(4253417544, 1116779146, 1661676539, 1, 1, 2000, '１４ヶ月突破プレゼントです！', 1661676539, 1661676539),(3865484866, 1116779146, 1661676539, 1, 1, 2000, '１５ヶ月突破プレゼントです１', 1661676539, 1661676539),(3337987092, 1116779146, 1661676539, 1, 1, 2000, '１６ヶ月突破プレゼントです！', 1661676539, 1661676539),(868185350, 1116779146, 1661676539, 1, 1, 2000, '１７ヶ月突破プレゼントです！', 1661676539, 1661676539),(1018959365, 1116779146, 1661676539, 1, 1, 2000, '１８ヶ月突破プレゼントです！', 1661676539, 1661676539),(3906509207, 1116779146, 1661676539, 1, 1, 2000, '１９ヶ月突破プレゼントです！', 1661676539, 1661676539),(178386544, 1116779146, 1661676539, 1, 1, 2000, '２０ヶ月突破プレゼントです！', 1661676539, 1661676539),(950222575, 1116779146, 1661676539, 1, 1, 2000, '２１ヶ月プレゼントです！', 1661676539, 1661676539),(2615327307, 1116779146, 1661676539, 1, 1, 2000, '２２ヶ月プレゼントです！', 1661676539, 1661676539),(4069031690, 1116779146, 1661676539, 1, 1, 2000, '２３ヶ月プレゼントです！', 1661676539, 1661676539),(1327202535, 1116779146, 1661676539, 1, 1, 6000, '２周年記念プレゼントです！', 1661676539, 1661676539),(758845613, 1116779146, 1661676539, 1, 1, 6000, '２.５周年プレゼントです！', 1661676539, 1661676539),(3126371558, 1116779146, 1661676539, 1, 1, 6000, 'CM放映記念プレゼントです！', 1661676539, 1661676539)\G

# Query 3: 66.80 QPS, 0.55x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 606423406
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    4008
# Exec time      6     33s   280us   122ms     8ms    34ms    13ms     3ms
# Lock time      0    21ms       0    14ms     5us     1us   214us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   4  83.66k       1      67   21.37   36.69    9.74   22.53
# Query size     0   1.32M      93     925  344.08  537.02  120.54  363.48
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ####################
#   1ms  ################################################################
#  10ms  #########################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661676543, updated_at=1661676543 WHERE id IN (419169670, 575422273, 1259924727, 1379559232, 1811218450, 2760302079, 2940001720, 2985076438, 3175678628, 3209529515, 3423020746, 3565508506, 3967279982, 4120125181, 4281853175, 11310929276, 13735068312, 15055662657, 19922624546, 26733322772, 43600331069, 44324001578, 51926474160, 55314799619, 58921797625, 62762923064, 72090394513, 73605592711, 76325503439, 76739784745, 79498850219, 81069986850, 84742184625, 86410357509, 89663191990, 92713228092, 95393786289)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661676543, updated_at=1661676543 from user_presents where  id IN (419169670, 575422273, 1259924727, 1379559232, 1811218450, 2760302079, 2940001720, 2985076438, 3175678628, 3209529515, 3423020746, 3565508506, 3967279982, 4120125181, 4281853175, 11310929276, 13735068312, 15055662657, 19922624546, 26733322772, 43600331069, 44324001578, 51926474160, 55314799619, 58921797625, 62762923064, 72090394513, 73605592711, 76325503439, 76739784745, 79498850219, 81069986850, 84742184625, 86410357509, 89663191990, 92713228092, 95393786289)\G

# Query 4: 67 QPS, 0.40x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 644032744
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    4020
# Exec time      4     24s   165us   102ms     6ms    22ms     8ms     3ms
# Lock time      0    30ms       0     8ms     7us     1us   149us     1us
# Rows sent     11  83.89k       0      67   21.37   36.69    9.75   22.53
# Rows examine   4  83.89k       0      67   21.37   36.69    9.75   22.53
# Query size     0 505.72k     126     129  128.82  124.25       0  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ############################
#   1ms  ################################################################
#  10ms  ###################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 7075905787 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 5: 0.38 QPS, 0.08x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 510124780
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.08
# Time range: 2023-11-23T08:44:19 to 2023-11-23T08:48:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      92
# Exec time      3     20s   142ms      1s   219ms   412ms   128ms   171ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    15  90.36M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s  #
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (50165504470,3230800932,3,70,35,4321,1571892606,1571892606,NULL) /*... omitted ...*/\G

# Query 6: 559.18 QPS, 0.32x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 662306981
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   33551
# Exec time      3     19s    48us    60ms   569us     2ms     2ms   138us
# Lock time      7   219ms       0    39ms     6us     1us   270us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   1  32.76k       1       1       1       1       0       1
# Query size     0   2.40M      70      76   74.90   72.65    0.51   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##########################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=55, updated_at=1661676569 WHERE id=9693628466\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=55, updated_at=1661676569 from user_items where  id=9693628466\G

# Query 7: 368.97 QPS, 0.31x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 624937263
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   22138
# Exec time      3     19s    82us    70ms   840us     3ms     3ms   224us
# Lock time      3   118ms       0    11ms     5us     1us   105us     1us
# Rows sent      2  21.62k       0       1    1.00    0.99    0.01    0.99
# Rows examine   1  21.62k       0       1    1.00    0.99    0.01    0.99
# Query size     0   2.24M      81     106  106.00  102.22    0.15  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='9f23701b-e685-4f1c-beb8-cc43156588b5' AND deleted_at IS NULL\G

# Query 8: 200.52 QPS, 0.25x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 674635476
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   12031
# Exec time      2     15s    33us    86ms     1ms     5ms     4ms   247us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  70.49k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #######################################
# 100us  ################################################################
#   1ms  ######################
#  10ms  ###
# 100ms
#    1s
#  10s+
COMMIT\G

# Query 9: 203.70 QPS, 0.24x concurrency, ID 0xBC551EACF5A3BE27E3F2CC3C5133F3D5 at byte 630764145
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   12222
# Exec time      2     14s   118us    71ms     1ms     5ms     3ms   366us
# Lock time      2    88ms       0    11ms     7us     1us   142us     1us
# Rows sent     44 340.15k      27      29   28.50   28.75       1   28.75
# Rows examine  36 680.30k      54      58   57.00   56.92       2   56.92
# Query size     0 793.69k      66      68   66.50   65.89       0   65.89
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'gacha_item_masters'\G
#    SHOW CREATE TABLE `isucon`.`gacha_item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM gacha_item_masters WHERE gacha_id=31 ORDER BY id ASC\G

# Query 10: 431.90 QPS, 0.22x concurrency, ID 0x07D5CE9B533D56A3B70C17C590E82A7F at byte 662301893
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   25914
# Exec time      2     13s    49us    59ms   499us     2ms     2ms   144us
# Lock time      4   146ms       0    12ms     5us     1us   132us     1us
# Rows sent      3  25.31k       1       1       1       1       0       1
# Rows examine   2  43.25k       1       2    1.71    1.96    0.44    1.96
# Query size     0   1.09M      44      44      44      44       0      44
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'version_masters'\G
#    SHOW CREATE TABLE `isucon`.`version_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM version_masters WHERE status=1\G

# Query 11: 373.47 QPS, 0.20x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 665230650
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   22408
# Exec time      2     12s    46us    54ms   538us     2ms     1ms   144us
# Lock time      6   194ms       0    34ms     8us     1us   305us     1us
# Rows sent      2  21.88k       0       1    1.00    0.99    0.01    0.99
# Rows examine   1  21.88k       0       1    1.00    0.99    0.01    0.99
# Query size     0 849.75k      33      39   38.83   38.53    0.67   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=2952676472\G

# Query 12: 415.08 QPS, 0.19x concurrency, ID 0xAB2AB35C6EFA17C04018A132A84A16C9 at byte 637388728
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   24905
# Exec time      2     12s    42us    61ms   467us     2ms     1ms   131us
# Lock time      4   128ms       0     6ms     5us     1us    93us     1us
# Rows sent      0     591       0       1    0.02       0    0.15       0
# Rows examine   0     591       0       1    0.02       0    0.15       0
# Query size     0   1.14M      45      48   47.83   46.83    0.26   46.83
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ########################################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_bans'\G
#    SHOW CREATE TABLE `isucon`.`user_bans`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_bans WHERE user_id=7856091019\G

# Query 13: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 562824148
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-23T08:48:38
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      2     11s     11s     11s     11s     11s       0     11s
# Lock time      0     2us     2us     2us     2us     2us       0     2us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 14: 219.98 QPS, 0.18x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 626790151
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   13199
# Exec time      1     11s   105us    59ms   804us     3ms     2ms   236us
# Lock time      2    66ms       0     7ms     4us     1us    89us     1us
# Rows sent      1  12.89k       1       1       1       1       0       1
# Rows examine   0  12.89k       1       1       1       1       0       1
# Query size     0 995.67k      74      78   77.25   76.28    1.22   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=4811484689 AND platform_id='26213787'\G

# Query 15: 66.80 QPS, 0.16x concurrency, ID 0xE89B4FB5E77ED142BEAF8C3B369FA2FE at byte 647694990
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    4008
# Exec time      1      9s    91us    70ms     2ms    11ms     5ms   568us
# Lock time      0    29ms       0     6ms     7us     1us   126us     1us
# Rows sent     11  83.66k       1      67   21.37   36.69    9.74   22.53
# Rows examine   4  83.66k       1      67   21.37   36.69    9.74   22.53
# Query size     0   1.24M      74     906  325.08  511.45  119.42  346.17
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ##############################
#  10ms  ######
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents WHERE id IN (371811343, 445388102, 726594522, 1268177941, 1288422786, 2155206453, 2157383294, 2237511377, 2512635438, 2525796087, 2650977110, 2671640662, 4122710407, 4125147599, 4139769287, 51445400765, 93270300695, 79632328295, 60085489892, 63503966210, 63500821773, 17773391430, 17536891619, 53574356687, 8073083975, 39039570272, 75035717937, 77777454123, 9682416870, 3772054603, 32099854910, 82516818518, 99590815186, 16876917519, 4654434904, 1231091797, 37727237988, 98857115683) AND deleted_at IS NULL\G

# Query 16: 66.02 QPS, 0.12x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 626793246
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3961
# Exec time      1      7s   140us    95ms     2ms     8ms     4ms   424us
# Lock time      1    32ms       0    13ms     8us     1us   205us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0   3.87k       1       1       1       1       0       1
# Query size     0 402.29k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ########################
#  10ms  ###
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661676553 WHERE token='8916ef56-0ef5-45a0-a0c8-b357a51ac919'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661676553 from user_one_time_tokens where  token='8916ef56-0ef5-45a0-a0c8-b357a51ac919'\G

# Query 17: 209.23 QPS, 0.11x concurrency, ID 0x0B3509236B570F5C5FE423B079765901 at byte 679053018
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   12554
# Exec time      1      7s    50us    49ms   539us     2ms     2ms   138us
# Lock time      1    62ms       0     9ms     4us     1us   120us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0   2.04M     165     176  170.16  166.51    0.85  166.51
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##########################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO user_cards(id, user_id, card_id, amount_per_sec, level, total_exp, created_at, updated_at) VALUES (1472090823, 2171036103, 2, 1, 1, 0, 1661676578, 1661676578)\G

# Query 18: 191.07 QPS, 0.11x concurrency, ID 0x975F0A7CC9BCA46BBC7DAD888BA0794F at byte 609474648
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   11464
# Exec time      1      7s    54us    59ms   574us     2ms     2ms   159us
# Lock time      2    82ms       0    26ms     7us     1us   260us     1us
# Rows sent      1  11.20k       1       1       1       1       0       1
# Rows examine   0  11.20k       1       1       1       1       0       1
# Query size     0 596.18k      53      54   53.25   51.63       0   51.63
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##########################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'item_masters'\G
#    SHOW CREATE TABLE `isucon`.`item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM item_masters WHERE id=2 AND item_type=2\G

# Query 19: 157.55 QPS, 0.11x concurrency, ID 0xE63C5805E48DA98A0AD3A20E4E0B9976 at byte 630765301
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9453
# Exec time      1      6s    79us    70ms   667us     3ms     2ms   194us
# Lock time      0    27ms       0     9ms     2us     1us    93us     1us
# Rows sent      0   6.38k       0       1    0.69    0.99    0.46    0.99
# Rows examine   0   6.38k       0       1    0.69    0.99    0.46    0.99
# Query size     0 718.60k      75      78   77.84   76.28    0.43   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_login_bonuses'\G
#    SHOW CREATE TABLE `isucon`.`user_login_bonuses`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_login_bonuses WHERE user_id=9877811015 AND login_bonus_id=4\G

# Query 20: 66.45 QPS, 0.10x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 674644791
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T08:48:39 to 2023-11-23T08:49:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3987
# Exec time      1      6s    99us    74ms     2ms     6ms     4ms   424us
# Lock time      0    12ms       0     1ms     2us     1us    28us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 819.82k     207     211  210.56  202.40       0  202.40
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #####################
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (1531759227, 8439359200, '4c99301b-e766-4ad6-ac6e-e51760dd3695', 1, 1661676575, 1661676575, 1661677175)\G
