
# 24.6s user time, 150ms system time, 53.56M rss, 390.00G vsz
# Current date: Tue Nov 21 03:13:54 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 649.30k total, 179 unique, 6.56k QPS, 5.21x concurrency _______
# Time range: 2023-11-20T18:11:03 to 2023-11-20T18:12:42
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           515s     1us     20s   793us     2ms    25ms    63us
# Lock time            14s       0   411ms    21us     1us   939us       0
# Rows sent        353.20k       0    1012    0.56    0.99    3.43       0
# Rows examine       7.93M       0   2.62k   12.81   13.83   93.10       0
# Query size       108.09M       6 1008.95k  174.56  192.76  10.21k   31.70

# Profile
# Rank Query ID                            Response time  Calls  R/Call  V
# ==== =================================== ============== ====== ======= =
#    1 0x611363ACBD1690538F137757E45B738C  100.7496 19.5%   1432  0.0704  0.19 SELECT user_presents
#    2 0xFFFCA4D67EA0A788813031B8BBC3B329   38.1511  7.4%   4266  0.0089  0.00 COMMIT
#    3 0xF0F3320DE1260EAD27BC0426FCB34A4D   36.8615  7.2%   1432  0.0257  0.17 SELECT user_presents
#    4 0xDA556F9115773A1A99AA0165670CE848   32.2411  6.3% 209351  0.0002  0.00 ADMIN PREPARE
#    5 0x3FFFD39D9DB10329B174042FE1810238   32.2364  6.3%  15882  0.0020  0.01 UPDATE user_presents
#    6 0x03FFA53B9AEA23779E51FE7DD3DC165E   29.4053  5.7%  23866  0.0012  0.01 INSERT user_presents
#    7 0x1049606E13674A053E0CC69500F839DC   28.0674  5.4%   1380  0.0203  0.02 UPDATE user_one_time_tokens
#    8 0xC20D9D224412E78025DDB691D46B02B6   25.8638  5.0%  16705  0.0015  0.01 SELECT user_items
#    9 0x79A889ED30BFA8BF517F86F6D70065B6   20.1309  3.9%      1 20.1309  0.00 LOAD DATA user_presents
#   10 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A   14.4790  2.8%   1384  0.0105  0.00 INSERT user_one_time_tokens
#   11 0x584D7D428BA6602840353479CEB359A1   10.1414  2.0%   4962  0.0020  0.01 SELECT user_devices
#   12 0x2096778F723F6666B5D7DDC9D01010C7   10.0705  2.0%     46  0.2189  0.01 INSERT user_cards
#   13 0x75C006C72A2DD00658309A1A758E1BB6    9.6863  1.9%    952  0.0102  0.00 UPDATE users
#   14 0xE3341326DCBBC41D81C9550FEAE6F248    9.6116  1.9%   1234  0.0078  0.03 SELECT user_present_all_received_history
#   15 0x8CA5C26DA1F53D285B58FE47352DA00A    9.4927  1.8%   8012  0.0012  0.00 SELECT user_sessions
#   16 0x2372FB123B18A108CFBB5352F61B370B    8.8330  1.7%  18924  0.0005  0.01 SELECT users
#   17 0xED0711EB833D06BBD84F496A9784760B    8.0862  1.6%  15767  0.0005  0.00 UPDATE user_items
#   18 0x6E790EE92EFF4755B6E0FA83F9CA8363    7.9700  1.5%   1170  0.0068  0.03 UPDATE user_presents
#   19 0xD858CC1645CE084FE3844E34483B662E    7.2950  1.4%  14015  0.0005  0.00 UPDATE users
#   20 0x41CEDDDAFB6289B60E5F30D0462408DB    6.5156  1.3%  12366  0.0005  0.01 INSERT user_present_all_received_history
# MISC 0xMISC                               69.4875 13.5% 296149  0.0002   0.0 <159 ITEMS>

# Query 1: 23.87 QPS, 1.68x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 225289891
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.19
# Time range: 2023-11-20T18:11:42 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1432
# Exec time     19    101s   144us   790ms    70ms   308ms   114ms    12ms
# Lock time      0     2ms       0   261us     1us     1us     8us     1us
# Rows sent      8  31.32k       0      65   22.40   36.69   10.15   22.53
# Rows examine   4 389.01k      47     697  278.17  652.75  233.85  130.47
# Query size     0 184.50k     126     138  131.94  136.99       6  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ######################################################
#   1ms  ########################################################
#  10ms  ################################################################
# 100ms  ############################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 8111472590 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 2: 69.93 QPS, 0.63x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 128535118
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:11:41 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4266
# Exec time      7     38s     2ms    96ms     9ms    18ms     6ms     8ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  25.00k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ############################
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 3: 23.87 QPS, 0.61x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 238011237
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.17
# Time range: 2023-11-20T18:11:42 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1432
# Exec time      7     37s   112us   824ms    26ms   148ms    67ms     3ms
# Lock time      0     5ms       0   910us     3us     1us    34us     1us
# Rows sent      0   1.40k       1       1       1       1       0       1
# Rows examine   4 357.69k      27     663  255.78  621.67  229.41  118.34
# Query size     0 121.57k      81      93   86.94   92.72    5.96   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ########################################################
#   1ms  ################################################################
#  10ms  ###########################################
# 100ms  #############
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 6331999653 AND deleted_at IS NULL\G

# Query 4: 3.43k QPS, 0.53x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 233061136
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:11:41 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         32  209351
# Exec time      6     32s    17us    18ms   154us   541us   320us    66us
# Lock time      0    36us       0     4us       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     5   5.99M      30      30      30      30       0      30
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ########################
#   1ms  ##
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 5: 264.70 QPS, 0.54x concurrency, ID 0x3FFFD39D9DB10329B174042FE1810238 at byte 217704989
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:11:42 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   15882
# Exec time      6     32s    67us    89ms     2ms    11ms     5ms   194us
# Lock time      0    25ms       0     2ms     1us     1us    26us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  15.51k       1       1       1       1       0       1
# Query size     1   1.46M      82      98   96.20   97.36    3.86   97.36
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########
# 100us  ################################################################
#   1ms  ##################
#  10ms  #####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661710352, updated_at=1661710352 WHERE id=1421070710880403930\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661710352, updated_at=1661710352 from user_presents where  id=1421070710880403930\G

# Query 6: 391.25 QPS, 0.48x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 223972380
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:11:41 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   23866
# Exec time      5     29s    48us    92ms     1ms     7ms     4ms   138us
# Lock time      0    29ms       0     1ms     1us     1us    11us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     5   5.75M     242     272  252.80  258.32    6.57  246.02
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############################
# 100us  ################################################################
#   1ms  ###############
#  10ms  ###
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (1421070710880406558, 4496554004, 1661710354, 1, 1, 2000, '１５ヶ月突破プレゼントです１', 1661710354, 1661710354)\G

# Query 7: 23 QPS, 0.47x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 212293883
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T18:11:42 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1380
# Exec time      5     28s     3ms   151ms    20ms    56ms    18ms    14ms
# Lock time     73     10s       0   116ms     8ms    36ms    14ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine  11 935.03k       1   1.35k  693.82   1.26k  390.57  685.39
# Query size     0 140.16k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ##############################
#  10ms  ################################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661710350 WHERE token='7f16e358-b9c2-4034-b111-1490632d8694'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661710350 from user_one_time_tokens where  token='7f16e358-b9c2-4034-b111-1490632d8694'\G

# Query 8: 273.85 QPS, 0.42x concurrency, ID 0xC20D9D224412E78025DDB691D46B02B6 at byte 189270990
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:11:41 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   16705
# Exec time      5     26s    72us    65ms     2ms     7ms     4ms   273us
# Lock time      0    25ms       0     1ms     1us     1us    14us     1us
# Rows sent      4  15.17k       0       1    0.93    0.99    0.25    0.99
# Rows examine   2 198.40k       0      14   12.16   13.83    3.50   13.83
# Query size     0   1.03M      61      73   64.87   72.65    3.12   62.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #############
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_items WHERE user_id=4141006919 AND item_id=17\G

# Query 9: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650768
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-20T18:11:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      3     20s     20s     20s     20s     20s       0     20s
# Lock time      0     2us     2us     2us     2us     2us       0     2us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 10: 23.07 QPS, 0.24x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 119706019
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:11:42 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1384
# Exec time      2     14s     3ms    88ms    10ms    23ms     7ms     8ms
# Lock time     13      2s       0    44ms     1ms     8ms     3ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 301.27k     217     229  222.91  223.14    5.00  212.52
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ##############################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (1421070710880378401, 1421070710880377968, '4588b33e-d276-4b18-87bf-4daede0ed940', 2, 1661623919, 1661623919, 1661624519)\G

# Query 11: 81.34 QPS, 0.17x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 225025895
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:11:41 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4962
# Exec time      1     10s    86us    51ms     2ms    10ms     4ms   260us
# Lock time      0    10ms       0     1ms     2us     1us    22us     1us
# Rows sent      1   4.85k       1       1       1       1       0       1
# Rows examine   0   4.85k       1       2    1.00    0.99    0.03    0.99
# Query size     0 385.18k      74      86   79.49   84.10    3.54   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #####################
#  10ms  ####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=343613844 AND platform_id='7446580'\G

# Query 12: 4.60 QPS, 1.01x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 241562
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:11:04 to 2023-11-20T18:11:14
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      1     10s   175ms   370ms   219ms   293ms    40ms   198ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    41  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (1042148,9904038980,6,720,36,5336,1639932222,1639932222,NULL) /*... omitted ...*/\G

# Query 13: 15.87 QPS, 0.16x concurrency, ID 0x75C006C72A2DD00658309A1A758E1BB6 at byte 119697375
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:11:42 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     952
# Exec time      1     10s     3ms    85ms    10ms    22ms     7ms     8ms
# Lock time      0     2ms       0   271us     1us     1us    10us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0     952       1       1       1       1       0       1
# Query size     0  79.29k      82      87   85.29   84.10    1.01   84.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #######################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=643656943, last_getreward_at=1661623919 WHERE id=8816453570\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=643656943, last_getreward_at=1661623919 from users where  id=8816453570\G

# Query 14: 20.23 QPS, 0.16x concurrency, ID 0xE3341326DCBBC41D81C9550FEAE6F248 at byte 153529535
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-20T18:11:41 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1234
# Exec time      1     10s   203us   135ms     8ms    42ms    16ms     1ms
# Lock time      0     1ms       0    86us     1us     1us     2us     1us
# Rows sent      6  21.64k       0      28   17.96   26.08   10.30   26.08
# Rows examine   0  21.64k       0      28   17.96   26.08   10.30   26.08
# Query size     0 240.54k     192     208  199.61  202.40    3.93  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #######################################################
#   1ms  ################################################################
#  10ms  ##########################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=9208803191 AND present_all_id IN (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29)\G

# Query 15: 133.53 QPS, 0.16x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 235469719
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:11:42 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    8012
# Exec time      1      9s    67us    35ms     1ms     4ms     2ms   657us
# Lock time      0    14ms       0   447us     1us     1us     9us     1us
# Rows sent      2   7.82k       0       1    1.00    0.99    0.01    0.99
# Rows examine  57   4.55M       4   1.19k  595.77   1.09k  344.88  592.07
# Query size     0 829.34k      81     106  106.00  102.22    0.25  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##
# 100us  ################################################################
#   1ms  ###########################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='d07c0c35-2416-4e6c-a7ce-b436ef842632' AND deleted_at IS NULL\G

# Query 16: 310.23 QPS, 0.14x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 195776105
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:11:41 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   18924
# Exec time      1      9s    36us    42ms   466us     2ms     2ms   103us
# Lock time      0    31ms       0     2ms     1us     1us    23us     1us
# Rows sent      5  18.48k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  18.48k       0       1    1.00    0.99    0.01    0.99
# Query size     0 794.29k      33      48   42.98   46.83    4.26   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################################################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=3190398840\G

# Query 17: 258.48 QPS, 0.13x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 224605703
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:11:41 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   15767
# Exec time      1      8s    61us    49ms   512us     2ms     2ms   144us
# Lock time      0    24ms       0     2ms     1us     1us    20us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  15.40k       1       1       1       1       0       1
# Query size     1   1.13M      71      82   75.42   80.10    1.83   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############
# 100us  ################################################################
#   1ms  #######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=0, updated_at=1661710354 WHERE id=1421070710880406070\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=0, updated_at=1661710354 from user_items where  id=1421070710880406070\G

# Query 18: 19.50 QPS, 0.13x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 216273084
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-20T18:11:42 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1170
# Exec time      1      8s   133us   140ms     7ms    33ms    14ms     1ms
# Lock time      0     1ms       0    40us       0     1us     1us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  15.52k       5      42   13.58   20.43    5.10   13.83
# Query size     0 306.47k     147     625  268.22  346.17   55.58  271.23
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ########################################################
#  10ms  ########################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661710350, updated_at=1661710350 WHERE id IN (5746454065, 8154587517, 15817080410, 21990597175, 27598722936, 32734237330, 34473590582, 45393420956, 46333649921, 48870422891, 60880327292, 61422439162, 63510729769, 78331480153, 80380549751, 82731589966, 82842164249)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661710350, updated_at=1661710350 from user_presents where  id IN (5746454065, 8154587517, 15817080410, 21990597175, 27598722936, 32734237330, 34473590582, 45393420956, 46333649921, 48870422891, 60880327292, 61422439162, 63510729769, 78331480153, 80380549751, 82731589966, 82842164249)\G

# Query 19: 229.75 QPS, 0.12x concurrency, ID 0xD858CC1645CE084FE3844E34483B662E at byte 133386973
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:11:41 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   14015
# Exec time      1      7s    62us    39ms   520us     2ms     1ms   125us
# Lock time      0    30ms       0     5ms     2us     1us    49us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  13.69k       1       1       1       1       0       1
# Query size     0 793.84k      47      60   58.00   59.77    2.75   56.92
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ######################
# 100us  ################################################################
#   1ms  #######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=859492576 WHERE id=8655857373\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=859492576 from users where  id=8655857373\G

# Query 20: 202.72 QPS, 0.11x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 219204771
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:11:41 to 2023-11-20T18:12:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1   12366
# Exec time      1      7s    44us    61ms   526us     2ms     2ms   103us
# Lock time      0    22ms       0     5ms     1us     1us    48us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     2   2.32M     189     201  196.92  192.76    4.54  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########################################################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (1421070710880405314, 5291071509, 26, 1661710352, 1661710352, 1661710352)\G
