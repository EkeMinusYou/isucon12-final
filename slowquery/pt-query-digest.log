
# 20.8s user time, 90ms system time, 58.89M rss, 389.87G vsz
# Current date: Mon Nov 20 00:31:36 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 557.32k total, 178 unique, 6.19k QPS, 3.97x concurrency _______
# Time range: 2023-11-19T15:29:13 to 2023-11-19T15:30:43
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           358s     1us     22s   641us     2ms    29ms    63us
# Lock time            10s       0   239ms    17us     1us   930us       0
# Rows sent        283.20k       0    1012    0.52    0.99    3.36       0
# Rows examine       5.39M       0  10.81k   10.14   12.54   75.30       0
# Query size       102.89M       6 1008.95k  193.58  192.76  11.02k   31.70

# Profile
# Rank Query ID                            Response time Calls  R/Call  V/
# ==== =================================== ============= ====== ======= ==
#    1 0x611363ACBD1690538F137757E45B738C  53.3011 14.9%   1155  0.0461  0.14 SELECT user_presents
#    2 0x3FFFD39D9DB10329B174042FE1810238  34.3163  9.6%  25405  0.0014  0.01 UPDATE user_presents
#    3 0xFFFCA4D67EA0A788813031B8BBC3B329  27.2923  7.6%   3474  0.0079  0.00 COMMIT
#    4 0xDA556F9115773A1A99AA0165670CE848  27.0724  7.6% 180192  0.0002  0.00 ADMIN PREPARE
#    5 0x79A889ED30BFA8BF517F86F6D70065B6  21.5045  6.0%      1 21.5045  0.00 LOAD DATA user_presents
#    6 0xC20D9D224412E78025DDB691D46B02B6  20.6159  5.8%  13384  0.0015  0.01 SELECT user_items
#    7 0x1049606E13674A053E0CC69500F839DC  20.0078  5.6%   1128  0.0177  0.02 UPDATE user_one_time_tokens
#    8 0x03FFA53B9AEA23779E51FE7DD3DC165E  18.5937  5.2%  19291  0.0010  0.01 INSERT user_presents
#    9 0xF0F3320DE1260EAD27BC0426FCB34A4D  12.9000  3.6%   1155  0.0112  0.06 SELECT user_presents
#   10 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A  11.1965  3.1%   1132  0.0099  0.01 INSERT user_one_time_tokens
#   11 0x2096778F723F6666B5D7DDC9D01010C7  10.1372  2.8%     46  0.2204  0.01 INSERT user_cards
#   12 0xE3341326DCBBC41D81C9550FEAE6F248   8.0072  2.2%    989  0.0081  0.03 SELECT user_present_all_received_history
#   13 0x75C006C72A2DD00658309A1A758E1BB6   6.7731  1.9%    746  0.0091  0.00 UPDATE users
#   14 0x2372FB123B18A108CFBB5352F61B370B   6.1502  1.7%  15083  0.0004  0.00 SELECT users
#   15 0x8CA5C26DA1F53D285B58FE47352DA00A   6.1422  1.7%   6479  0.0009  0.00 SELECT user_sessions
#   16 0x584D7D428BA6602840353479CEB359A1   6.0321  1.7%   3996  0.0015  0.01 SELECT user_devices
#   17 0xD858CC1645CE084FE3844E34483B662E   5.7453  1.6%  11221  0.0005  0.00 UPDATE users
#   18 0xED0711EB833D06BBD84F496A9784760B   5.7084  1.6%  12559  0.0005  0.00 UPDATE user_items
#   19 0x0B3509236B570F5C5FE423B079765901   5.2079  1.5%   3818  0.0014  0.01 INSERT user_cards
#   20 0x41CEDDDAFB6289B60E5F30D0462408DB   4.1217  1.2%  10051  0.0004  0.01 INSERT user_present_all_received_history
# MISC 0xMISC                              46.8082 13.1% 246015  0.0002   0.0 <158 ITEMS>

# Query 1: 23.10 QPS, 1.07x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 197219129
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.14
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1155
# Exec time     14     53s   159us   495ms    46ms   219ms    80ms     7ms
# Lock time      0     2ms       0   103us     1us     1us     3us     1us
# Rows sent      8  24.90k       0      71   22.08   36.69   10.30   22.53
# Rows examine   5 300.63k      47     693  266.54  652.75  231.27  124.25
# Query size     0 149.01k     126     138  132.11  136.99       6  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ###############################################################
#   1ms  ###############################################################
#  10ms  ################################################################
# 100ms  #######################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 4036854123 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 2: 508.10 QPS, 0.69x concurrency, ID 0x3FFFD39D9DB10329B174042FE1810238 at byte 212472835
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   25405
# Exec time      9     34s    64us    97ms     1ms     7ms     4ms   176us
# Lock time      0    31ms       0     1ms     1us     1us    12us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  24.81k       1       1       1       1       0       1
# Query size     2   2.26M      83      98   93.44   97.36    4.84   88.31
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ########
# 100us  ################################################################
#   1ms  ###############
#  10ms  ##
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661700640, updated_at=1661700640 WHERE id=3910515073855623784\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661700640, updated_at=1661700640 from user_presents where  id=3910515073855623784\G

# Query 3: 69.48 QPS, 0.55x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 160247287
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3474
# Exec time      7     27s     2ms   105ms     8ms    15ms     5ms     7ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  20.36k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ##################
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 4: 3.53k QPS, 0.53x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 201146695
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-19T15:29:52 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         32  180192
# Exec time      7     27s    16us    12ms   150us   515us   299us    66us
# Lock time      0    22us       0     3us       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     5   5.16M      30      30      30      30       0      30
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #######################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 5: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650770
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-19T15:29:52
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      6     22s     22s     22s     22s     22s       0     22s
# Lock time      0     3us     3us     3us     3us     3us       0     3us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 6: 267.68 QPS, 0.41x concurrency, ID 0xC20D9D224412E78025DDB691D46B02B6 at byte 212648878
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   13384
# Exec time      5     21s    66us   120ms     2ms     7ms     5ms   273us
# Lock time      0    23ms       0     2ms     1us     1us    29us     1us
# Rows sent      4  12.07k       0       1    0.92    0.99    0.26    0.99
# Rows examine   2 156.81k       0      14   12.00   13.83    3.67   13.83
# Query size     0 849.44k      61      73   64.99   72.65    3.26   62.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ##############
#  10ms  ##
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_items WHERE user_id=3488870528 AND item_id=18\G

# Query 7: 22.56 QPS, 0.40x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 212779764
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1128
# Exec time      5     20s     3ms   244ms    18ms    44ms    20ms    11ms
# Lock time     71      7s       0   222ms     6ms    28ms    16ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine  11 625.10k       1   1.10k  567.47   1.04k  319.53  563.87
# Query size     0 114.56k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  #########################################
#  10ms  ################################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661700640 WHERE token='10752dd7-cc27-4c87-9589-ae47fb055e23'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661700640 from user_one_time_tokens where  token='10752dd7-cc27-4c87-9589-ae47fb055e23'\G

# Query 8: 385.82 QPS, 0.37x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 212386428
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   19291
# Exec time      5     19s    48us    76ms   963us     5ms     3ms   131us
# Lock time      0    28ms       0     2ms     1us     1us    19us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     4   4.66M     243     272  253.08  258.32    6.65  246.02
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ############################
# 100us  ################################################################
#   1ms  ############
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (3910515073855624735, 4779920648, 1661700640, 3, 17, 1, '3周年ガチャの付与アイテムです', 1661700640, 1661700640)\G

# Query 9: 23.10 QPS, 0.26x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 212783257
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.06
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1155
# Exec time      3     13s   118us   329ms    11ms    59ms    26ms     2ms
# Lock time      0     3ms       0   934us     2us     1us    29us     1us
# Rows sent      0   1.13k       1       1       1       1       0       1
# Rows examine   4 275.73k      27     661  244.46  621.67  227.27  112.70
# Query size     0  98.26k      81      93   87.11   92.72       6   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##############################################################
#   1ms  ################################################################
#  10ms  ####################################
# 100ms  ###
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 7230385025 AND deleted_at IS NULL\G

# Query 10: 22.64 QPS, 0.22x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 160247725
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1132
# Exec time      3     11s     3ms   114ms    10ms    21ms     8ms     8ms
# Lock time     11      1s       0    49ms   984us     7ms     3ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 246.69k     217     229  223.15  223.14    5.10  212.52
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (3910515073855611744, 3457228186, 'a7404022-3ca6-47df-b9c0-8c221d29a39e', 1, 1661700623, 1661700623, 1661701223)\G

# Query 11: 4.60 QPS, 1.01x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 241562
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-19T15:29:14 to 2023-11-19T15:29:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      2     10s   183ms   356ms   220ms   279ms    37ms   198ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    43  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (1042148,9904038980,6,720,36,5336,1639932222,1639932222,NULL) /*... omitted ...*/\G

# Query 12: 19.78 QPS, 0.16x concurrency, ID 0xE3341326DCBBC41D81C9550FEAE6F248 at byte 192287532
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     989
# Exec time      2      8s   206us   106ms     8ms    48ms    16ms     1ms
# Lock time      0     2ms       0   346us     1us     1us    13us     1us
# Rows sent      6  17.13k       0      28   17.74   26.08   10.52   26.08
# Rows examine   0  17.13k       0      28   17.74   26.08   10.52   26.08
# Query size     0 192.68k     192     208  199.50  202.40    4.05  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #####################################################
#   1ms  ################################################################
#  10ms  ##########################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=6471688110 AND present_all_id IN (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29)\G

# Query 13: 14.92 QPS, 0.14x concurrency, ID 0x75C006C72A2DD00658309A1A758E1BB6 at byte 160249300
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     746
# Exec time      1      7s     3ms   102ms     9ms    19ms     6ms     7ms
# Lock time      0     1ms       0   223us     1us     1us     8us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0     746       1       1       1       1       0       1
# Query size     0  62.11k      82      87   85.25   84.10    1.13   84.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #############################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=819235344, last_getreward_at=1661700623 WHERE id=3856783795\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=819235344, last_getreward_at=1661700623 from users where  id=3856783795\G

# Query 14: 295.75 QPS, 0.12x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 208265722
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-19T15:29:52 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   15083
# Exec time      1      6s    30us    44ms   407us     2ms     1ms   103us
# Lock time      0    24ms       0     2ms     1us     1us    22us     1us
# Rows sent      5  14.73k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  14.73k       0       1    1.00    0.99    0.01    0.99
# Query size     0 636.19k      33      48   43.19   46.83    4.26   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##############################################################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=3962081486\G

# Query 15: 129.58 QPS, 0.12x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 208284964
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    6479
# Exec time      1      6s    73us    24ms   948us     3ms     1ms   541us
# Lock time      0    12ms       0   990us     1us     1us    17us     1us
# Rows sent      2   6.33k       0       1    1.00    0.99    0.01    0.99
# Rows examine  54   2.94M       4     967  475.01  918.49  275.62  463.90
# Query size     0 670.65k      81     106  106.00  102.22    0.27  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##
# 100us  ################################################################
#   1ms  ####################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='a7ca02df-4a03-498e-9d64-e4648e4ca1bc' AND deleted_at IS NULL\G

# Query 16: 78.35 QPS, 0.12x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 205932038
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-19T15:29:52 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3996
# Exec time      1      6s    89us    37ms     2ms     8ms     3ms   224us
# Lock time      0     8ms       0   719us     2us     1us    14us     1us
# Rows sent      1   3.90k       1       1       1       1       0       1
# Rows examine   0   3.91k       1       2    1.00    0.99    0.03    0.99
# Query size     0 310.95k      75      86   79.68   84.10    3.61   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###################
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=3576728071 AND platform_id='15103880'\G

# Query 17: 224.42 QPS, 0.11x concurrency, ID 0xD858CC1645CE084FE3844E34483B662E at byte 212564664
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   11221
# Exec time      1      6s    52us    43ms   512us     2ms     2ms   131us
# Lock time      0    21ms       0     2ms     1us     1us    33us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  10.96k       1       1       1       1       0       1
# Query size     0 636.41k      49      60   58.08   59.77    2.79   59.77
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #####################
# 100us  ################################################################
#   1ms  #######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=59500 WHERE id=3910515073855623046\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=59500 from users where  id=3910515073855623046\G

# Query 18: 251.18 QPS, 0.11x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 212856164
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   12559
# Exec time      1      6s    62us    58ms   454us     2ms     1ms   138us
# Lock time      0    17ms       0     1ms     1us     1us    14us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  12.26k       1       1       1       1       0       1
# Query size     0 925.57k      71      82   75.47   80.10    1.92   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############
# 100us  ################################################################
#   1ms  ######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=70, updated_at=1661700640 WHERE id=60000612105\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=70, updated_at=1661700640 from user_items where  id=60000612105\G

# Query 19: 76.36 QPS, 0.10x concurrency, ID 0x0B3509236B570F5C5FE423B079765901 at byte 154766334
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3818
# Exec time      1      5s    50us    42ms     1ms     7ms     3ms   159us
# Lock time      0     8ms       0     2ms     2us     1us    31us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 678.89k     176     194  182.08  183.58    4.03  174.84
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #######################
# 100us  ################################################################
#   1ms  #####################
#  10ms  ###
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO user_cards(id, user_id, card_id, amount_per_sec, level, total_exp, created_at, updated_at) VALUES (3910515073855610334, 6726818727, 13, 5000, 1, 0, 1661700621, 1661700621)\G

# Query 20: 201.02 QPS, 0.08x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 212691911
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-19T15:29:53 to 2023-11-19T15:30:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1   10051
# Exec time      1      4s    43us    59ms   410us     2ms     1ms   103us
# Lock time      0    15ms       0     1ms     1us     1us    22us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1   1.89M     190     201  197.22  192.76    4.49  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #######################################################
# 100us  ################################################################
#   1ms  ########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (3910515073855624771, 7788727447, 20, 1661700640, 1661700640, 1661700640)\G
