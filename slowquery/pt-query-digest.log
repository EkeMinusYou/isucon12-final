
# 16.7s user time, 130ms system time, 26.02M rss, 390.02G vsz
# Current date: Wed Nov 22 02:49:12 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 364.13k total, 181 unique, 3.11k QPS, 5.57x concurrency _______
# Time range: 2023-11-21T17:46:41 to 2023-11-21T17:48:38
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           652s     1us      9s     2ms     7ms    17ms   167us
# Lock time             3s       0   427ms     9us     1us   837us     1us
# Rows sent        701.30k       0    1012    1.97   13.83    6.27       0
# Rows examine      25.17M       0 235.97k   72.47  284.79  516.50    0.99
# Query size       116.07M       6 1008.95k  334.24  258.32  13.63k   84.10

# Profile
# Rank Query ID                            Response time  Calls  R/Call V/
# ==== =================================== ============== ====== ====== ==
#    1 0x8CA5C26DA1F53D285B58FE47352DA00A  122.4507 18.8%  18030 0.0068  0.02 SELECT user_sessions
#    2 0x03FFA53B9AEA23779E51FE7DD3DC165E   92.3923 14.2%  55073 0.0017  0.02 INSERT user_presents
#    3 0x611363ACBD1690538F137757E45B738C   59.3712  9.1%   3257 0.0182  0.04 SELECT user_presents
#    4 0x6E790EE92EFF4755B6E0FA83F9CA8363   58.6927  9.0%   3240 0.0181  0.05 UPDATE user_presents
#    5 0xF0F3320DE1260EAD27BC0426FCB34A4D   46.1323  7.1%   3257 0.0142  0.04 SELECT user_presents
#    6 0xE89B4FB5E77ED142BEAF8C3B369FA2FE   33.1127  5.1%   3240 0.0102  0.04 SELECT user_presents
#    7 0xED0711EB833D06BBD84F496A9784760B   17.4916  2.7%  28551 0.0006  0.01 UPDATE user_items
#    8 0x41CEDDDAFB6289B60E5F30D0462408DB   15.7518  2.4%  30053 0.0005  0.01 INSERT user_present_all_received_history
#    9 0x07D5CE9B533D56A3B70C17C590E82A7F   13.6798  2.1%  21221 0.0006  0.02 SELECT version_masters
#   10 0xBC551EACF5A3BE27E3F2CC3C5133F3D5   12.8153  2.0%  10047 0.0013  0.01 SELECT gacha_item_masters
#   11 0xFFFCA4D67EA0A788813031B8BBC3B329   12.6136  1.9%   9749 0.0013  0.01 COMMIT
#   12 0x2372FB123B18A108CFBB5352F61B370B   11.7885  1.8%  18430 0.0006  0.01 SELECT users
#   13 0xAB2AB35C6EFA17C04018A132A84A16C9   11.2664  1.7%  20450 0.0006  0.01 SELECT user_bans
#   14 0x584D7D428BA6602840353479CEB359A1   10.7433  1.6%  10844 0.0010  0.01 SELECT user_devices
#   15 0x2096778F723F6666B5D7DDC9D01010C7    9.7077  1.5%     46 0.2110  0.04 INSERT user_cards
#   16 0x79A889ED30BFA8BF517F86F6D70065B6    8.9914  1.4%      1 8.9914  0.00 LOAD DATA user_presents
#   17 0xE3341326DCBBC41D81C9550FEAE6F248    8.9296  1.4%   2605 0.0034  0.01 SELECT user_present_all_received_history
#   18 0x1049606E13674A053E0CC69500F839DC    8.1220  1.2%   3205 0.0025  0.02 UPDATE user_one_time_tokens
#   19 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A    6.6882  1.0%   3223 0.0021  0.02 INSERT user_one_time_tokens
#   20 0x0B3509236B570F5C5FE423B079765901    6.2258  1.0%  10282 0.0006  0.01 INSERT user_cards
# MISC 0xMISC                               84.7331 13.0% 109328 0.0008   0.0 <161 ITEMS>

# Query 1: 295.57 QPS, 2.01x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 184339958
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   18030
# Exec time     18    122s    91us   153ms     7ms    31ms    12ms     2ms
# Lock time      3   107ms       0    16ms     5us     1us   139us     1us
# Rows sent      2  17.61k       0       1    1.00    0.99    0.01    0.99
# Rows examine  87  22.09M       4   2.53k   1.25k   2.38k  740.74   1.20k
# Query size     1   1.82M      81     106  106.00  102.22    0.16  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ###############################################
#   1ms  ################################################################
#  10ms  ###########################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='2bb16c2a-6164-4704-98c6-edd55d74e2b0' AND deleted_at IS NULL\G

# Query 2: 902.84 QPS, 1.51x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 190190032
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         15   55073
# Exec time     14     92s    42us   170ms     2ms     8ms     6ms   119us
# Lock time      8   264ms       0    29ms     4us     1us   179us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    11  13.33M     242     272  253.81  258.32    6.85  246.02
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################################
# 100us  ################################################################
#   1ms  ################
#  10ms  #####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (5823738997582008910, 5823738997582008365, 1661708901, 1, 1, 2000, '１５ヶ月突破プレゼントです１', 1661708901, 1661708901)\G

# Query 3: 53.39 QPS, 0.97x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 163447515
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3257
# Exec time      9     59s   186us   207ms    18ms    78ms    28ms     5ms
# Lock time      0    29ms       0     6ms     9us     1us   151us     1us
# Rows sent      9  68.17k       0      67   21.43   36.69    9.83   22.53
# Rows examine   2 770.97k      47     696  242.39  652.75  230.63  124.25
# Query size     0 422.67k     126     138  132.89  136.99       6  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##############################################
#   1ms  #############################################################
#  10ms  ################################################################
# 100ms  #####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 2326624347 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 4: 53.11 QPS, 0.96x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 138445012
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3240
# Exec time      9     59s   103us   246ms    18ms    78ms    29ms     4ms
# Lock time      0    30ms       0    21ms     9us     1us   372us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  67.84k       1      67   21.44   36.69    9.82   22.53
# Query size     1   1.39M     103   1.04k  448.89  685.39  180.72  363.48
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ####################################
#   1ms  ################################################################
#  10ms  #########################################################
# 100ms  #####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661708875, updated_at=1661708875 WHERE id IN (638554502, 3505990093, 17051858567, 22042103734, 26013304377, 33201071802, 36091398947, 36241622571, 38567328449, 47131241822, 48376916685, 52695812745, 56404690323, 72595067250, 74292663851, 74926555164, 78638098093, 82586134341, 82841106330, 83002631113, 95348702085, 5823738997581958920)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661708875, updated_at=1661708875 from user_presents where  id IN (638554502, 3505990093, 17051858567, 22042103734, 26013304377, 33201071802, 36091398947, 36241622571, 38567328449, 47131241822, 48376916685, 52695812745, 56404690323, 72595067250, 74292663851, 74926555164, 78638098093, 82586134341, 82841106330, 83002631113, 95348702085, 5823738997581958920)\G

# Query 5: 53.39 QPS, 0.76x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 156910458
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3257
# Exec time      7     46s   152us   214ms    14ms    65ms    24ms     3ms
# Lock time      1    46ms       0    15ms    14us     1us   336us     1us
# Rows sent      0   3.18k       1       1       1       1       0       1
# Rows examine   2 702.80k      27     665  220.96  621.67  226.40  112.70
# Query size     0 279.54k      81      93   87.89   92.72       6   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ####################################################
#   1ms  ################################################################
#  10ms  #################################################
# 100ms  ###
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 5163482371 AND deleted_at IS NULL\G

# Query 6: 53.11 QPS, 0.54x concurrency, ID 0xE89B4FB5E77ED142BEAF8C3B369FA2FE at byte 190272724
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3240
# Exec time      5     33s   103us   229ms    10ms    51ms    19ms     1ms
# Lock time      0    13ms       0     2ms     4us     1us    59us     1us
# Rows sent      9  67.84k       1      67   21.44   36.69    9.82   22.53
# Rows examine   0  67.84k       1      67   21.44   36.69    9.82   22.53
# Query size     1   1.33M      84   1.02k  429.89  652.75  178.93  346.17
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #################################
#  10ms  ##################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents WHERE id IN (5823738997582006473, 5823738997582006533, 5823738997582006536, 5823738997582006538, 5823738997582006570, 5823738997582006607, 5823738997582006691, 5823738997582006720, 5823738997582006794, 5823738997582006848, 5823738997582006866, 5823738997582006878, 5823738997582006880, 5823738997582006883, 5823738997582006886, 67907308798, 10001320133, 57888873107, 30385900261, 70090064648, 16026007298, 52309385240, 70802286255, 73260344809, 8024299185, 59933367826, 12369524351, 73269806743, 84322901969, 49059361315, 74931214135, 9876393917, 25852107218, 46115850067, 27344895258, 1736575209, 610338916, 38994583216) AND deleted_at IS NULL\G

# Query 7: 468.05 QPS, 0.29x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 187599206
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   28551
# Exec time      2     17s    52us    60ms   612us     2ms     2ms   125us
# Lock time      3   131ms       0    18ms     4us     1us   146us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  27.88k       1       1       1       1       0       1
# Query size     1   2.05M      70      82   75.16   72.65    1.17   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##############################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=95, updated_at=1661708900 WHERE id=62653437725\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=95, updated_at=1661708900 from user_items where  id=62653437725\G

# Query 8: 492.67 QPS, 0.26x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 134600530
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   30053
# Exec time      2     16s    39us    59ms   524us     2ms     2ms    98us
# Lock time      2    72ms       0     4ms     2us     1us    49us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     4   5.67M     189     201  197.88  192.76    4.28  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #######################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (5823738997581956257, 5823738997581955960, 7, 1661708873, 1661708873, 1661708873)\G

# Query 9: 347.89 QPS, 0.22x concurrency, ID 0x07D5CE9B533D56A3B70C17C590E82A7F at byte 95455615
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   21221
# Exec time      2     14s    55us   167ms   644us     2ms     3ms   138us
# Lock time      5   172ms       0    20ms     8us     1us   224us     1us
# Rows sent      2  20.72k       1       1       1       1       0       1
# Rows examine   0  34.62k       1       2    1.67    1.96    0.46    1.96
# Query size     0 911.84k      44      44      44      44       0      44
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ########################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'version_masters'\G
#    SHOW CREATE TABLE `isucon`.`version_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM version_masters WHERE status=1\G

# Query 10: 164.70 QPS, 0.21x concurrency, ID 0xBC551EACF5A3BE27E3F2CC3C5133F3D5 at byte 172611239
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   10047
# Exec time      1     13s   115us    83ms     1ms     5ms     3ms   348us
# Lock time      4   158ms       0    35ms    15us     1us   533us     1us
# Rows sent     39 279.62k      27      29   28.50   28.75       1   28.75
# Rows examine   2 559.24k      54      58   57.00   56.92       2   56.92
# Query size     0 652.45k      66      68   66.50   65.89       0   65.89
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ##################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'gacha_item_masters'\G
#    SHOW CREATE TABLE `isucon`.`gacha_item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM gacha_item_masters WHERE gacha_id=40 ORDER BY id ASC\G

# Query 11: 159.82 QPS, 0.21x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 171957614
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9749
# Exec time      1     13s    34us    97ms     1ms     5ms     4ms   224us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  57.12k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###################################################
# 100us  ################################################################
#   1ms  #######################
#  10ms  ####
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 12: 302.13 QPS, 0.19x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 169445217
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   18430
# Exec time      1     12s    58us    61ms   639us     2ms     2ms   138us
# Lock time      3   107ms       0     9ms     5us     1us   112us     1us
# Rows sent      2  18.00k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  18.00k       0       1    1.00    0.99    0.01    0.99
# Query size     0 757.88k      33      48   42.11   46.83    4.09   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=3844338677\G

# Query 13: 335.25 QPS, 0.18x concurrency, ID 0xAB2AB35C6EFA17C04018A132A84A16C9 at byte 189630610
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   20450
# Exec time      1     11s    54us    65ms   550us     2ms     2ms   125us
# Lock time      3   130ms       0    18ms     6us     1us   151us     1us
# Rows sent      0     554       0       1    0.03       0    0.16       0
# Rows examine   0     554       0       1    0.03       0    0.16       0
# Query size     0 1019.57k      45      57   51.05   56.92    4.82   46.83
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #######################################
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_bans'\G
#    SHOW CREATE TABLE `isucon`.`user_bans`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_bans WHERE user_id=5823738997582006749\G

# Query 14: 177.77 QPS, 0.18x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 149930877
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   10844
# Exec time      1     11s   106us    75ms   990us     4ms     3ms   224us
# Lock time      2    88ms       0    15ms     8us     1us   178us     1us
# Rows sent      1  10.59k       1       1       1       1       0       1
# Rows examine   0  10.59k       1       1       1       1       0       1
# Query size     0 850.23k      74      86   80.29   84.10    3.86   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=6995466704 AND platform_id='9678184'\G

# Query 15: 4.60 QPS, 0.97x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 40451160
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-21T17:46:58 to 2023-11-21T17:47:08
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      1     10s   147ms   674ms   211ms   293ms    90ms   180ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    38  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (84884607225,6443797960,2,35,35,4829,1625457760,1625457760,NULL) /*... omitted ...*/\G

# Query 16: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76655916
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-21T17:47:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      1      9s      9s      9s      9s      9s       0      9s
# Lock time      0     3us     3us     3us     3us     3us       0     3us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s  ################################################################
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 17: 42.70 QPS, 0.15x concurrency, ID 0xE3341326DCBBC41D81C9550FEAE6F248 at byte 184216797
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2605
# Exec time      1      9s   232us   101ms     3ms    15ms     7ms   839us
# Lock time      0    11ms       0     3ms     4us     1us    80us     1us
# Rows sent      5  41.64k       0      29   16.37   26.08   11.10   13.83
# Rows examine   1 277.60k       0 235.97k  109.12   26.08   4.57k   13.83
# Query size     0 509.21k     193     208  200.17  202.40    4.34  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #############################################
#  10ms  ###########
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=7048564977 AND present_all_id IN (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29)\G

# Query 18: 52.54 QPS, 0.13x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 190062838
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3205
# Exec time      1      8s   141us    82ms     3ms    11ms     7ms   403us
# Lock time      1    39ms       0    15ms    12us     1us   295us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0   3.13k       1       1       1       1       0       1
# Query size     0 325.51k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ##########################
#  10ms  #####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661708901 WHERE token='b1d8fadb-d133-4cb7-be23-6faab0b37f94'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661708901 from user_one_time_tokens where  token='b1d8fadb-d133-4cb7-be23-6faab0b37f94'\G

# Query 19: 52.84 QPS, 0.11x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 181755776
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3223
# Exec time      1      7s    89us    90ms     2ms     9ms     6ms   403us
# Lock time      0    31ms       0    11ms     9us     1us   240us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 704.74k     217     229  223.91  223.14    5.28  212.52
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ######################
#  10ms  ####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (5823738997582000762, 8506564658, '03b8c382-8bd6-4a56-8d2a-785b505d9930', 1, 1661708897, 1661708897, 1661709497)\G

# Query 20: 168.56 QPS, 0.10x concurrency, ID 0x0B3509236B570F5C5FE423B079765901 at byte 126790811
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:47:24 to 2023-11-21T17:48:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   10282
# Exec time      0      6s    45us    59ms   605us     2ms     2ms   125us
# Lock time      0    32ms       0     5ms     3us     1us    66us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1   1.79M     176     194  182.72  183.58    4.30  174.84
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##############################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO user_cards(id, user_id, card_id, amount_per_sec, level, total_exp, created_at, updated_at) VALUES (5823738997581949023, 5178796655, 8, 100, 1, 0, 1661708869, 1661708869)\G
