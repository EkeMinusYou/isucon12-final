
# 12.7s user time, 80ms system time, 62.03M rss, 390.11G vsz
# Current date: Thu Nov 23 20:21:15 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 300.52k total, 179 unique, 3.10k QPS, 4.66x concurrency _______
# Time range: 2023-11-23T11:18:51 to 2023-11-23T11:20:28
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           452s     1us     16s     2ms     5ms    30ms   204us
# Lock time             3s       0   213ms     9us     1us   686us     1us
# Rows sent        808.70k       0    1012    2.76   26.08    7.42    0.99
# Rows examine       1.91M       0    1012    6.66   46.83   14.57    0.99
# Query size       112.85M       6 1008.95k  393.76  487.09  15.01k   69.19

# Profile
# Rank Query ID                            Response time Calls  R/Call  V/
# ==== =================================== ============= ====== ======= ==
#    1 0x6E790EE92EFF4755B6E0FA83F9CA8363  79.8254 17.7%   4017  0.0199  0.05 UPDATE user_presents
#    2 0x03FFA53B9AEA23779E51FE7DD3DC165E  35.7454  7.9%   5850  0.0061  0.02 INSERT user_presents
#    3 0x611363ACBD1690538F137757E45B738C  27.4220  6.1%   4039  0.0068  0.01 SELECT user_presents
#    4 0xFFFCA4D67EA0A788813031B8BBC3B329  20.6370  4.6%  12058  0.0017  0.01 COMMIT
#    5 0xE89B4FB5E77ED142BEAF8C3B369FA2FE  19.5934  4.3%   4017  0.0049  0.02 SELECT user_presents
#    6 0x8CA5C26DA1F53D285B58FE47352DA00A  19.2373  4.3%  22280  0.0009  0.01 SELECT user_sessions
#    7 0x2372FB123B18A108CFBB5352F61B370B  18.8611  4.2%  22625  0.0008  0.01 SELECT users
#    8 0x79A889ED30BFA8BF517F86F6D70065B6  16.3973  3.6%      1 16.3973  0.00 LOAD DATA user_presents
#    9 0x07D5CE9B533D56A3B70C17C590E82A7F  15.6173  3.5%  26108  0.0006  0.01 SELECT version_masters
#   10 0xBC551EACF5A3BE27E3F2CC3C5133F3D5  13.9028  3.1%  12368  0.0011  0.01 SELECT gacha_item_masters
#   11 0xAB2AB35C6EFA17C04018A132A84A16C9  12.9204  2.9%  25124  0.0005  0.00 SELECT user_bans
#   12 0x584D7D428BA6602840353479CEB359A1  12.0219  2.7%  13341  0.0009  0.01 SELECT user_devices
#   13 0x2096778F723F6666B5D7DDC9D01010C7  10.4987  2.3%     46  0.2282  0.05 INSERT user_cards
#   14 0x1049606E13674A053E0CC69500F839DC   9.1776  2.0%   3967  0.0023  0.01 UPDATE user_one_time_tokens
#   15 0xD858CC1645CE084FE3844E34483B662E   7.9952  1.8%  10294  0.0008  0.01 UPDATE users
#   16 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A   7.9459  1.8%   3987  0.0020  0.01 INSERT user_one_time_tokens
#   17 0x6DBD0D1D3EC3BC206B6AD54E826B3141   7.8207  1.7%   3089  0.0025  0.01 INSERT UPDATE user_items
#   18 0xE63C5805E48DA98A0AD3A20E4E0B9976   7.2605  1.6%   9606  0.0008  0.01 SELECT user_login_bonuses
#   19 0x4AB397782791D7238C5B05EB6CB46F22   6.9317  1.5%   3195  0.0022  0.02 SELECT users
#   20 0x0B3509236B570F5C5FE423B079765901   6.3591  1.4%   5818  0.0011  0.01 INSERT user_cards
# MISC 0xMISC                              95.4670 21.1% 108690  0.0009   0.0 <159 ITEMS>

# Query 1: 65.85 QPS, 1.31x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 124410583
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    4017
# Exec time     17     80s   185us   387ms    20ms    78ms    30ms     7ms
# Lock time      1    29ms       0    17ms     7us     1us   262us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   5 104.19k       1      70   26.56   46.83   11.84   27.38
# Query size     1   1.55M      93     972  405.28  652.75  147.84  400.73
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ############
#   1ms  ################################################################
#  10ms  #####################################################
# 100ms  ####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661685597, updated_at=1661685597 WHERE id IN (131905300, 313763980, 385858695, 415141611, 473426687, 703347334, 732079640, 823052616, 975804246, 1035780342, 1231483055, 1374466116, 1534333497, 1583420314, 1881873113, 2295002658, 2361483674, 2414151204, 2505341076, 2604323595, 2640968989, 3153119380, 3270289280, 3343743365, 4064945976, 4225326405, 4263495075, 14928464605, 17158471598, 18130238547, 18473038413, 20342611748, 26266487872, 26886246485, 34361531249, 42448009283, 43365430449, 45359258106, 45822986134, 48385590903, 52797973824, 63005688977, 69055891833, 74503330349, 88123461257, 93925001734, 95363302835)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661685597, updated_at=1661685597 from user_presents where  id IN (131905300, 313763980, 385858695, 415141611, 473426687, 703347334, 732079640, 823052616, 975804246, 1035780342, 1231483055, 1374466116, 1534333497, 1583420314, 1881873113, 2295002658, 2361483674, 2414151204, 2505341076, 2604323595, 2640968989, 3153119380, 3270289280, 3343743365, 4064945976, 4225326405, 4263495075, 14928464605, 17158471598, 18130238547, 18473038413, 20342611748, 26266487872, 26886246485, 34361531249, 42448009283, 43365430449, 45359258106, 45822986134, 48385590903, 52797973824, 63005688977, 69055891833, 74503330349, 88123461257, 93925001734, 95363302835)\G

# Query 2: 95.90 QPS, 0.59x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 158652829
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    5850
# Exec time      7     36s    90us   181ms     6ms    26ms    11ms     2ms
# Lock time      0    25ms       0     6ms     4us     1us    98us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     7   8.35M     234   3.32k   1.46k   3.19k  915.27   1.26k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ##################################
#   1ms  ################################################################
#  10ms  ##################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (2886405522, 6980432517, 1661685616, 4, 28, 1, '3周年ガチャの付与アイテムです', 1661685616, 1661685616),(3754983913, 6980432517, 1661685616, 4, 21, 1, '3周年ガチャの付与アイテムです', 1661685616, 1661685616),(2927972828, 6980432517, 1661685616, 2, 6, 1, '3周年ガチャの付与アイテムです', 1661685616, 1661685616),(4285117953, 6980432517, 1661685616, 2, 5, 1, '3周年ガチャの付与アイテムです', 1661685616, 1661685616),(2585800068, 6980432517, 1661685616, 3, 18, 1, '3周年ガチャの付与アイテムです', 1661685616, 1661685616),(1689718875, 6980432517, 1661685616, 3, 20, 1, '3周年ガチャの付与アイテムです', 1661685616, 1661685616),(70719778, 6980432517, 1661685616, 3, 17, 1, '3周年ガチャの付与アイテムです', 1661685616, 1661685616),(2488384060, 6980432517, 1661685616, 4, 21, 1, '3周年ガチャの付与アイテムです', 1661685616, 1661685616),(3266601974, 6980432517, 1661685616, 2, 2, 1, '3周年ガチャの付与アイテムです', 1661685616, 1661685616),(2127995262, 6980432517, 1661685616, 4, 21, 1, '3周年ガチャの付与アイテムです', 1661685616, 1661685616)\G

# Query 3: 66.21 QPS, 0.45x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 130092101
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    4039
# Exec time      6     27s   164us   126ms     7ms    26ms    10ms     3ms
# Lock time      0    19ms       0     2ms     4us     1us    52us     1us
# Rows sent     12 104.62k       0      70   26.53   46.83   11.87   27.38
# Rows examine   5 104.62k       0      70   26.53   46.83   11.87   27.38
# Query size     0 508.15k     126     129  128.83  124.25       0  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #########################
#   1ms  ################################################################
#  10ms  ######################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 999746385 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 4: 197.67 QPS, 0.34x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 124255876
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   12058
# Exec time      4     21s    29us   133ms     2ms     8ms     5ms   316us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  70.65k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #################################
# 100us  ################################################################
#   1ms  ############################
#  10ms  #####
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 5: 65.85 QPS, 0.32x concurrency, ID 0xE89B4FB5E77ED142BEAF8C3B369FA2FE at byte 124347906
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    4017
# Exec time      4     20s    99us   142ms     5ms    24ms    10ms   972us
# Lock time      1    44ms       0    15ms    10us     1us   267us     1us
# Rows sent     12 104.19k       1      70   26.56   46.83   11.84   27.38
# Rows examine   5 104.19k       1      70   26.56   46.83   11.84   27.38
# Query size     1   1.48M      74     953  386.28  621.67  147.99  381.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #############################################
#  10ms  ##################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents WHERE id IN (49834995, 587037066, 1233093062, 1388765844, 2683789162, 3151910952, 3291177201, 3304285831, 3723788912, 3973276812) AND deleted_at IS NULL\G

# Query 6: 365.25 QPS, 0.32x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 168872550
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   22280
# Exec time      4     19s    93us    95ms   863us     3ms     2ms   224us
# Lock time      5   163ms       0    15ms     7us     1us   186us     1us
# Rows sent      2  21.76k       0       1    1.00    0.99    0.01    0.99
# Rows examine   1  21.76k       0       1    1.00    0.99    0.01    0.99
# Query size     1   2.25M      81     106  106.00  102.22    0.15  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='fbc3a509-a8bb-4e20-a241-2cba1833d6e0' AND deleted_at IS NULL\G

# Query 7: 370.90 QPS, 0.31x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 125993041
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   22625
# Exec time      4     19s    50us    81ms   833us     3ms     3ms   144us
# Lock time      4   133ms       0     9ms     5us     1us   114us     1us
# Rows sent      2  22.09k       0       1    1.00    0.99    0.01    0.99
# Rows examine   1  22.09k       0       1    1.00    0.99    0.01    0.99
# Query size     0 858.17k      33      39   38.84   38.53    0.65   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ############################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=9186071752\G

# Query 8: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650857
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-23T11:19:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      3     16s     16s     16s     16s     16s       0     16s
# Lock time      0     3us     3us     3us     3us     3us       0     3us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 9: 435.13 QPS, 0.26x concurrency, ID 0x07D5CE9B533D56A3B70C17C590E82A7F at byte 87837250
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   26108
# Exec time      3     16s    48us   128ms   598us     2ms     3ms   144us
# Lock time      4   133ms       0    16ms     5us     1us   124us     1us
# Rows sent      3  25.50k       1       1       1       1       0       1
# Rows examine   2  43.74k       1       2    1.72    1.96    0.44    1.96
# Query size     0   1.10M      44      44      44      44       0      44
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ########################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'version_masters'\G
#    SHOW CREATE TABLE `isucon`.`version_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM version_masters WHERE status=1\G

# Query 10: 202.75 QPS, 0.23x concurrency, ID 0xBC551EACF5A3BE27E3F2CC3C5133F3D5 at byte 138619714
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   12368
# Exec time      3     14s   118us    89ms     1ms     4ms     3ms   366us
# Lock time      2    84ms       0     4ms     6us     1us    99us     1us
# Rows sent     42 344.22k      27      29   28.50   28.75       1   28.75
# Rows examine  35 688.44k      54      58   57.00   56.92       2   56.92
# Query size     0 803.18k      66      68   66.50   65.89       0   65.89
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ##################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'gacha_item_masters'\G
#    SHOW CREATE TABLE `isucon`.`gacha_item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM gacha_item_masters WHERE gacha_id='37' ORDER BY id ASC\G

# Query 11: 411.87 QPS, 0.21x concurrency, ID 0xAB2AB35C6EFA17C04018A132A84A16C9 at byte 138606066
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   25124
# Exec time      2     13s    44us    62ms   514us     2ms     2ms   125us
# Lock time      4   141ms       0     8ms     5us     1us   101us     1us
# Rows sent      0     590       0       1    0.02       0    0.15       0
# Rows examine   0     590       0       1    0.02       0    0.15       0
# Query size     1   1.15M      45      48   47.84   46.83    0.26   46.83
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ########################################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_bans'\G
#    SHOW CREATE TABLE `isucon`.`user_bans`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_bans WHERE user_id=2622551255\G

# Query 12: 218.70 QPS, 0.20x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 125995393
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   13341
# Exec time      2     12s    99us    81ms   901us     4ms     2ms   236us
# Lock time      2    86ms       0     6ms     6us     1us   100us     1us
# Rows sent      1  13.03k       1       1       1       1       0       1
# Rows examine   0  13.03k       1       2    1.00    0.99    0.02    0.99
# Query size     0 1006.74k      74      78   77.27   76.28    1.18   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=5537786069 AND platform_id='29761375'\G

# Query 13: 4.60 QPS, 1.05x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 40446109
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-23T11:18:54 to 2023-11-23T11:19:04
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      2     10s   145ms   533ms   228ms   433ms   106ms   171ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    40  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (84884607225,6443797960,2,35,35,4829,1625457760,1625457760,NULL) /*... omitted ...*/\G

# Query 14: 65.03 QPS, 0.15x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 125804973
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3967
# Exec time      2      9s   139us    74ms     2ms    10ms     5ms   596us
# Lock time      0    27ms       0    10ms     6us     1us   165us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0   3.87k       1       1       1       1       0       1
# Query size     0 402.90k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #################################
#  10ms  #####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661685598 WHERE token='f2320817-117d-4243-81ef-f821831f28e2'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661685598 from user_one_time_tokens where  token='f2320817-117d-4243-81ef-f821831f28e2'\G

# Query 15: 168.75 QPS, 0.13x concurrency, ID 0xD858CC1645CE084FE3844E34483B662E at byte 178617413
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   10294
# Exec time      1      8s    57us    73ms   776us     3ms     2ms   159us
# Lock time      2    66ms       0    11ms     6us     1us   152us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  10.05k       1       1       1       1       0       1
# Query size     0 525.51k      47      57   52.28   54.21    2.92   49.17
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=6500 WHERE id=846904666\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=6500 from users where  id=846904666\G

# Query 16: 65.36 QPS, 0.13x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 176117386
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3987
# Exec time      1      8s    94us    67ms     2ms     9ms     5ms   515us
# Lock time      1    32ms       0     9ms     7us     1us   167us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 819.88k     206     211  210.57  202.40       0  202.40
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###########################
#  10ms  ####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (2583283697, 2636419862, 'f6575f39-0a7d-4594-ab3d-e1359eaa50ad', 1, 1661685626, 1661685626, 1661686226)\G

# Query 17: 50.64 QPS, 0.13x concurrency, ID 0x6DBD0D1D3EC3BC206B6AD54E826B3141 at byte 131277721
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3089
# Exec time      1      8s   115us    76ms     3ms    11ms     5ms   761us
# Lock time      0    10ms       0     3ms     3us     1us    59us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     3   3.80M     351   2.70k   1.26k   1.86k  483.49   1.20k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ############################################
#  10ms  ######
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
INSERT INTO user_items (id, user_id, item_id, item_type, amount, created_at, updated_at) VALUES (492689755, 1132335919, 21, 4, 86, 1568535241, 1661685601), (492689755, 1132335919, 21, 4, 86, 1568535241, 1661685601), (37777099582, 1132335919, 22, 4, 26, 1568535241, 1661685601), (12664424118, 1132335919, 23, 4, 25, 1568535241, 1661685601), (37777099582, 1132335919, 22, 4, 26, 1568535241, 1661685601), (41955457649, 1132335919, 19, 3, 48, 1568535241, 1661685601), (75791821370, 1132335919, 17, 3, 193, 1568535241, 1661685601), (75791821370, 1132335919, 17, 3, 193, 1568535241, 1661685601), (41955457649, 1132335919, 19, 3, 48, 1568535241, 1661685601), (492689755, 1132335919, 21, 4, 86, 1568535241, 1661685601), (492689755, 1132335919, 21, 4, 86, 1568535241, 1661685601), (492689755, 1132335919, 21, 4, 86, 1568535241, 1661685601), (492689755, 1132335919, 21, 4, 86, 1568535241, 1661685601), (492689755, 1132335919, 21, 4, 86, 1568535241, 1661685601), (75791821370, 1132335919, 17, 3, 193, 1568535241, 1661685601), (37777099582, 1132335919, 22, 4, 26, 1568535241, 1661685601), (12664424118, 1132335919, 23, 4, 25, 1568535241, 1661685601), (66038185691, 1132335919, 24, 4, 13, 1568535241, 1661685601), (75791821370, 1132335919, 17, 3, 193, 1568535241, 1661685601), (75791821370, 1132335919, 17, 3, 193, 1568535241, 1661685601), (75791821370, 1132335919, 17, 3, 193, 1568535241, 1661685601), (75791821370, 1132335919, 17, 3, 193, 1568535241, 1661685601), (75791821370, 1132335919, 17, 3, 193, 1568535241, 1661685601), (82166868379, 1132335919, 18, 3, 58, 1568535241, 1661685601), (75791821370, 1132335919, 17, 3, 193, 1568535241, 1661685601) ON DUPLICATE KEY UPDATE amount = VALUES(amount), updated_at = VALUES(updated_at)\G

# Query 18: 157.48 QPS, 0.12x concurrency, ID 0xE63C5805E48DA98A0AD3A20E4E0B9976 at byte 132894946
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3    9606
# Exec time      1      7s    80us    48ms   755us     3ms     2ms   194us
# Lock time      1    39ms       0     4ms     4us     1us    76us     1us
# Rows sent      0   6.60k       0       1    0.70    0.99    0.45    0.99
# Rows examine   0   6.60k       0       1    0.70    0.99    0.45    0.99
# Query size     0 730.28k      75      78   77.85   76.28    0.44   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_login_bonuses'\G
#    SHOW CREATE TABLE `isucon`.`user_login_bonuses`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_login_bonuses WHERE user_id=9707185826 AND login_bonus_id=4\G

# Query 19: 52.38 QPS, 0.11x concurrency, ID 0x4AB397782791D7238C5B05EB6CB46F22 at byte 124313235
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3195
# Exec time      1      7s    45us    85ms     2ms    12ms     6ms   167us
# Lock time      0    16ms       0     2ms     4us     1us    62us     1us
# Rows sent      0   3.12k       1       1       1       1       0       1
# Rows examine   0   3.12k       1       1       1       1       0       1
# Query size     0 143.05k      43      46   45.85   44.60    0.26   44.60
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###################################
# 100us  ################################################################
#   1ms  #######################
#  10ms  ########
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT isu_coin FROM users WHERE id=723385807\G

# Query 20: 95.38 QPS, 0.10x concurrency, ID 0x0B3509236B570F5C5FE423B079765901 at byte 125763532
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T11:19:27 to 2023-11-23T11:20:28
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    5818
# Exec time      1      6s    48us    87ms     1ms     4ms     4ms   224us
# Lock time      0    25ms       0     5ms     4us     1us    92us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1   1.57M     166     966  283.24  592.07  154.47  166.51
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################
# 100us  ################################################################
#   1ms  #################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO user_cards(id, user_id, card_id, amount_per_sec, level, total_exp, created_at, updated_at) VALUES (1561510756, 5568688278, 3, 2, 1, 0, 1661685598, 1661685598),(2207444640, 5568688278, 11, 500, 1, 0, 1661685598, 1661685598),(3817920711, 5568688278, 5, 10, 1, 0, 1661685598, 1661685598),(1175562377, 5568688278, 7, 50, 1, 0, 1661685598, 1661685598),(1010176494, 5568688278, 7, 50, 1, 0, 1661685598, 1661685598)\G
