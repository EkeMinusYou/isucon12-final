
# 23.1s user time, 110ms system time, 57.09M rss, 389.99G vsz
# Current date: Tue Nov 21 03:36:25 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 623.05k total, 180 unique, 6.11k QPS, 5.26x concurrency _______
# Time range: 2023-11-20T18:33:45 to 2023-11-20T18:35:27
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           537s     1us     23s   861us     2ms    30ms    63us
# Lock time            25s       0   602ms    40us     1us     2ms       0
# Rows sent        358.56k       0    1012    0.59    0.99    3.57       0
# Rows examine       8.51M       0   2.67k   14.32   13.83  100.53       0
# Query size       107.42M       6 1008.95k  180.78  192.76  10.42k   31.70

# Profile
# Rank Query ID                            Response time  Calls  R/Call  V
# ==== =================================== ============== ====== ======= =
#    1 0x611363ACBD1690538F137757E45B738C  102.6156 19.1%   1484  0.0691  0.18 SELECT user_presents
#    2 0xFFFCA4D67EA0A788813031B8BBC3B329   41.1272  7.7%   4412  0.0093  0.00 COMMIT
#    3 0x1049606E13674A053E0CC69500F839DC   38.6114  7.2%   1432  0.0270  0.04 UPDATE user_one_time_tokens
#    4 0xF0F3320DE1260EAD27BC0426FCB34A4D   33.0156  6.2%   1484  0.0222  0.12 SELECT user_presents
#    5 0x03FFA53B9AEA23779E51FE7DD3DC165E   32.4837  6.1%  24369  0.0013  0.01 INSERT user_presents
#    6 0x3FFFD39D9DB10329B174042FE1810238   31.1949  5.8%  16271  0.0019  0.01 UPDATE user_presents
#    7 0xDA556F9115773A1A99AA0165670CE848   30.7085  5.7% 200322  0.0002  0.00 ADMIN PREPARE
#    8 0xC20D9D224412E78025DDB691D46B02B6   25.7896  4.8%  17314  0.0015  0.01 SELECT user_items
#    9 0x79A889ED30BFA8BF517F86F6D70065B6   22.6983  4.2%      1 22.6983  0.00 LOAD DATA user_presents
#   10 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A   16.4162  3.1%   1447  0.0113  0.00 INSERT user_one_time_tokens
#   11 0x584D7D428BA6602840353479CEB359A1   10.6369  2.0%   5158  0.0021  0.01 SELECT user_devices
#   12 0x2096778F723F6666B5D7DDC9D01010C7   10.3975  1.9%     46  0.2260  0.01 INSERT user_cards
#   13 0x75C006C72A2DD00658309A1A758E1BB6   10.3961  1.9%   1002  0.0104  0.00 UPDATE users
#   14 0xE3341326DCBBC41D81C9550FEAE6F248   10.0508  1.9%   1274  0.0079  0.03 SELECT user_present_all_received_history
#   15 0x8CA5C26DA1F53D285B58FE47352DA00A    9.6064  1.8%   8334  0.0012  0.00 SELECT user_sessions
#   16 0x2372FB123B18A108CFBB5352F61B370B    9.1985  1.7%  19402  0.0005  0.00 SELECT users
#   17 0xED0711EB833D06BBD84F496A9784760B    8.6867  1.6%  16387  0.0005  0.00 UPDATE user_items
#   18 0x41CEDDDAFB6289B60E5F30D0462408DB    7.8778  1.5%  12339  0.0006  0.01 INSERT user_present_all_received_history
#   19 0x6E790EE92EFF4755B6E0FA83F9CA8363    7.6011  1.4%   1215  0.0063  0.03 UPDATE user_presents
#   20 0xD858CC1645CE084FE3844E34483B662E    7.5792  1.4%  14308  0.0005  0.00 UPDATE users
# MISC 0xMISC                               69.8108 13.0% 275052  0.0003   0.0 <160 ITEMS>

# Query 1: 24.73 QPS, 1.71x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 227126697
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.18
# Time range: 2023-11-20T18:34:27 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1484
# Exec time     19    103s   143us   954ms    69ms   308ms   113ms    12ms
# Lock time      0     2ms       0    81us     1us     1us     3us     1us
# Rows sent      8  32.14k       0      65   22.18   36.69   10.01   22.53
# Rows examine   4 409.08k      47     700  282.28  652.75  236.41  130.47
# Query size     0 191.10k     126     138  131.87  136.99    5.97  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #############################################
#   1ms  ####################################################
#  10ms  ################################################################
# 100ms  ###################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 4905011565 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 2: 72.33 QPS, 0.67x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 177968163
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:34:26 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4412
# Exec time      7     41s     3ms   104ms     9ms    18ms     6ms     8ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  25.85k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #################################
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 3: 23.87 QPS, 0.64x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 227514470
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-20T18:34:27 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1432
# Exec time      7     39s     3ms   218ms    27ms    87ms    32ms    16ms
# Lock time     76     19s       0   207ms    13ms    68ms    30ms   761us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine  11 1006.33k       1   1.41k  719.61   1.33k  406.02  685.39
# Query size     0 145.44k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  #########################
#  10ms  ################################################################
# 100ms  ####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661711723 WHERE token='ffae0c41-c1d1-42b3-abb2-cafbff31cc19'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661711723 from user_one_time_tokens where  token='ffae0c41-c1d1-42b3-abb2-cafbff31cc19'\G

# Query 4: 24.73 QPS, 0.55x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 221341481
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.12
# Time range: 2023-11-20T18:34:27 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1484
# Exec time      6     33s   113us   502ms    22ms   122ms    51ms     3ms
# Lock time      0     4ms       0   411us     2us     1us    17us     1us
# Rows sent      0   1.45k       1       1       1       1       0       1
# Rows examine   4 376.94k      27     665  260.10  621.67  231.92  118.34
# Query size     0 125.89k      81      93   86.87   92.72    5.92   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #######################################################
#   1ms  ################################################################
#  10ms  ########################################
# 100ms  #############
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 909487854 AND deleted_at IS NULL\G

# Query 5: 399.49 QPS, 0.53x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 179265471
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:34:26 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   24369
# Exec time      6     32s    47us    81ms     1ms     7ms     4ms   138us
# Lock time      0    37ms       0     2ms     1us     1us    24us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     5   5.87M     243     272  252.78  258.32    6.51  246.02
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############################
# 100us  ################################################################
#   1ms  ################
#  10ms  ###
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (2748305216631879689, 2748305216631878315, 1661711706, 2, 6, 1, '3周年ガチャの付与アイテムです', 1661711706, 1661711706)\G

# Query 6: 271.18 QPS, 0.52x concurrency, ID 0x3FFFD39D9DB10329B174042FE1810238 at byte 146368021
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:34:27 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   16271
# Exec time      5     31s    67us    83ms     2ms    10ms     5ms   194us
# Lock time      0    22ms       0   790us     1us     1us    12us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  15.89k       1       1       1       1       0       1
# Query size     1   1.49M      83      98   96.15   97.36    3.91   97.36
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########
# 100us  ################################################################
#   1ms  #################
#  10ms  #####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661711694, updated_at=1661711694 WHERE id=2748305216631870112\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661711694, updated_at=1661711694 from user_presents where  id=2748305216631870112\G

# Query 7: 3.28k QPS, 0.50x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 189228384
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:34:26 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         32  200322
# Exec time      5     31s    17us    15ms   153us   541us   317us    66us
# Lock time      0    22us       0     4us       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     5   5.73M      30      30      30      30       0      30
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #######################
#   1ms  ##
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 8: 283.84 QPS, 0.42x concurrency, ID 0xC20D9D224412E78025DDB691D46B02B6 at byte 178049827
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:34:26 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   17314
# Exec time      4     26s    69us    76ms     1ms     7ms     4ms   260us
# Lock time      0    24ms       0     2ms     1us     1us    18us     1us
# Rows sent      4  15.78k       0       1    0.93    0.99    0.25    0.99
# Rows examine   2 206.25k       0      14   12.20   13.83    3.46   13.83
# Query size     0   1.07M      61      73   64.86   72.65    3.05   62.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##
# 100us  ################################################################
#   1ms  ############
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_items WHERE user_id=571321859 AND item_id=18\G

# Query 9: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650768
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-20T18:34:26
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      4     23s     23s     23s     23s     23s       0     23s
# Lock time      0     2us     2us     2us     2us     2us       0     2us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 10: 24.12 QPS, 0.27x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 178114623
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:34:27 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1447
# Exec time      3     16s     3ms   100ms    11ms    24ms     8ms     9ms
# Lock time      8      2s       0    59ms     1ms     9ms     4ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 314.97k     217     229  222.90  223.14    5.00  212.52
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #########################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (2748305216631879435, 2099424955, '3ce6c981-927f-4c1c-832b-79349957b7e8', 1, 1661711705, 1661711705, 1661712305)\G

# Query 11: 84.56 QPS, 0.17x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 160482676
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:34:26 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    5158
# Exec time      1     11s    86us    60ms     2ms    10ms     4ms   260us
# Lock time      0    14ms       0     2ms     2us     1us    30us     1us
# Rows sent      1   5.04k       1       1       1       1       0       1
# Rows examine   0   5.04k       1       2    1.00    0.99    0.04    0.99
# Query size     0 400.22k      75      86   79.46   84.10    3.51   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ######################
#  10ms  #####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=4029373432 AND platform_id='29870511'\G

# Query 12: 4.18 QPS, 0.95x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 241562
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:33:46 to 2023-11-20T18:33:57
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      1     10s   173ms   387ms   226ms   293ms    46ms   208ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    42  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (1042148,9904038980,6,720,36,5336,1639932222,1639932222,NULL) /*... omitted ...*/\G

# Query 13: 16.70 QPS, 0.17x concurrency, ID 0x75C006C72A2DD00658309A1A758E1BB6 at byte 178112738
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:34:27 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1002
# Exec time      1     10s     3ms    62ms    10ms    20ms     6ms     8ms
# Lock time      0     4ms       0     2ms     4us     1us    60us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0    1002       1       1       1       1       0       1
# Query size     0  83.43k      82      87   85.26   84.10    0.98   84.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###############################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=785317070, last_getreward_at=1661711705 WHERE id=9254318773\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=785317070, last_getreward_at=1661711705 from users where  id=9254318773\G

# Query 14: 20.89 QPS, 0.16x concurrency, ID 0xE3341326DCBBC41D81C9550FEAE6F248 at byte 226879987
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-20T18:34:26 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1274
# Exec time      1     10s   215us   117ms     8ms    48ms    16ms     1ms
# Lock time      0     2ms       0   545us     1us     1us    15us     1us
# Rows sent      6  22.75k       0      28   18.28   26.08   10.25   26.08
# Rows examine   0  22.75k       0      28   18.28   26.08   10.25   26.08
# Query size     0 248.29k     192     208  199.57  202.40    3.87  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #######################################################
#   1ms  ################################################################
#  10ms  ##########################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=8375609359 AND present_all_id IN (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29)\G

# Query 15: 138.90 QPS, 0.16x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 207912905
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:34:27 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    8334
# Exec time      1     10s    66us    41ms     1ms     4ms     2ms   657us
# Lock time      0    21ms       0     5ms     2us     1us    57us     1us
# Rows sent      2   8.14k       0       1    1.00    0.99    0.01    0.99
# Rows examine  57   4.93M       4   1.24k  619.96   1.14k  359.15  592.07
# Query size     0 862.67k      81     106  106.00  102.22    0.24  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##
# 100us  ################################################################
#   1ms  #############################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='e33fc8fc-98ff-46b5-bf09-3c337a0c36c1' AND deleted_at IS NULL\G

# Query 16: 318.07 QPS, 0.15x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 183105426
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:34:26 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   19402
# Exec time      1      9s    39us    34ms   474us     2ms     1ms   103us
# Lock time      0    32ms       0     2ms     1us     1us    19us     1us
# Rows sent      5  18.95k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  18.95k       0       1    1.00    0.99    0.01    0.99
# Query size     0 815.10k      33      48   43.02   46.83    4.23   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##############################################################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=981055057\G

# Query 17: 268.64 QPS, 0.14x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 160486126
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:34:26 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   16387
# Exec time      1      9s    61us    61ms   530us     2ms     2ms   138us
# Lock time      0    21ms       0   560us     1us     1us     9us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  16.00k       1       1       1       1       0       1
# Query size     1   1.18M      71      82   75.41   80.10    1.81   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################
# 100us  ################################################################
#   1ms  #######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=33, updated_at=1661711699 WHERE id=99726393370\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=33, updated_at=1661711699 from user_items where  id=99726393370\G

# Query 18: 202.28 QPS, 0.13x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 237826767
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:34:26 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1   12339
# Exec time      1      8s    41us    54ms   638us     3ms     2ms   108us
# Lock time      0    23ms       0     2ms     1us     1us    32us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     2   2.32M     189     201  196.94  192.76    4.54  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##########################################################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (2748305216631896495, 3375270969, 21, 1661711726, 1661711726, 1661711726)\G

# Query 19: 20.25 QPS, 0.13x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 224855775
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-20T18:34:27 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1215
# Exec time      1      8s   126us   141ms     6ms    30ms    14ms     1ms
# Lock time      0     3ms       0     2ms     2us     1us    45us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  16.07k       4      43   13.54   20.43    5.04   13.83
# Query size     0 317.53k     134     637  267.61  346.17   55.63  271.23
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #########################################################
#  10ms  #####################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661711721, updated_at=1661711721 WHERE id IN (34252, 34280, 34322, 34356, 34396, 34428, 34462, 34496, 34529, 22150676206, 25298507541, 29343800680, 35937759311, 46345694708, 47264958543, 47319890199, 49669453791, 54180422846, 58714949456, 67303367122, 67971337093, 70771900579, 71126076808, 74261620089, 74495689096, 83897073388, 85262432526, 88099354581)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661711721, updated_at=1661711721 from user_presents where  id IN (34252, 34280, 34322, 34356, 34396, 34428, 34462, 34496, 34529, 22150676206, 25298507541, 29343800680, 35937759311, 46345694708, 47264958543, 47319890199, 49669453791, 54180422846, 58714949456, 67303367122, 67971337093, 70771900579, 71126076808, 74261620089, 74495689096, 83897073388, 85262432526, 88099354581)\G

# Query 20: 238.47 QPS, 0.13x concurrency, ID 0xD858CC1645CE084FE3844E34483B662E at byte 147243581
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:34:27 to 2023-11-20T18:35:27
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   14308
# Exec time      1      8s    63us    39ms   529us     3ms     1ms   125us
# Lock time      0    25ms       0     2ms     1us     1us    26us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  13.97k       1       1       1       1       0       1
# Query size     0 810.78k      48      60   58.03   59.77    2.76   56.92
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #######################
# 100us  ################################################################
#   1ms  ########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=7613702019 WHERE id=4726822999\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=7613702019 from users where  id=4726822999\G
