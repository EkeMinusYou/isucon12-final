
# A software update is available:

# 15s user time, 120ms system time, 62.02M rss, 390.29G vsz
# Current date: Wed Nov 22 02:37:32 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 340.49k total, 178 unique, 3.74k QPS, 8.52x concurrency _______
# Time range: 2023-11-21T17:34:49 to 2023-11-21T17:36:20
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           775s     1us      9s     2ms     8ms    19ms   167us
# Lock time            84s       0   316ms   245us     1us     5ms     1us
# Rows sent        663.26k       0    1012    1.99   13.83    6.32       0
# Rows examine      30.91M       0 235.97k   95.20  652.75  556.18    0.99
# Query size       112.94M       6 1008.95k  347.83  258.32  14.10k   84.10

# Profile
# Rank Query ID                            Response time  Calls  R/Call V/
# ==== =================================== ============== ====== ====== ==
#    1 0x1049606E13674A053E0CC69500F839DC  131.7119 17.0%   2974 0.0443  0.06 UPDATE user_one_time_tokens
#    2 0x8CA5C26DA1F53D285B58FE47352DA00A  114.7902 14.8%  16859 0.0068  0.02 SELECT user_sessions
#    3 0x03FFA53B9AEA23779E51FE7DD3DC165E   71.6862  9.3%  51058 0.0014  0.02 INSERT user_presents
#    4 0x611363ACBD1690538F137757E45B738C   58.5569  7.6%   3030 0.0193  0.05 SELECT user_presents
#    5 0x6E790EE92EFF4755B6E0FA83F9CA8363   55.7430  7.2%   3017 0.0185  0.05 UPDATE user_presents
#    6 0xF0F3320DE1260EAD27BC0426FCB34A4D   45.3265  5.8%   3030 0.0150  0.04 SELECT user_presents
#    7 0xE89B4FB5E77ED142BEAF8C3B369FA2FE   34.3099  4.4%   3017 0.0114  0.04 SELECT user_presents
#    8 0x84505E5BA52EFFCA6A20B2B28E72AC54   31.0471  4.0%   2976 0.0104  0.03 SELECT user_one_time_tokens
#    9 0xED0711EB833D06BBD84F496A9784760B   16.8710  2.2%  27804 0.0006  0.01 UPDATE user_items
#   10 0xFFFCA4D67EA0A788813031B8BBC3B329   15.4204  2.0%   9054 0.0017  0.02 COMMIT
#   11 0x41CEDDDAFB6289B60E5F30D0462408DB   14.9805  1.9%  27328 0.0005  0.01 INSERT user_present_all_received_history
#   12 0xBC551EACF5A3BE27E3F2CC3C5133F3D5   13.3647  1.7%   9549 0.0014  0.01 SELECT gacha_item_masters
#   13 0x07D5CE9B533D56A3B70C17C590E82A7F   12.6793  1.6%  19880 0.0006  0.01 SELECT version_masters
#   14 0x2096778F723F6666B5D7DDC9D01010C7   11.4097  1.5%     46 0.2480  0.07 INSERT user_cards
#   15 0xAB2AB35C6EFA17C04018A132A84A16C9   11.2483  1.5%  19213 0.0006  0.01 SELECT user_bans
#   16 0x584D7D428BA6602840353479CEB359A1   11.0745  1.4%  10196 0.0011  0.01 SELECT user_devices
#   17 0x2372FB123B18A108CFBB5352F61B370B   11.0663  1.4%  17285 0.0006  0.01 SELECT users
#   18 0x79A889ED30BFA8BF517F86F6D70065B6    9.4587  1.2%      1 9.4587  0.00 LOAD DATA user_presents
#   19 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A    8.1515  1.1%   2997 0.0027  0.02 INSERT user_one_time_tokens
#   20 0xE3341326DCBBC41D81C9550FEAE6F248    8.0846  1.0%   2461 0.0033  0.01 SELECT user_present_all_received_history
# MISC 0xMISC                               87.9982 11.4% 108712 0.0008   0.0 <158 ITEMS>

# Query 1: 48.75 QPS, 2.16x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 176518205
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.06
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2974
# Exec time     16    132s   160us   320ms    44ms   148ms    52ms    20ms
# Lock time     93     79s       0   297ms    26ms   110ms    41ms     1ms
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine  13   4.24M       1   2.93k   1.46k   2.76k  845.51   1.39k
# Query size     0 302.05k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ########################
#   1ms  ###############################
#  10ms  ################################################################
# 100ms  ########################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661708173 WHERE token='3a9266ef-771b-47d9-a7b5-7b78a0d1e0e3'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661708173 from user_one_time_tokens where  token='3a9266ef-771b-47d9-a7b5-7b78a0d1e0e3'\G

# Query 2: 276.38 QPS, 1.88x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 182411006
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   16859
# Exec time     14    115s    92us   165ms     7ms    31ms    13ms     2ms
# Lock time      0   139ms       0    43ms     8us     1us   350us     1us
# Rows sent      2  16.46k       0       1    1.00    0.99    0.01    0.99
# Rows examine  63  19.50M       4   2.40k   1.18k   2.27k  698.02   1.14k
# Query size     1   1.70M      81     106  106.00  102.22    0.17  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ##################################################
#   1ms  ################################################################
#  10ms  ##########################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='e19cdd7b-8dcd-476c-9c09-dade7c9e0f39' AND deleted_at IS NULL\G

# Query 3: 837.02 QPS, 1.18x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 141621457
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         14   51058
# Exec time      9     72s    43us   166ms     1ms     6ms     6ms   119us
# Lock time      0   191ms       0    11ms     3us     1us   105us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    10  12.35M     243     272  253.58  258.32    6.79  246.02
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################################
# 100us  ################################################################
#   1ms  ###############
#  10ms  ####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (4961480500423879241, 3302172763, 1661708153, 1, 1, 2000, '２２ヶ月プレゼントです！', 1661708153, 1661708153)\G

# Query 4: 49.67 QPS, 0.96x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 149847597
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3030
# Exec time      7     59s   193us   274ms    19ms    82ms    30ms     6ms
# Lock time      0    16ms       0     5ms     5us     1us   110us     1us
# Rows sent      9  63.92k       0      69   21.60   36.69    9.88   22.53
# Rows examine   2 741.13k      47     705  250.47  652.75  231.18  124.25
# Query size     0 392.51k     126     138  132.65  136.99       6  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ############################################
#   1ms  ###############################################################
#  10ms  ################################################################
# 100ms  #######
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 6114127144 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 5: 49.46 QPS, 0.91x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 135827185
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3017
# Exec time      7     56s   153us   238ms    18ms    82ms    30ms     4ms
# Lock time      0    12ms       0     3ms     4us     1us    63us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  63.64k       1      69   21.60   36.69    9.88   22.53
# Query size     1   1.29M     103   1.06k  448.46  685.39  181.39  363.48
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #####################################
#   1ms  ################################################################
#  10ms  #######################################################
# 100ms  #####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661708150, updated_at=1661708150 WHERE id IN (1474519510, 6459891419, 8374720925, 12483946434, 13198193767, 17235412885, 21164170719, 21811698780, 27350075765, 29888415733, 41238907374, 43040281759, 47262145710, 50595753159, 51501033670, 53134475308, 57693195967, 64921927178, 71562021463, 77033586329, 88582627829, 92145252289, 92220962374, 92268591405, 4961480500423873162, 4961480500423873206, 4961480500423873228, 4961480500423873242, 4961480500423873280, 4961480500423873283, 4961480500423873320, 4961480500423873470, 4961480500423873479, 4961480500423873481, 4961480500423873489, 4961480500423873493, 4961480500423873515, 4961480500423873525, 4961480500423873571)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661708150, updated_at=1661708150 from user_presents where  id IN (1474519510, 6459891419, 8374720925, 12483946434, 13198193767, 17235412885, 21164170719, 21811698780, 27350075765, 29888415733, 41238907374, 43040281759, 47262145710, 50595753159, 51501033670, 53134475308, 57693195967, 64921927178, 71562021463, 77033586329, 88582627829, 92145252289, 92220962374, 92268591405, 4961480500423873162, 4961480500423873206, 4961480500423873228, 4961480500423873242, 4961480500423873280, 4961480500423873283, 4961480500423873320, 4961480500423873470, 4961480500423873479, 4961480500423873481, 4961480500423873489, 4961480500423873493, 4961480500423873515, 4961480500423873525, 4961480500423873571)\G

# Query 6: 49.67 QPS, 0.74x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 157619365
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3030
# Exec time      5     45s   154us   212ms    15ms    68ms    26ms     3ms
# Lock time      0    10ms       0     1ms     3us     1us    43us     1us
# Rows sent      0   2.96k       1       1       1       1       0       1
# Rows examine   2 677.21k      27     671  228.87  621.67  227.04  112.70
# Query size     0 259.35k      81      93   87.65   92.72       6   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ########################################################
#   1ms  ################################################################
#  10ms  ######################################################
# 100ms  ####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 3225738832 AND deleted_at IS NULL\G

# Query 7: 49.46 QPS, 0.56x concurrency, ID 0xE89B4FB5E77ED142BEAF8C3B369FA2FE at byte 149783500
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3017
# Exec time      4     34s   123us   172ms    11ms    56ms    21ms     1ms
# Lock time      0    12ms       0     2ms     4us     1us    41us     1us
# Rows sent      9  63.64k       1      69   21.60   36.69    9.88   22.53
# Rows examine   0  63.64k       1      69   21.60   36.69    9.88   22.53
# Query size     1   1.24M      84   1.04k  429.46  652.75  179.73  346.17
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #################################
#  10ms  #####################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents WHERE id IN (4961480500423886619, 4961480500423886621, 4961480500423886623, 4961480500423886625, 4961480500423886627, 4961480500423886629, 4961480500423886630, 4961480500423886652, 4961480500423886654, 4961480500423886656) AND deleted_at IS NULL\G

# Query 8: 48.79 QPS, 0.51x concurrency, ID 0x84505E5BA52EFFCA6A20B2B28E72AC54 at byte 181210453
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2976
# Exec time      4     31s    96us   170ms    10ms    48ms    17ms     3ms
# Lock time      0    17ms       0     4ms     5us     1us    97us     1us
# Rows sent      0   2.90k       0       1    1.00    0.99    0.03    0.99
# Rows examine  13   4.23M       1   2.92k   1.46k   2.76k  842.39   1.39k
# Query size     0 363.28k     125     125     125     125       0     125
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ###################################
#   1ms  ################################################################
#  10ms  ####################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_one_time_tokens WHERE token='524349f0-8fae-4e38-845e-fc717f40cf90' AND token_type=1 AND deleted_at IS NULL\G

# Query 9: 455.80 QPS, 0.28x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 123722157
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   27804
# Exec time      2     17s    54us    88ms   606us     2ms     2ms   125us
# Lock time      0   157ms       0    20ms     5us     1us   173us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  27.15k       1       1       1       1       0       1
# Query size     1   1.99M      70      82   75.12   72.65    1.10   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##############################
# 100us  ################################################################
#   1ms  #############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=94, updated_at=1661708143 WHERE id=78233216358\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=94, updated_at=1661708143 from user_items where  id=78233216358\G

# Query 10: 148.43 QPS, 0.25x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 150162149
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9054
# Exec time      1     15s    38us   124ms     2ms     7ms     6ms   224us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  53.05k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #################################################
# 100us  ################################################################
#   1ms  ######################
#  10ms  #####
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 11: 448 QPS, 0.25x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 150213760
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   27328
# Exec time      1     15s    39us   108ms   548us     2ms     2ms    93us
# Lock time      0   103ms       0     9ms     3us     1us    90us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     4   5.15M     189     201  197.67  192.76    4.36  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #################################################
#   1ms  ############
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (4961480500423887448, 5879473679, 16, 1661708158, 1661708158, 1661708158)\G

# Query 12: 156.54 QPS, 0.22x concurrency, ID 0xBC551EACF5A3BE27E3F2CC3C5133F3D5 at byte 127546458
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9549
# Exec time      1     13s   116us    83ms     1ms     6ms     3ms   366us
# Lock time      0    75ms       0    10ms     7us     1us   146us     1us
# Rows sent     40 265.76k      27      29   28.50   28.75       1   28.75
# Rows examine   1 531.51k      54      58   57.00   56.92       2   56.92
# Query size     0 620.10k      66      68   66.50   65.89       0   65.89
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #####################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'gacha_item_masters'\G
#    SHOW CREATE TABLE `isucon`.`gacha_item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM gacha_item_masters WHERE gacha_id=40 ORDER BY id ASC\G

# Query 13: 325.90 QPS, 0.21x concurrency, ID 0x07D5CE9B533D56A3B70C17C590E82A7F at byte 175318510
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   19880
# Exec time      1     13s    55us   111ms   637us     2ms     3ms   138us
# Lock time      0   165ms       0    38ms     8us     1us   325us     1us
# Rows sent      2  19.41k       1       1       1       1       0       1
# Rows examine   0  32.08k       1       2    1.65    1.96    0.46    1.96
# Query size     0 854.22k      44      44      44      44       0      44
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #######################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'version_masters'\G
#    SHOW CREATE TABLE `isucon`.`version_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM version_masters WHERE status=1\G

# Query 14: 3.83 QPS, 0.95x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 35291489
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.07
# Time range: 2023-11-21T17:34:50 to 2023-11-21T17:35:02
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      1     11s   145ms   589ms   248ms   501ms   128ms   180ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    40  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (74058928079,9909014657,6,780,39,8643,1584709110,1584709110,NULL) /*... omitted ...*/\G

# Query 15: 314.97 QPS, 0.18x concurrency, ID 0xAB2AB35C6EFA17C04018A132A84A16C9 at byte 142804177
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   19213
# Exec time      1     11s    55us    80ms   585us     2ms     2ms   125us
# Lock time      0   205ms       0    26ms    10us     1us   329us     1us
# Rows sent      0     541       0       1    0.03       0    0.16       0
# Rows examine   0     541       0       1    0.03       0    0.16       0
# Query size     0 953.78k      45      57   50.83   56.92    4.73   46.83
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #######################################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_bans'\G
#    SHOW CREATE TABLE `isucon`.`user_bans`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_bans WHERE user_id=9388810828\G

# Query 16: 167.15 QPS, 0.18x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 142802097
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   10196
# Exec time      1     11s   107us    80ms     1ms     4ms     3ms   236us
# Lock time      0    95ms       0    22ms     9us     1us   258us     1us
# Rows sent      1   9.96k       1       1       1       1       0       1
# Rows examine   0   9.96k       1       2    1.00    0.99    0.02    0.99
# Query size     0 797.38k      75      86   80.08   84.10    3.77   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ###############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=7792283209 AND platform_id='25017141'\G

# Query 17: 283.36 QPS, 0.18x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 182347247
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   17285
# Exec time      1     11s    56us    94ms   640us     2ms     2ms   138us
# Lock time      0    93ms       0    10ms     5us     1us   123us     1us
# Rows sent      2  16.88k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  16.88k       0       1    1.00    0.99    0.01    0.99
# Query size     0 707.38k      33      48   41.91   46.83    4.01   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ############################
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=4096829906\G

# Query 18: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650770
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-21T17:35:19
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      1      9s      9s      9s      9s      9s       0      9s
# Lock time      0     3us     3us     3us     3us     3us       0     3us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s  ################################################################
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 19: 49.13 QPS, 0.13x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 179177331
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2997
# Exec time      1      8s    86us   125ms     3ms    14ms     8ms   403us
# Lock time      0   230ms       0    54ms    76us     1us     1ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 654.58k     217     229  223.65  223.14    5.23  212.52
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #######################
#  10ms  ######
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (4961480500423915041, 4961480500423911953, '4c9fb44a-80d3-4219-9f41-ecebd31190db', 1, 1661708174, 1661708174, 1661708774)\G

# Query 20: 40.34 QPS, 0.13x concurrency, ID 0xE3341326DCBBC41D81C9550FEAE6F248 at byte 157397098
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:35:19 to 2023-11-21T17:36:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2461
# Exec time      1      8s   226us   112ms     3ms    14ms     6ms   839us
# Lock time      0     9ms       0     3ms     3us     1us    74us     1us
# Rows sent      6  40.35k       0      28   16.79   26.08   10.92   13.83
# Rows examine   0 276.32k       0 235.97k  114.97   26.08   4.71k   13.83
# Query size     0 480.47k     192     208  199.92  202.40    4.25  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ###########################################
#  10ms  ##########
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=4961480500423893154 AND present_all_id IN (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29)\G
