
# 22.3s user time, 70ms system time, 54.39M rss, 389.87G vsz
# Current date: Tue Nov 21 04:05:44 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 591.36k total, 180 unique, 5.80k QPS, 6.23x concurrency _______
# Time range: 2023-11-20T19:02:42 to 2023-11-20T19:04:24
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           635s     1us     22s     1ms     3ms    30ms    63us
# Lock time            60s       0   723ms   101us     1us     4ms       0
# Rows sent        385.47k       0    1012    0.67    0.99    3.82       0
# Rows examine      10.21M       0  25.67k   18.11   21.45  125.09       0
# Query size       107.14M       6 1008.95k  189.97  234.30  10.70k   31.70

# Profile
# Rank Query ID                            Response time  Calls  R/Call  V
# ==== =================================== ============== ====== ======= =
#    1 0x611363ACBD1690538F137757E45B738C  123.8123 19.5%   1653  0.0749  0.19 SELECT user_presents
#    2 0x1049606E13674A053E0CC69500F839DC   75.5653 11.9%   1637  0.0462  0.08 UPDATE user_one_time_tokens
#    3 0xF0F3320DE1260EAD27BC0426FCB34A4D   56.5960  8.9%   1653  0.0342  0.22 SELECT user_presents
#    4 0xFFFCA4D67EA0A788813031B8BBC3B329   48.7531  7.7%   4946  0.0099  0.00 COMMIT
#    5 0x03FFA53B9AEA23779E51FE7DD3DC165E   47.4152  7.5%  27556  0.0017  0.02 INSERT user_presents
#    6 0xDA556F9115773A1A99AA0165670CE848   28.5267  4.5% 188753  0.0002  0.00 ADMIN PREPARE
#    7 0x79A889ED30BFA8BF517F86F6D70065B6   22.0181  3.5%      1 22.0181  0.00 LOAD DATA user_presents
#    8 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A   21.6845  3.4%   1641  0.0132  0.01 INSERT user_one_time_tokens
#    9 0x6E790EE92EFF4755B6E0FA83F9CA8363   17.2176  2.7%   1646  0.0105  0.05 UPDATE user_presents
#   10 0x584D7D428BA6602840353479CEB359A1   12.4388  2.0%   5708  0.0022  0.01 SELECT user_devices
#   11 0x75C006C72A2DD00658309A1A758E1BB6   11.9688  1.9%   1064  0.0112  0.01 UPDATE users
#   12 0x8CA5C26DA1F53D285B58FE47352DA00A   11.8288  1.9%   9298  0.0013  0.00 SELECT user_sessions
#   13 0xE3341326DCBBC41D81C9550FEAE6F248   11.6619  1.8%   1368  0.0085  0.03 SELECT user_present_all_received_history
#   14 0x2372FB123B18A108CFBB5352F61B370B   10.8894  1.7%  21838  0.0005  0.01 SELECT users
#   15 0x2096778F723F6666B5D7DDC9D01010C7   10.4616  1.6%     46  0.2274  0.01 INSERT user_cards
#   16 0xD858CC1645CE084FE3844E34483B662E   10.2584  1.6%  16370  0.0006  0.01 UPDATE users
#   17 0x41CEDDDAFB6289B60E5F30D0462408DB    9.8712  1.6%  14136  0.0007  0.01 INSERT user_present_all_received_history
#   18 0xE89B4FB5E77ED142BEAF8C3B369FA2FE    7.8270  1.2%   1646  0.0048  0.04 SELECT user_presents
#   19 0xED0711EB833D06BBD84F496A9784760B    7.7841  1.2%  16765  0.0005  0.00 UPDATE user_items
#   20 0x50395CBB44EFB941B9A1D04B28581D9F    7.7141  1.2%   1350  0.0057  0.02 SELECT user_items
# MISC 0xMISC                               80.8683 12.7% 272284  0.0003   0.0 <160 ITEMS>

# Query 1: 27.55 QPS, 2.06x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 226125928
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.19
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1653
# Exec time     19    124s   151us   973ms    75ms   323ms   120ms    13ms
# Lock time      0     4ms       0     1ms     2us     1us    32us     1us
# Rows sent      9  35.80k       0      72   22.18   36.69   10.06   22.53
# Rows examine   4 434.77k      47     699  269.33  652.75  231.64  130.47
# Query size     0 212.74k     127     137  131.79  136.99       5  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #######################################################
#   1ms  ####################################################
#  10ms  ################################################################
# 100ms  #############################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 6940773656 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 2: 27.28 QPS, 1.26x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 231380113
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.08
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1637
# Exec time     11     76s     3ms   355ms    46ms   171ms    61ms    22ms
# Lock time     86     52s       0   343ms    32ms   148ms    59ms     5ms
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine  12   1.29M       1   1.60k  823.24   1.46k  463.65  793.42
# Query size     0 166.26k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ######################
#  10ms  ################################################################
# 100ms  #############
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661713463 WHERE token='b93b4a49-6eac-41c0-a100-77e374ab38b0'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661713463 from user_one_time_tokens where  token='b93b4a49-6eac-41c0-a100-77e374ab38b0'\G

# Query 3: 27.55 QPS, 0.94x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 226484391
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.22
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1653
# Exec time      8     57s   113us   911ms    34ms   180ms    87ms     3ms
# Lock time      0     4ms       0   927us     2us     1us    23us     1us
# Rows sent      0   1.61k       1       1       1       1       0       1
# Rows examine   3 398.97k      27     664  247.15  621.67  227.75  118.34
# Query size     0 140.10k      82      92   86.79   88.31    3.93   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #############################################################
#   1ms  ################################################################
#  10ms  ##############################################
# 100ms  ###################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 7015495524 AND deleted_at IS NULL\G

# Query 4: 82.43 QPS, 0.81x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 152522935
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4946
# Exec time      7     49s     3ms    78ms    10ms    19ms     5ms     9ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  28.98k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ############################################
# 100ms
#    1s
#  10s+
COMMIT\G

# Query 5: 459.27 QPS, 0.79x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 152560784
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   27556
# Exec time      7     47s    47us   184ms     2ms     9ms     6ms   138us
# Lock time      0    36ms       0     1ms     1us     1us    12us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     6   6.61M     242     270  251.54  246.02    3.73  246.02
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################
# 100us  ################################################################
#   1ms  #################
#  10ms  #####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (640480873469798934, 5134364165, 1661713434, 1, 1, 6000, 'CM放映記念プレゼントです！', 1661713434, 1661713434)\G

# Query 6: 3.15k QPS, 0.48x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 214464019
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         31  188753
# Exec time      4     29s    16us    25ms   151us   515us   325us    66us
# Lock time      0    33us       0     4us       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     5   5.40M      30      30      30      30       0      30
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ######################
#   1ms  ##
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 7: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650770
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-20T19:03:23
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      3     22s     22s     22s     22s     22s       0     22s
# Lock time      0     2us     2us     2us     2us     2us       0     2us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 8: 27.35 QPS, 0.36x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 196727940
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1641
# Exec time      3     22s     3ms    73ms    13ms    30ms     9ms    11ms
# Lock time      5      3s       0    37ms     2ms    11ms     4ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 355.45k     217     227  221.80  223.14       5  212.52
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (640480873469814285, 640480873469811653, '51c8f0be-c5eb-4143-93f4-549f628cfe5b', 1, 1661713451, 1661713451, 1661714051)\G

# Query 9: 27.43 QPS, 0.29x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 225702283
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1646
# Exec time      2     17s   177us   296ms    10ms    42ms    23ms     3ms
# Lock time      0     2ms       0   203us     1us     1us     6us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  35.62k      10      72   22.16   36.69   10.04   22.53
# Query size     0 707.46k     208   1.08k  440.12  652.75  176.14  363.48
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##################################
#   1ms  ################################################################
#  10ms  ##############################
# 100ms  ##
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661713461, updated_at=1661713461 WHERE id IN (640480873469822200, 640480873469822308, 640480873469822310, 640480873469822435, 640480873469822579, 640480873469822582, 640480873469822632, 640480873469822683, 640480873469822685, 640480873469822758, 640480873469822760, 640480873469822762, 640480873469822766, 640480873469822769, 640480873469822919, 640480873469823067, 640480873469823105, 640480873469823243, 640480873469823400, 640480873469823483, 640480873469823518, 640480873469823613, 640480873469823642, 640480873469823644, 640480873469823830, 640480873469823924, 640480873469823985, 640480873469824178)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661713461, updated_at=1661713461 from user_presents where  id IN (640480873469822200, 640480873469822308, 640480873469822310, 640480873469822435, 640480873469822579, 640480873469822582, 640480873469822632, 640480873469822683, 640480873469822685, 640480873469822758, 640480873469822760, 640480873469822762, 640480873469822766, 640480873469822769, 640480873469822919, 640480873469823067, 640480873469823105, 640480873469823243, 640480873469823400, 640480873469823483, 640480873469823518, 640480873469823613, 640480873469823642, 640480873469823644, 640480873469823830, 640480873469823924, 640480873469823985, 640480873469824178)\G

# Query 10: 95.13 QPS, 0.21x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 207925925
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    5708
# Exec time      1     12s    85us    49ms     2ms    11ms     4ms   260us
# Lock time      0    14ms       0     1ms     2us     1us    22us     1us
# Rows sent      1   5.57k       1       1       1       1       0       1
# Rows examine   0   5.58k       1       2    1.00    0.99    0.03    0.99
# Query size     0 442.88k      74      85   79.45   84.10    3.61   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ######################
#  10ms  #####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=640480873469815994 AND platform_id='1989247'\G

# Query 11: 17.73 QPS, 0.20x concurrency, ID 0x75C006C72A2DD00658309A1A758E1BB6 at byte 152524955
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1064
# Exec time      1     12s     3ms    98ms    11ms    23ms     8ms     9ms
# Lock time      0     2ms       0   319us     1us     1us    11us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0   1.04k       1       1       1       1       0       1
# Query size     0  88.63k      83      87   85.30   84.10    0.94   84.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###########################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=849024085, last_getreward_at=1661713434 WHERE id=3240815103\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=849024085, last_getreward_at=1661713434 from users where  id=3240815103\G

# Query 12: 154.97 QPS, 0.20x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 134939472
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    9298
# Exec time      1     12s    65us    61ms     1ms     4ms     2ms   725us
# Lock time      0    21ms       0     2ms     2us     1us    28us     1us
# Rows sent      2   9.08k       0       1    1.00    0.99    0.01    0.99
# Rows examine  59   6.07M       4   1.33k  684.28   1.26k  393.45  685.39
# Query size     0 962.46k      81     106  106.00  102.22    0.23  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##
# 100us  ################################################################
#   1ms  ####################################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='abf4d901-441e-45a2-9382-2d446bc73071' AND deleted_at IS NULL\G

# Query 13: 22.80 QPS, 0.19x concurrency, ID 0xE3341326DCBBC41D81C9550FEAE6F248 at byte 185289760
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1368
# Exec time      1     12s   196us   151ms     9ms    44ms    16ms     2ms
# Lock time      0     2ms       0   144us     1us     1us     5us     1us
# Rows sent      6  23.57k       0      28   17.64   26.08   10.41   26.08
# Rows examine   0  23.57k       0      28   17.64   26.08   10.41   26.08
# Query size     0 266.51k     193     207  199.49  202.40    3.98  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #######################################################
#   1ms  ################################################################
#  10ms  #############################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=5658889995 AND present_all_id IN (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29)\G

# Query 14: 363.97 QPS, 0.18x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 191673243
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   21838
# Exec time      1     11s    39us    34ms   498us     2ms     2ms   103us
# Lock time      0    46ms       0     6ms     2us     1us    45us     1us
# Rows sent      5  21.33k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  21.33k       0       1    1.00    0.99    0.01    0.99
# Query size     0 910.48k      33      47   42.69   46.83    4.26   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ############################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=3230800932\G

# Query 15: 4.18 QPS, 0.95x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 241562
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:02:44 to 2023-11-20T19:02:55
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      1     10s   174ms   397ms   227ms   323ms    50ms   208ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    42  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (1042148,9904038980,6,720,36,5336,1639932222,1639932222,NULL) /*... omitted ...*/\G

# Query 16: 272.83 QPS, 0.17x concurrency, ID 0xD858CC1645CE084FE3844E34483B662E at byte 186877687
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   16370
# Exec time      1     10s    60us    76ms   626us     3ms     2ms   125us
# Lock time      0    22ms       0     1ms     1us     1us    14us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  15.99k       1       1       1       1       0       1
# Query size     0 919.14k      48      59   57.50   56.92    1.53   56.92
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ########################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=7249188453 WHERE id=2830750408\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=7249188453 from users where  id=2830750408\G

# Query 17: 235.60 QPS, 0.16x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 193328718
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   14136
# Exec time      1     10s    43us    65ms   698us     3ms     3ms   103us
# Lock time      0    17ms       0   834us     1us     1us    11us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     2   2.63M     189     199  195.45  192.76    4.52  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###########################################################
# 100us  ################################################################
#   1ms  ##########
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (640480873469813407, 8754022112, 26, 1661713449, 1661713449, 1661713449)\G

# Query 18: 27.43 QPS, 0.13x concurrency, ID 0xE89B4FB5E77ED142BEAF8C3B369FA2FE at byte 225414962
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1646
# Exec time      1      8s    82us   236ms     5ms    24ms    14ms   490us
# Lock time      0     3ms       0   251us     1us     1us     8us     1us
# Rows sent      9  35.62k      10      72   22.16   36.69   10.04   22.53
# Rows examine   0  35.62k      10      72   22.16   36.69   10.04   22.53
# Query size     0 676.92k     189   1.06k  421.12  652.75  175.48  346.17
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ##########################
#  10ms  ###########
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents WHERE id IN (640480873469821964, 47379796194, 83050013287, 43789110038, 68119226293, 14412944798, 37419798611, 58044276826, 91033449827, 52068759690, 27936858647, 85298242232, 70859663622, 92146646192, 40164815670, 197547336, 1381130802, 70087743446, 29549805611, 51227413578, 12480440786, 50800496241, 72239602712, 560891142) AND deleted_at IS NULL\G

# Query 19: 279.42 QPS, 0.13x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 151503330
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   16765
# Exec time      1      8s    60us    32ms   464us     2ms     1ms   131us
# Lock time      0    23ms       0     2ms     1us     1us    17us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  16.37k       1       1       1       1       0       1
# Query size     1   1.20M      71      81   75.08   72.65    1.01   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ####################
# 100us  ################################################################
#   1ms  ######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=87, updated_at=1661713434 WHERE id=12270351670\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=87, updated_at=1661713434 from user_items where  id=12270351670\G

# Query 20: 22.50 QPS, 0.13x concurrency, ID 0x50395CBB44EFB941B9A1D04B28581D9F at byte 152537795
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T19:03:24 to 2023-11-20T19:04:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1350
# Exec time      1      8s    76us   124ms     6ms    30ms    12ms   761us
# Lock time      0     4ms       0     1ms     2us     1us    41us     1us
# Rows sent      1   6.25k       0      11    4.74    7.70    2.82    4.96
# Rows examine   0  13.41k       0      14   10.17   13.83    5.40   12.54
# Query size     0 158.61k      85     249  120.31  143.84   19.09  118.34
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###
# 100us  ################################################################
#   1ms  ######################################
#  10ms  #####################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_items WHERE user_id=1751278968 AND item_id IN (18, 17, 21, 17, 17, 18, 17, 18, 17, 26, 17, 21, 17, 17, 17, 19)\G
