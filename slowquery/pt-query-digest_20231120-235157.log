
# 19.5s user time, 110ms system time, 69.19M rss, 390.12G vsz
# Current date: Mon Nov 20 23:34:51 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 518.11k total, 178 unique, 5.63k QPS, 4.00x concurrency _______
# Time range: 2023-11-20T14:32:40 to 2023-11-20T14:34:12
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           368s     1us     21s   710us     2ms    29ms    63us
# Lock time            10s       0   282ms    18us     1us   921us       0
# Rows sent        262.82k       0    1012    0.52    0.99    3.39       0
# Rows examine       4.66M       0  18.84k    9.43   12.54   73.00       0
# Query size       100.57M       6 1008.95k  203.55  192.76  11.43k   31.70

# Profile
# Rank Query ID                            Response time Calls  R/Call  V/
# ==== =================================== ============= ====== ======= ==
#    1 0x611363ACBD1690538F137757E45B738C  52.6903 14.3%   1064  0.0495  0.12 SELECT user_presents
#    2 0x3FFFD39D9DB10329B174042FE1810238  37.0571 10.1%  24049  0.0015  0.01 UPDATE user_presents
#    3 0xFFFCA4D67EA0A788813031B8BBC3B329  32.2075  8.7%   3158  0.0102  0.01 COMMIT
#    4 0xDA556F9115773A1A99AA0165670CE848  25.6299  7.0% 167537  0.0002  0.00 ADMIN PREPARE
#    5 0xC20D9D224412E78025DDB691D46B02B6  22.6722  6.2%  12596  0.0018  0.01 SELECT user_items
#    6 0x79A889ED30BFA8BF517F86F6D70065B6  20.9944  5.7%      1 20.9944  0.00 LOAD DATA user_presents
#    7 0x1049606E13674A053E0CC69500F839DC  19.5696  5.3%   1022  0.0191  0.02 UPDATE user_one_time_tokens
#    8 0x03FFA53B9AEA23779E51FE7DD3DC165E  19.4756  5.3%  17622  0.0011  0.01 INSERT user_presents
#    9 0xF0F3320DE1260EAD27BC0426FCB34A4D  14.1528  3.8%   1064  0.0133  0.05 SELECT user_presents
#   10 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A  11.7413  3.2%   1025  0.0115  0.01 INSERT user_one_time_tokens
#   11 0x2096778F723F6666B5D7DDC9D01010C7  10.2882  2.8%     46  0.2237  0.01 INSERT user_cards
#   12 0x75C006C72A2DD00658309A1A758E1BB6   7.4833  2.0%    708  0.0106  0.01 UPDATE users
#   13 0x584D7D428BA6602840353479CEB359A1   7.3027  2.0%   3674  0.0020  0.01 SELECT user_devices
#   14 0xE3341326DCBBC41D81C9550FEAE6F248   6.7415  1.8%    908  0.0074  0.03 SELECT user_present_all_received_history
#   15 0xED0711EB833D06BBD84F496A9784760B   6.0692  1.6%  11918  0.0005  0.00 UPDATE user_items
#   16 0x2372FB123B18A108CFBB5352F61B370B   5.9956  1.6%  14084  0.0004  0.00 SELECT users
#   17 0x8CA5C26DA1F53D285B58FE47352DA00A   5.7718  1.6%   5942  0.0010  0.00 SELECT user_sessions
#   18 0xD858CC1645CE084FE3844E34483B662E   5.7662  1.6%  10479  0.0006  0.01 UPDATE users
#   19 0x0B3509236B570F5C5FE423B079765901   5.4687  1.5%   3681  0.0015  0.01 INSERT user_cards
#   20 0x41CEDDDAFB6289B60E5F30D0462408DB   4.1693  1.1%   9132  0.0005  0.01 INSERT user_present_all_received_history
# MISC 0xMISC                              47.0276 12.8% 228398  0.0002   0.0 <158 ITEMS>

# Query 1: 20.86 QPS, 1.03x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 198348581
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.12
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1064
# Exec time     14     53s   149us   438ms    50ms   219ms    79ms     9ms
# Lock time      0     3ms       0   431us     2us     1us    20us     1us
# Rows sent      8  23.65k       0      71   22.76   38.53   10.54   22.53
# Rows examine   6 286.64k      47     694  275.86  652.75  232.33  130.47
# Query size     0 136.79k     126     137  131.64  136.99    5.50  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ###################################################
#   1ms  #######################################################
#  10ms  ################################################################
# 100ms  #######################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 1482613913 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 2: 471.55 QPS, 0.73x concurrency, ID 0x3FFFD39D9DB10329B174042FE1810238 at byte 156940913
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   24049
# Exec time     10     37s    68us   105ms     2ms     8ms     4ms   176us
# Lock time      0    33ms       0     2ms     1us     1us    22us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  23.49k       1       1       1       1       0       1
# Query size     2   2.13M      82      97   92.85   92.72    2.80   88.31
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########
# 100us  ################################################################
#   1ms  #################
#  10ms  ###
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661697233, updated_at=1661697233 WHERE id=227286705127551770\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661697233, updated_at=1661697233 from user_presents where  id=227286705127551770\G

# Query 3: 61.92 QPS, 0.63x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 105425132
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3158
# Exec time      8     32s     2ms   238ms    10ms    19ms    12ms     8ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  18.50k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###################################
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 4: 3.29k QPS, 0.50x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 153196700
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         32  167537
# Exec time      6     26s    17us    13ms   152us   541us   312us    66us
# Lock time      0    31us       0    11us       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     4   4.79M      30      30      30      30       0      30
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #######################
#   1ms  ##
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 5: 246.98 QPS, 0.44x concurrency, ID 0xC20D9D224412E78025DDB691D46B02B6 at byte 200696209
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   12596
# Exec time      6     23s    71us    79ms     2ms     8ms     5ms   287us
# Lock time      0    26ms       0     3ms     2us     1us    36us     1us
# Rows sent      4  11.47k       0       1    0.93    0.99    0.25    0.99
# Rows examine   3 149.69k       0      14   12.17   13.83    3.49   13.83
# Query size     0 796.78k      61      72   64.77   69.19    2.00   62.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###############
#  10ms  ###
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_items WHERE user_id=6402042929 AND item_id=19\G

# Query 6: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650770
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-20T14:33:20
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      5     21s     21s     21s     21s     21s       0     21s
# Lock time      0     3us     3us     3us     3us     3us       0     3us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 7: 20.04 QPS, 0.38x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 143283472
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1022
# Exec time      5     20s     3ms   173ms    19ms    56ms    17ms    13ms
# Lock time     69      7s       0    83ms     7ms    34ms    13ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine  10 513.44k       1   1.00k  514.45  964.41  289.33  511.45
# Query size     0 103.80k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ###################################
#  10ms  ################################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661697228 WHERE token='addb5c32-e825-431d-9412-402151f40d2e'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661697228 from user_one_time_tokens where  token='addb5c32-e825-431d-9412-402151f40d2e'\G

# Query 8: 345.53 QPS, 0.38x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 105244947
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   17622
# Exec time      5     19s    47us    99ms     1ms     6ms     4ms   131us
# Lock time      0    28ms       0     3ms     1us     1us    26us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     4   4.23M     241     270  251.45  246.02    3.77  246.02
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################
# 100us  ################################################################
#   1ms  ##############
#  10ms  ###
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (227286705127538931, 2101775171, 1661610814, 4, 21, 1, '3周年ガチャの付与アイテムです', 1661610814, 1661610814)\G

# Query 9: 20.86 QPS, 0.28x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 156767363
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1064
# Exec time      3     14s   120us   265ms    13ms    71ms    27ms     2ms
# Lock time      0     1ms       0    20us     1us     1us     1us     1us
# Rows sent      0   1.04k       1       1       1       1       0       1
# Rows examine   5 262.98k      27     662  253.10  621.67  227.91  118.34
# Query size     0  90.03k      81      92   86.64   88.31    3.88   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##########################################################
#   1ms  ################################################################
#  10ms  ########################################
# 100ms  #####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 5100619151 AND deleted_at IS NULL\G

# Query 10: 20.50 QPS, 0.23x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 143270988
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:11
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1025
# Exec time      3     12s     3ms   151ms    11ms    26ms    10ms     8ms
# Lock time     12      1s       0   137ms     1ms     8ms     5ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 221.87k     216     227  221.65  223.14    5.03  212.52
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (227286705127548468, 3351208096, 'cbf57d11-fbf6-4b16-a7c2-2792a6d16ccf', 1, 1661697228, 1661697228, 1661697828)\G

# Query 11: 4.60 QPS, 1.03x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 241562
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:32:42 to 2023-11-20T14:32:52
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      2     10s   176ms   377ms   224ms   279ms    41ms   208ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    44  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (1042148,9904038980,6,720,36,5336,1639932222,1639932222,NULL) /*... omitted ...*/\G

# Query 12: 13.88 QPS, 0.15x concurrency, ID 0x75C006C72A2DD00658309A1A758E1BB6 at byte 143270231
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     708
# Exec time      2      7s     3ms   170ms    11ms    21ms     8ms     9ms
# Lock time      0   983us       0   100us     1us     1us     4us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0     708       1       1       1       1       0       1
# Query size     0  58.99k      83      87   85.32   84.10    0.83   84.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=752036050, last_getreward_at=1661697228 WHERE id=4611416877\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=752036050, last_getreward_at=1661697228 from users where  id=4611416877\G

# Query 13: 72.04 QPS, 0.14x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 201690929
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3674
# Exec time      1      7s    88us    98ms     2ms    10ms     5ms   247us
# Lock time      0    10ms       0     1ms     2us     1us    26us     1us
# Rows sent      1   3.59k       1       1       1       1       0       1
# Rows examine   0   3.59k       1       1       1       1       0       1
# Query size     0 284.69k      75      85   79.35   84.10    3.46   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###################
#  10ms  ####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=6414792418 AND platform_id='12069281'\G

# Query 14: 17.80 QPS, 0.13x concurrency, ID 0xE3341326DCBBC41D81C9550FEAE6F248 at byte 121095125
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     908
# Exec time      1      7s   225us   120ms     7ms    40ms    15ms     2ms
# Lock time      0     1ms       0   113us     1us     1us     5us     1us
# Rows sent      6  15.85k       0      28   17.88   26.08   10.31   26.08
# Rows examine   0  15.85k       0      28   17.88   26.08   10.31   26.08
# Query size     0 176.67k     193     207  199.25  202.40    3.92  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ###################################################
#   1ms  ################################################################
#  10ms  #######################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=5436995482 AND present_all_id IN (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28)\G

# Query 15: 233.69 QPS, 0.12x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 190962420
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   11918
# Exec time      1      6s    66us    34ms   509us     2ms     2ms   138us
# Lock time      0    20ms       0   974us     1us     1us    18us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  11.64k       1       1       1       1       0       1
# Query size     0 877.00k      71      81   75.35   80.10    1.83   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################
# 100us  ################################################################
#   1ms  ######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=13, updated_at=1661697245 WHERE id=90249898511\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=13, updated_at=1661697245 from user_items where  id=90249898511\G

# Query 16: 276.16 QPS, 0.12x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 130163533
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   14084
# Exec time      1      6s    37us    34ms   425us     2ms     1ms   103us
# Lock time      0    24ms       0     2ms     1us     1us    25us     1us
# Rows sent      5  13.75k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  13.75k       0       1    1.00    0.99    0.01    0.99
# Query size     0 585.71k      33      47   42.59   46.83    4.24   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##############################################################
# 100us  ################################################################
#   1ms  ########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=306095136\G

# Query 17: 116.51 QPS, 0.11x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 130509382
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    5942
# Exec time      1      6s    70us    41ms   971us     3ms     2ms   515us
# Lock time      0    14ms       0     2ms     2us     1us    37us     1us
# Rows sent      2   5.80k       0       1    1.00    0.99    0.01    0.99
# Rows examine  53   2.49M       4     901  439.39  833.10  256.92  420.77
# Query size     0 615.07k      81     106  106.00  102.22    0.29  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##
# 100us  ################################################################
#   1ms  #################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='6c464a2e-cd8d-4f39-9e4a-93bdb9b612c0' AND deleted_at IS NULL\G

# Query 18: 205.47 QPS, 0.11x concurrency, ID 0xD858CC1645CE084FE3844E34483B662E at byte 174613398
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   10479
# Exec time      1      6s    62us    48ms   550us     2ms     2ms   125us
# Lock time      0    15ms       0     1ms     1us     1us    17us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  10.23k       1       1       1       1       0       1
# Query size     0 588.07k      48      59   57.47   56.92    1.54   56.92
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #######################
# 100us  ################################################################
#   1ms  #######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=7319022930 WHERE id=2026063328\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=7319022930 from users where  id=2026063328\G

# Query 19: 72.18 QPS, 0.11x concurrency, ID 0x0B3509236B570F5C5FE423B079765901 at byte 105245934
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3681
# Exec time      1      5s    49us    87ms     1ms     8ms     4ms   152us
# Lock time      0     8ms       0     4ms     2us     1us    57us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 649.21k     175     191  180.60  183.58    3.81  174.84
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ########################
# 100us  ################################################################
#   1ms  ##################
#  10ms  ####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO user_cards(id, user_id, card_id, amount_per_sec, level, total_exp, created_at, updated_at) VALUES (227286705127538930, 1369216108, 7, 50, 1, 0, 1661610814, 1661610814)\G

# Query 20: 179.06 QPS, 0.08x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 105403711
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:33:21 to 2023-11-20T14:34:12
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    9132
# Exec time      1      4s    44us    39ms   456us     2ms     2ms   103us
# Lock time      0    13ms       0     1ms     1us     1us    20us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1   1.70M     188     199  195.36  192.76    4.54  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ############################################################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (227286705127538956, 7070630675, 20, 1661610815, 1661610815, 1661610815)\G
