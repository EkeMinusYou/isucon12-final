
# 15.4s user time, 90ms system time, 67.28M rss, 390.12G vsz
# Current date: Wed Nov 22 02:45:21 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 350.09k total, 178 unique, 3.85k QPS, 8.31x concurrency _______
# Time range: 2023-11-21T17:42:12 to 2023-11-21T17:43:43
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           756s     1us      8s     2ms     7ms    17ms   167us
# Lock time            95s       0   210ms   271us     1us     5ms     1us
# Rows sent        674.70k       0    1012    1.97   13.83    6.29       0
# Rows examine      28.71M       0 236.01k   85.98  463.90  970.72    0.99
# Query size       114.47M       6 1008.95k  342.85  258.32  13.91k   84.10

# Profile
# Rank Query ID                            Response time  Calls  R/Call V/
# ==== =================================== ============== ====== ====== ==
#    1 0x1049606E13674A053E0CC69500F839DC  143.8478 19.0%   3070 0.0469  0.06 UPDATE user_one_time_tokens
#    2 0x8CA5C26DA1F53D285B58FE47352DA00A  119.1978 15.8%  17277 0.0069  0.02 SELECT user_sessions
#    3 0x03FFA53B9AEA23779E51FE7DD3DC165E   75.4484 10.0%  53266 0.0014  0.02 INSERT user_presents
#    4 0x6E790EE92EFF4755B6E0FA83F9CA8363   55.2667  7.3%   3110 0.0178  0.05 UPDATE user_presents
#    5 0x611363ACBD1690538F137757E45B738C   54.5966  7.2%   3120 0.0175  0.05 SELECT user_presents
#    6 0xF0F3320DE1260EAD27BC0426FCB34A4D   41.0123  5.4%   3120 0.0131  0.04 SELECT user_presents
#    7 0xE89B4FB5E77ED142BEAF8C3B369FA2FE   29.9242  4.0%   3110 0.0096  0.03 SELECT user_presents
#    8 0xED0711EB833D06BBD84F496A9784760B   16.5663  2.2%  27533 0.0006  0.01 UPDATE user_items
#    9 0x41CEDDDAFB6289B60E5F30D0462408DB   15.2889  2.0%  29136 0.0005  0.01 INSERT user_present_all_received_history
#   10 0xFFFCA4D67EA0A788813031B8BBC3B329   14.3194  1.9%   9331 0.0015  0.02 COMMIT
#   11 0xBC551EACF5A3BE27E3F2CC3C5133F3D5   12.8374  1.7%   9682 0.0013  0.01 SELECT gacha_item_masters
#   12 0x07D5CE9B533D56A3B70C17C590E82A7F   12.7554  1.7%  20352 0.0006  0.01 SELECT version_masters
#   13 0x2372FB123B18A108CFBB5352F61B370B   12.5116  1.7%  17624 0.0007  0.01 SELECT users
#   14 0xAB2AB35C6EFA17C04018A132A84A16C9   11.2827  1.5%  19619 0.0006  0.01 SELECT user_bans
#   15 0x2096778F723F6666B5D7DDC9D01010C7   11.1343  1.5%     46 0.2420  0.06 INSERT user_cards
#   16 0x584D7D428BA6602840353479CEB359A1   10.3426  1.4%  10392 0.0010  0.01 SELECT user_devices
#   17 0xE3341326DCBBC41D81C9550FEAE6F248    9.4578  1.3%   2495 0.0038  0.02 SELECT user_present_all_received_history
#   18 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A    8.4196  1.1%   3087 0.0027  0.02 INSERT user_one_time_tokens
#   19 0x79A889ED30BFA8BF517F86F6D70065B6    8.2394  1.1%      1 8.2394  0.00 LOAD DATA user_presents
#   20 0x0B3509236B570F5C5FE423B079765901    6.0753  0.8%   9743 0.0006  0.01 INSERT user_cards
# MISC 0xMISC                               87.6217 11.6% 104972 0.0008   0.0 <158 ITEMS>

# Query 1: 51.17 QPS, 2.40x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 183737797
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.06
# Time range: 2023-11-21T17:42:43 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3070
# Exec time     19    144s   162us   312ms    47ms   148ms    54ms    18ms
# Lock time     96     92s       0   210ms    30ms   122ms    43ms     1ms
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine  15   4.52M       1   3.01k   1.51k   2.76k  870.92   1.46k
# Query size     0 311.80k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ###########################
#   1ms  #############################################
#  10ms  ################################################################
# 100ms  #####################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661708619 WHERE token='bec3c0eb-14e0-4a8f-b879-fc084475baaf'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661708619 from user_one_time_tokens where  token='bec3c0eb-14e0-4a8f-b879-fc084475baaf'\G

# Query 2: 287.95 QPS, 1.99x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 177369718
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:42:43 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   17277
# Exec time     15    119s    90us   159ms     7ms    34ms    13ms     2ms
# Lock time      0   153ms       0    36ms     8us     1us   304us     1us
# Rows sent      2  16.87k       0       1    1.00    0.99    0.01    0.99
# Rows examine  70  20.31M       4   2.42k   1.20k   2.27k  714.71   1.20k
# Query size     1   1.75M      81     106  106.00  102.22    0.17  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ###############################################
#   1ms  ################################################################
#  10ms  ##########################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='9e06771f-b07f-40fc-8556-b97977031765' AND deleted_at IS NULL\G

# Query 3: 873.21 QPS, 1.24x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 165970854
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:42:42 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         15   53266
# Exec time      9     75s    43us   146ms     1ms     6ms     6ms   113us
# Lock time      0   185ms       0    10ms     3us     1us    91us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    11  12.89M     242     272  253.73  258.32    6.87  246.02
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################
# 100us  ################################################################
#   1ms  ###############
#  10ms  ####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (7111606030710034111, 7111606030710033810, 1661708609, 1, 1, 3000, 'ハーフアニバーサリープレゼントです！', 1661708609, 1661708609)\G

# Query 4: 51.83 QPS, 0.92x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 140986536
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-21T17:42:43 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3110
# Exec time      7     55s   163us   269ms    18ms    82ms    30ms     4ms
# Lock time      0     7ms       0     1ms     2us     1us    23us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  65.84k       1      65   21.68   36.69    9.94   22.53
# Query size     1   1.35M     103   1.01k  453.61  685.39  182.17  363.48
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################
#   1ms  ################################################################
#  10ms  ###############################################
# 100ms  #####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661708595, updated_at=1661708595 WHERE id IN (5402516007, 8694819033, 23427412680, 29659481447, 32294481917, 34667396527, 35008324955, 35895808809, 36029548392, 43672028235, 44766581417, 48343936800, 48894182630, 55706527405, 55777441686, 56090894728, 56839495596, 68832397203, 76322237148, 80497042263, 85582589972, 95692699925, 96030780595, 7111606030710008757, 7111606030710008872, 7111606030710008879, 7111606030710008897, 7111606030710008900, 7111606030710008924, 7111606030710008946, 7111606030710008955, 7111606030710008964, 7111606030710009000, 7111606030710009011, 7111606030710009026, 7111606030710009043, 7111606030710009053, 7111606030710009066)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661708595, updated_at=1661708595 from user_presents where  id IN (5402516007, 8694819033, 23427412680, 29659481447, 32294481917, 34667396527, 35008324955, 35895808809, 36029548392, 43672028235, 44766581417, 48343936800, 48894182630, 55706527405, 55777441686, 56090894728, 56839495596, 68832397203, 76322237148, 80497042263, 85582589972, 95692699925, 96030780595, 7111606030710008757, 7111606030710008872, 7111606030710008879, 7111606030710008897, 7111606030710008900, 7111606030710008924, 7111606030710008946, 7111606030710008955, 7111606030710008964, 7111606030710009000, 7111606030710009011, 7111606030710009026, 7111606030710009043, 7111606030710009053, 7111606030710009066)\G

# Query 5: 52 QPS, 0.91x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 182396741
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-21T17:42:43 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3120
# Exec time      7     55s   186us   212ms    17ms    78ms    28ms     5ms
# Lock time      0    26ms       0     7ms     8us     1us   158us     1us
# Rows sent      9  66.04k       0      65   21.67   36.69    9.94   22.53
# Rows examine   2 735.38k      47     694  241.36  652.75  227.47  124.25
# Query size     0 404.90k     126     138  132.89  136.99       6  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##############################################
#   1ms  ################################################################
#  10ms  ############################################################
# 100ms  ######
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 1302449084 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 6: 52 QPS, 0.68x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 183897485
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-21T17:42:43 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3120
# Exec time      5     41s   151us   210ms    13ms    65ms    24ms     3ms
# Lock time      0     9ms       0     1ms     2us     1us    32us     1us
# Rows sent      0   3.05k       1       1       1       1       0       1
# Rows examine   2 669.34k      27     663  219.68  621.67  223.55  112.70
# Query size     0 267.79k      81      93   87.89   92.72       6   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #######################################################
#   1ms  ################################################################
#  10ms  #############################################
# 100ms  ###
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 3357917316 AND deleted_at IS NULL\G

# Query 7: 51.83 QPS, 0.50x concurrency, ID 0xE89B4FB5E77ED142BEAF8C3B369FA2FE at byte 158858076
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-21T17:42:43 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3110
# Exec time      3     30s   117us   184ms    10ms    48ms    18ms   972us
# Lock time      0    34ms       0     9ms    10us     1us   191us     1us
# Rows sent      9  65.84k       1      65   21.68   36.69    9.94   22.53
# Rows examine   0  65.84k       1      65   21.68   36.69    9.94   22.53
# Query size     1   1.29M      84    1017  434.61  652.75  180.16  346.17
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ###############################
#  10ms  ###############################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents WHERE id IN (7111606030710026518, 7111606030710026747, 7111606030710026774, 7111606030710026846, 7111606030710026849, 7111606030710026851, 7111606030710026853, 7111606030710026855, 7111606030710026858, 7111606030710026877, 7111606030710026895, 7111606030710026946, 7111606030710026954, 7111606030710026960, 7111606030710026971, 80300722859, 15994510672, 99955386448, 82998487724, 22876064580, 84981207617, 54052010270, 31443652825, 92288189473, 76719782527, 72777499383, 29827763567, 63961497760, 87548302374, 48563942351, 67633262275, 30298805335, 38106670272, 63734863873, 94803183789, 20979928487, 73093942273) AND deleted_at IS NULL\G

# Query 8: 451.36 QPS, 0.27x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 136517295
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:42:42 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   27533
# Exec time      2     17s    55us    62ms   601us     2ms     2ms   125us
# Lock time      0    85ms       0     4ms     3us     1us    53us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  26.89k       1       1       1       1       0       1
# Query size     1   1.97M      71      82   75.14   72.65    1.15   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################
# 100us  ################################################################
#   1ms  #############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=26, updated_at=1661708593 WHERE id=6044008844\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=26, updated_at=1661708593 from user_items where  id=6044008844\G

# Query 9: 477.64 QPS, 0.25x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 187270841
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:42:42 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   29136
# Exec time      2     15s    39us    91ms   524us     2ms     2ms    93us
# Lock time      0   105ms       0     8ms     3us     1us    91us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     4   5.49M     189     201  197.74  192.76    4.33  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ##################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (7111606030710054984, 7111606030710053580, 29, 1661708620, 1661708620, 1661708620)\G

# Query 10: 152.97 QPS, 0.23x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 145677404
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:42:42 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9331
# Exec time      1     14s    36us   123ms     2ms     7ms     6ms   224us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  54.67k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################################
# 100us  ################################################################
#   1ms  #####################
#  10ms  ####
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 11: 161.37 QPS, 0.21x concurrency, ID 0xBC551EACF5A3BE27E3F2CC3C5133F3D5 at byte 125206806
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:42:43 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9682
# Exec time      1     13s   116us   101ms     1ms     5ms     4ms   332us
# Lock time      0    91ms       0    14ms     9us     1us   222us     1us
# Rows sent     39 269.46k      27      29   28.50   28.75       1   28.75
# Rows examine   1 538.93k      54      58   57.00   56.92       2   56.92
# Query size     0 628.75k      66      68   66.50   65.89       0   65.89
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ###################
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'gacha_item_masters'\G
#    SHOW CREATE TABLE `isucon`.`gacha_item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM gacha_item_masters WHERE gacha_id='37' ORDER BY id ASC\G

# Query 12: 333.64 QPS, 0.21x concurrency, ID 0x07D5CE9B533D56A3B70C17C590E82A7F at byte 95887628
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:42:42 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   20352
# Exec time      1     13s    55us   102ms   626us     2ms     3ms   138us
# Lock time      0   106ms       0     7ms     5us     1us    98us     1us
# Rows sent      2  19.88k       1       1       1       1       0       1
# Rows examine   0  32.91k       1       2    1.66    1.96    0.46    1.96
# Query size     0 874.50k      44      44      44      44       0      44
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ########################
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'version_masters'\G
#    SHOW CREATE TABLE `isucon`.`version_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM version_masters WHERE status=1\G

# Query 13: 288.92 QPS, 0.21x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 149594762
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:42:42 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   17624
# Exec time      1     13s    55us    96ms   709us     3ms     3ms   138us
# Lock time      0    84ms       0    11ms     4us     1us   101us     1us
# Rows sent      2  17.21k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  17.21k       0       1    1.00    0.99    0.01    0.99
# Query size     0 724.61k      33      48   42.10   46.83    4.08   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=4726444467\G

# Query 14: 321.62 QPS, 0.18x concurrency, ID 0xAB2AB35C6EFA17C04018A132A84A16C9 at byte 164103455
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:42:42 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   19619
# Exec time      1     11s    54us    72ms   575us     2ms     2ms   119us
# Lock time      0   150ms       0    19ms     7us     1us   215us     1us
# Rows sent      0     547       0       1    0.03       0    0.16       0
# Rows examine   0     547       0       1    0.03       0    0.16       0
# Query size     0 977.83k      45      57   51.04   56.92    4.82   46.83
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##########################################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_bans'\G
#    SHOW CREATE TABLE `isucon`.`user_bans`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_bans WHERE user_id=9764700007\G

# Query 15: 4.18 QPS, 1.01x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 44569802
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.06
# Time range: 2023-11-21T17:42:15 to 2023-11-21T17:42:26
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      1     11s   145ms   497ms   242ms   477ms   120ms   180ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    39  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (93572060585,1001761615,3,68,34,4052,1568139615,1568139615,NULL) /*... omitted ...*/\G

# Query 16: 170.36 QPS, 0.17x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 148175599
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:42:42 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   10392
# Exec time      1     10s   104us    85ms   995us     4ms     3ms   224us
# Lock time      0    69ms       0    13ms     6us     1us   154us     1us
# Rows sent      1  10.15k       1       1       1       1       0       1
# Rows examine   0  10.15k       1       2    1.00    0.99    0.02    0.99
# Query size     0 814.68k      74      86   80.28   84.10    3.85   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=7111606030710013398 AND platform_id='1981513'\G

# Query 17: 40.90 QPS, 0.16x concurrency, ID 0xE3341326DCBBC41D81C9550FEAE6F248 at byte 185783478
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:42:42 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    2495
# Exec time      1      9s   225us   110ms     4ms    16ms     8ms   881us
# Lock time      0    14ms       0     4ms     5us     1us    90us     1us
# Rows sent      5  39.54k       0      29   16.23   26.08   11.01   13.83
# Rows examine   3 983.45k       0 236.01k  403.63   26.08   9.34k   13.83
# Query size     0 487.50k     193     208  200.08  202.40    4.33  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ###########################################
#  10ms  ############
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=7111606030710052869 AND present_all_id IN (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29)\G

# Query 18: 51.45 QPS, 0.14x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 175334055
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-21T17:42:43 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3087
# Exec time      1      8s    81us   122ms     3ms    13ms     8ms   403us
# Lock time      0   161ms       0    31ms    52us     1us   914us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 674.91k     217     229  223.88  223.14    5.27  212.52
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ######################
#  10ms  ######
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (7111606030710043330, 8575889345, 'f960812a-157f-4fc9-9225-68b7dcaaa66a', 1, 1661708614, 1661708614, 1661709214)\G

# Query 19: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650826
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-21T17:42:42
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      1      8s      8s      8s      8s      8s       0      8s
# Lock time      0     2us     2us     2us     2us     2us       0     2us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s  ################################################################
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 20: 162.38 QPS, 0.10x concurrency, ID 0x0B3509236B570F5C5FE423B079765901 at byte 173843490
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-21T17:42:43 to 2023-11-21T17:43:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9743
# Exec time      0      6s    46us    92ms   623us     2ms     3ms   125us
# Lock time      0    43ms       0     9ms     4us     1us   124us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1   1.70M     176     194  182.66  183.58    4.24  174.84
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##############################
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO user_cards(id, user_id, card_id, amount_per_sec, level, total_exp, created_at, updated_at) VALUES (7111606030710041595, 7111606030710041588, 2, 1, 1, 0, 1661708614, 1661708614)\G
