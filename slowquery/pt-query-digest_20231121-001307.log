
# 25.3s user time, 130ms system time, 54.31M rss, 390.00G vsz
# Current date: Mon Nov 20 23:55:01 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 679.08k total, 178 unique, 6.72k QPS, 4.97x concurrency _______
# Time range: 2023-11-20T14:52:04 to 2023-11-20T14:53:45
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           502s     1us     21s   739us     2ms    26ms    63us
# Lock time            16s       0   876ms    24us     1us     2ms       0
# Rows sent        343.39k       0    1012    0.52    0.99    3.32       0
# Rows examine       7.50M       0  22.27k   11.58   12.54   90.68       0
# Query size       109.31M       6 1008.95k  168.78  192.76   9.99k   31.70

# Profile
# Rank Query ID                            Response time Calls  R/Call  V/
# ==== =================================== ============= ====== ======= ==
#    1 0x611363ACBD1690538F137757E45B738C  84.5221 16.8%   1394  0.0606  0.20 SELECT user_presents
#    2 0x3FFFD39D9DB10329B174042FE1810238  60.2692 12.0%  31491  0.0019  0.02 UPDATE user_presents
#    3 0xDA556F9115773A1A99AA0165670CE848  33.9286  6.8% 219573  0.0002  0.00 ADMIN PREPARE
#    4 0xF0F3320DE1260EAD27BC0426FCB34A4D  33.6955  6.7%   1394  0.0242  0.20 SELECT user_presents
#    5 0xFFFCA4D67EA0A788813031B8BBC3B329  32.6508  6.5%   4145  0.0079  0.00 COMMIT
#    6 0x03FFA53B9AEA23779E51FE7DD3DC165E  28.7561  5.7%  23306  0.0012  0.01 INSERT user_presents
#    7 0x1049606E13674A053E0CC69500F839DC  26.3869  5.3%   1345  0.0196  0.02 UPDATE user_one_time_tokens
#    8 0xC20D9D224412E78025DDB691D46B02B6  25.3245  5.0%  16265  0.0016  0.01 SELECT user_items
#    9 0x79A889ED30BFA8BF517F86F6D70065B6  21.0830  4.2%      1 21.0830  0.00 LOAD DATA user_presents
#   10 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A  12.8121  2.6%   1355  0.0095  0.00 INSERT user_one_time_tokens
#   11 0x2096778F723F6666B5D7DDC9D01010C7  10.3859  2.1%     46  0.2258  0.01 INSERT user_cards
#   12 0x584D7D428BA6602840353479CEB359A1   8.9360  1.8%   4794  0.0019  0.01 SELECT user_devices
#   13 0x8CA5C26DA1F53D285B58FE47352DA00A   8.7550  1.7%   7785  0.0011  0.00 SELECT user_sessions
#   14 0x75C006C72A2DD00658309A1A758E1BB6   8.4555  1.7%    906  0.0093  0.01 UPDATE users
#   15 0xE3341326DCBBC41D81C9550FEAE6F248   8.0886  1.6%   1178  0.0069  0.03 SELECT user_present_all_received_history
#   16 0xD858CC1645CE084FE3844E34483B662E   7.9264  1.6%  14083  0.0006  0.01 UPDATE users
#   17 0x2372FB123B18A108CFBB5352F61B370B   7.5600  1.5%  18793  0.0004  0.00 SELECT users
#   18 0xED0711EB833D06BBD84F496A9784760B   7.4918  1.5%  15291  0.0005  0.00 UPDATE user_items
#   19 0x41CEDDDAFB6289B60E5F30D0462408DB   6.1510  1.2%  12146  0.0005  0.01 INSERT user_present_all_received_history
#   20 0x5FF17CFE4371C68C8E9D993D1C94471F   5.9901  1.2%   1179  0.0051  0.23 INSERT user_sessions
# MISC 0xMISC                              63.1768 12.6% 302609  0.0002   0.0 <158 ITEMS>

# Query 1: 23.23 QPS, 1.41x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 232855550
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.20
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1394
# Exec time     16     85s   157us      1s    61ms   266ms   110ms    10ms
# Lock time      0     6ms       0     2ms     4us     1us    67us     1us
# Rows sent      8  30.83k       0      67   22.64   36.69   10.29   22.53
# Rows examine   4 372.96k      47     695  273.97  652.75  233.00  124.25
# Query size     0 179.80k     127     138  132.08  136.99    5.50  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #####################################################
#   1ms  ########################################################
#  10ms  ################################################################
# 100ms  ##############################################
#    1s  #
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 2673099039 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 2: 516.25 QPS, 0.99x concurrency, ID 0x3FFFD39D9DB10329B174042FE1810238 at byte 232114758
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:45
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   31491
# Exec time     11     60s    60us   256ms     2ms     9ms     6ms   194us
# Lock time      0    42ms       0     3ms     1us     1us    19us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  30.75k       1       1       1       1       0       1
# Query size     2   2.81M      82      98   93.47   97.36    4.79   88.31
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ########
# 100us  ################################################################
#   1ms  ##################
#  10ms  ####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661698415, updated_at=1661698415 WHERE id=3181710168010335156\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661698415, updated_at=1661698415 from user_presents where  id=3181710168010335156\G

# Query 3: 3.60k QPS, 0.56x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 232886286
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:45
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         32  219573
# Exec time      6     34s    16us    22ms   154us   541us   311us    66us
# Lock time      0    20us       0     3us       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     5   6.28M      30      30      30      30       0      30
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ########################
#   1ms  ##
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 4: 23.23 QPS, 0.56x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 234281150
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.20
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1394
# Exec time      6     34s   112us   684ms    24ms   110ms    70ms     3ms
# Lock time      0     5ms       0     2ms     3us     1us    65us     1us
# Rows sent      0   1.36k       1       1       1       1       0       1
# Rows examine   4 342.13k      27     662  251.32  621.67  228.84  118.34
# Query size     0 118.54k      82      93   87.08   92.72    5.50   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #########################################################
#   1ms  ################################################################
#  10ms  #########################################
# 100ms  ##########
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 4398120550 AND deleted_at IS NULL\G

# Query 5: 67.95 QPS, 0.54x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 164640078
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:45
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4145
# Exec time      6     33s     3ms   104ms     8ms    15ms     5ms     7ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  24.29k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ##################
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 6: 382.07 QPS, 0.47x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 232028406
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:45
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   23306
# Exec time      5     29s    47us   130ms     1ms     6ms     4ms   138us
# Lock time      0    39ms       0     2ms     1us     1us    25us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     5   5.62M     243     272  252.94  258.32    6.64  246.02
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############################
# 100us  ################################################################
#   1ms  ##############
#  10ms  ###
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (3181710168010337341, 7550715142, 1661698417, 1, 1, 2000, '１９ヶ月突破プレゼントです！', 1661698417, 1661698417)\G

# Query 7: 22.42 QPS, 0.44x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 234022233
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1345
# Exec time      5     26s     3ms   226ms    20ms    61ms    21ms    12ms
# Lock time     59     10s       0   141ms     7ms    38ms    17ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine  11 889.22k       1   1.32k  677.00   1.20k  380.81  652.75
# Query size     0 136.60k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ######################################
#  10ms  ################################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661698418 WHERE token='bdcad436-0585-4b06-9f3c-69ff5c07e790'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661698418 from user_one_time_tokens where  token='bdcad436-0585-4b06-9f3c-69ff5c07e790'\G

# Query 8: 266.64 QPS, 0.42x concurrency, ID 0xC20D9D224412E78025DDB691D46B02B6 at byte 164906435
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:45
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   16265
# Exec time      5     25s    63us   189ms     2ms     7ms     4ms   287us
# Lock time      0    25ms       0   634us     1us     1us    12us     1us
# Rows sent      4  14.71k       0       1    0.93    0.99    0.26    0.99
# Rows examine   2 191.88k       0      14   12.08   13.83    3.58   13.83
# Query size     0   1.01M      62      73   64.93   72.65    3.18   62.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##
# 100us  ################################################################
#   1ms  ###############
#  10ms  ##
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_items WHERE user_id=1383961563 AND item_id=17\G

# Query 9: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650770
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-20T14:52:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      4     21s     21s     21s     21s     21s       0     21s
# Lock time      0     3us     3us     3us     3us     3us       0     3us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 10: 22.58 QPS, 0.21x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 161147854
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1355
# Exec time      2     13s     3ms    67ms     9ms    21ms     7ms     7ms
# Lock time      8      1s       0    40ms   989us     7ms     3ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 295.23k     218     229  223.11  223.14    5.08  212.52
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (3181710168010319304, 3181710168010318524, '1ae383ff-741e-400d-b6d9-a67d13224913', 1, 1661698394, 1661698394, 1661698994)\G

# Query 11: 4.18 QPS, 0.94x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 241562
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:52:05 to 2023-11-20T14:52:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      2     10s   173ms   394ms   226ms   323ms    50ms   208ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    41  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (1042148,9904038980,6,720,36,5336,1639932222,1639932222,NULL) /*... omitted ...*/\G

# Query 12: 79.90 QPS, 0.15x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 233793486
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4794
# Exec time      1      9s    90us   110ms     2ms     9ms     5ms   247us
# Lock time      0    13ms       0     2ms     2us     1us    39us     1us
# Rows sent      1   4.68k       1       1       1       1       0       1
# Rows examine   0   4.68k       1       1       1       1       0       1
# Query size     0 372.74k      74      86   79.62   84.10    3.58   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ####################
#  10ms  ###
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=4067572258 AND platform_id='9782611'\G

# Query 13: 129.75 QPS, 0.15x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 138798536
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    7785
# Exec time      1      9s    67us    51ms     1ms     3ms     2ms   626us
# Lock time      0    15ms       0     1ms     1us     1us    18us     1us
# Rows sent      2   7.60k       0       1    1.00    0.99    0.01    0.99
# Rows examine  56   4.24M       4   1.14k  571.55   1.04k  330.51  563.87
# Query size     0 805.84k      81     106  106.00  102.22    0.25  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##
# 100us  ################################################################
#   1ms  ##########################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='a9f134aa-1363-439e-9739-7e84144e85d3' AND deleted_at IS NULL\G

# Query 14: 15.10 QPS, 0.14x concurrency, ID 0x75C006C72A2DD00658309A1A758E1BB6 at byte 164640287
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     906
# Exec time      1      8s     2ms   101ms     9ms    19ms     7ms     7ms
# Lock time      0     1ms       0   284us     1us     1us     9us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0     906       1       1       1       1       0       1
# Query size     0  75.46k      83      87   85.29   84.10    1.06   84.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ##############################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=8418996611, last_getreward_at=1661698395 WHERE id=632073353\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=8418996611, last_getreward_at=1661698395 from users where  id=632073353\G

# Query 15: 19.63 QPS, 0.13x concurrency, ID 0xE3341326DCBBC41D81C9550FEAE6F248 at byte 180324835
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1178
# Exec time      1      8s   213us    92ms     7ms    40ms    13ms     1ms
# Lock time      0     1ms       0    69us     1us     1us     3us     1us
# Rows sent      5  20.33k       0      28   17.67   26.08   10.38   26.08
# Rows examine   0  20.33k       0      28   17.67   26.08   10.38   26.08
# Query size     0 229.73k     193     208  199.70  202.40    3.97  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ########################################################
#   1ms  ################################################################
#  10ms  ########################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=5710041512 AND present_all_id IN (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29)\G

# Query 16: 230.87 QPS, 0.13x concurrency, ID 0xD858CC1645CE084FE3844E34483B662E at byte 136093111
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:45
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   14083
# Exec time      1      8s    57us    57ms   562us     2ms     2ms   131us
# Lock time      0    23ms       0     2ms     1us     1us    26us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  13.75k       1       1       1       1       0       1
# Query size     0 798.42k      49      60   58.05   59.77    2.75   56.92
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #####################
# 100us  ################################################################
#   1ms  ########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=30500 WHERE id=3181710168010312248\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=30500 from users where  id=3181710168010312248\G

# Query 17: 308.08 QPS, 0.12x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 233846831
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:45
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   18793
# Exec time      1      8s    30us    40ms   402us     2ms     1ms   103us
# Lock time      0    29ms       0     1ms     1us     1us    17us     1us
# Rows sent      5  18.35k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  18.35k       0       1    1.00    0.99    0.01    0.99
# Query size     0 791.38k      33      48   43.12   46.83    4.25   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############################################################
# 100us  ################################################################
#   1ms  ########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=8422144333\G

# Query 18: 250.67 QPS, 0.12x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 136065504
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:45
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   15291
# Exec time      1      7s    60us    52ms   489us     2ms     1ms   138us
# Lock time      0    24ms       0     3ms     1us     1us    27us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  14.93k       1       1       1       1       0       1
# Query size     1   1.10M      71      82   75.45   80.10    1.88   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############
# 100us  ################################################################
#   1ms  #######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=24, updated_at=1661698385 WHERE id=14329123876\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=24, updated_at=1661698385 from user_items where  id=14329123876\G

# Query 19: 199.11 QPS, 0.10x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 173412581
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:45
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1   12146
# Exec time      1      6s    41us    64ms   506us     2ms     2ms   108us
# Lock time      0    17ms       0   685us     1us     1us    12us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     2   2.28M     190     201  197.00  192.76    4.53  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ########################################################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (3181710168010322720, 2305428565, 24, 1661698398, 1661698398, 1661698398)\G

# Query 20: 19.65 QPS, 0.10x concurrency, ID 0x5FF17CFE4371C68C8E9D993D1C94471F at byte 245889725
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.23
# Time range: 2023-11-20T14:52:44 to 2023-11-20T14:53:44
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1179
# Exec time      1      6s    57us   877ms     5ms     8ms    34ms   194us
# Lock time     25      4s       0   876ms     4ms     1us    34ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 235.86k     201     212  204.85  202.40    2.64  202.40
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################
# 100us  ################################################################
#   1ms  #############################
#  10ms  ###
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
INSERT INTO user_sessions(id, user_id, session_id, created_at, updated_at, expired_at) VALUES (3181710168010340420, 9956306436, '26c7e375-d9ff-4958-85bb-b2a8cc3d7cf5', 1661698421, 1661698421, 1661784821)\G
