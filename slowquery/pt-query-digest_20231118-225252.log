
# 1.1s user time, 30ms system time, 53.36M rss, 390.11G vsz
# Current date: Sat Nov 18 22:28:33 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 18.88k total, 179 unique, 157.30 QPS, 5.23x concurrency _______
# Time range: 2023-11-18T13:26:22 to 2023-11-18T13:28:22
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           627s     1us     22s    33ms   134ms   282ms    73us
# Lock time            77s       0     16s     4ms     1us   199ms       0
# Rows sent          8.07k       0    1012    0.44    0.99    7.51       0
# Rows examine     266.39M       0 236.27k  14.45k 233.54k  55.97k       0
# Query size        74.02M       6 1008.95k   4.02k  166.51  59.78k   31.70

# Profile
# Rank Query ID                            Response time  Calls R/Call  V/
# ==== =================================== ============== ===== ======= ==
#    1 0x8267197805BC46534E450B6529CB3B76  502.8141 80.2%  1154  0.4357  0.20 SELECT user_present_all_received_history
#    2 0x5FF17CFE4371C68C8E9D993D1C94471F   76.1198 12.1%    47  1.6196  8.29 INSERT user_sessions
#    3 0x79A889ED30BFA8BF517F86F6D70065B6   22.3329  3.6%     1 22.3329  0.00 LOAD DATA user_presents
# MISC 0xMISC                               25.9904  4.1% 17674  0.0015   0.0 <176 ITEMS>

# Query 1: 14.43 QPS, 6.29x concurrency, ID 0x8267197805BC46534E450B6529CB3B76 at byte 81456125
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.20
# Time range: 2023-11-18T13:27:02 to 2023-11-18T13:28:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6    1154
# Exec time     80    503s    55ms   977ms   436ms   945ms   297ms   323ms
# Lock time      0     1ms       0    20us       0     1us       0     1us
# Rows sent      8     741       0       2    0.64    0.99    0.49    0.99
# Rows examine  99 266.13M 235.97k 236.27k 236.15k 233.54k       0 233.54k
# Query size     0 103.59k      87      94   91.92   92.72    3.19   92.72
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  #######
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=1755114154 AND present_all_id=27\G

# Query 2: 0.62 QPS, 1.00x concurrency, ID 0x5FF17CFE4371C68C8E9D993D1C94471F at byte 80909273
# This item is included in the report because it matches --limit.
# Scores: V/M = 8.29
# Time range: 2023-11-18T13:27:02 to 2023-11-18T13:28:18
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      47
# Exec time     12     76s    64us     16s      2s      7s      4s   119us
# Lock time     98     76s       0     16s      2s      7s      4s     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0   8.60k     182     189  187.47  183.58    2.14  183.58
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ######################
# 100us  ################################################################
#   1ms  #############
#  10ms  #####
# 100ms
#    1s  ###################
#  10s+  #####
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
INSERT INTO user_sessions(id, user_id, session_id, created_at, updated_at, expired_at) VALUES (10545, 3535197101, '739ca59f-988f-4960-8b9b-c4e0fb256b88', 1661693269, 1661693269, 1661779669)\G

# Query 3: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650700
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-18T13:27:02
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      3     22s     22s     22s     22s     22s       0     22s
# Lock time      0     2us     2us     2us     2us     2us       0     2us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G
