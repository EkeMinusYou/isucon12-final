
# 19.2s user time, 120ms system time, 54.36M rss, 390.13G vsz
# Current date: Tue Nov 21 03:49:34 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 505.46k total, 181 unique, 5.55k QPS, 5.09x concurrency _______
# Time range: 2023-11-20T18:47:10 to 2023-11-20T18:48:41
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           463s     1us     21s   916us     2ms    30ms    63us
# Lock time            19s       0   144ms    37us     1us     1ms       0
# Rows sent        306.54k       0    1012    0.62    0.99    3.74       0
# Rows examine       6.67M       0   2.62k   13.84   10.84   93.80       0
# Query size       101.68M       6 1008.95k  210.94  212.52  11.57k   31.70

# Profile
# Rank Query ID                            Response time Calls  R/Call  V/
# ==== =================================== ============= ====== ======= ==
#    1 0x611363ACBD1690538F137757E45B738C  87.7877 19.0%   1314  0.0668  0.16 SELECT user_presents
#    2 0xFFFCA4D67EA0A788813031B8BBC3B329  36.2005  7.8%   3905  0.0093  0.00 COMMIT
#    3 0x03FFA53B9AEA23779E51FE7DD3DC165E  32.8673  7.1%  21406  0.0015  0.02 INSERT user_presents
#    4 0x3FFFD39D9DB10329B174042FE1810238  32.1761  6.9%  14188  0.0023  0.02 UPDATE user_presents
#    5 0x1049606E13674A053E0CC69500F839DC  31.4436  6.8%   1276  0.0246  0.03 UPDATE user_one_time_tokens
#    6 0xF0F3320DE1260EAD27BC0426FCB34A4D  29.7587  6.4%   1314  0.0226  0.12 SELECT user_presents
#    7 0xDA556F9115773A1A99AA0165670CE848  23.0448  5.0% 162052  0.0001  0.00 ADMIN PREPARE
#    8 0x79A889ED30BFA8BF517F86F6D70065B6  21.2379  4.6%      1 21.2379  0.00 LOAD DATA user_presents
#    9 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A  14.6424  3.2%   1278  0.0115  0.01 INSERT user_one_time_tokens
#   10 0xE3341326DCBBC41D81C9550FEAE6F248  10.8057  2.3%   1118  0.0097  0.03 SELECT user_present_all_received_history
#   11 0x2096778F723F6666B5D7DDC9D01010C7  10.4494  2.3%     46  0.2272  0.01 INSERT user_cards
#   12 0x584D7D428BA6602840353479CEB359A1   9.3615  2.0%   4542  0.0021  0.01 SELECT user_devices
#   13 0x75C006C72A2DD00658309A1A758E1BB6   9.3362  2.0%    868  0.0108  0.01 UPDATE users
#   14 0x8CA5C26DA1F53D285B58FE47352DA00A   8.4450  1.8%   7349  0.0011  0.00 SELECT user_sessions
#   15 0x2372FB123B18A108CFBB5352F61B370B   7.8673  1.7%  16899  0.0005  0.01 SELECT users
#   16 0xD858CC1645CE084FE3844E34483B662E   6.7737  1.5%  12528  0.0005  0.01 UPDATE users
#   17 0x41CEDDDAFB6289B60E5F30D0462408DB   6.1835  1.3%  10806  0.0006  0.01 INSERT user_present_all_received_history
#   18 0xED0711EB833D06BBD84F496A9784760B   6.0217  1.3%  13357  0.0005  0.00 UPDATE user_items
#   19 0x6E790EE92EFF4755B6E0FA83F9CA8363   5.8110  1.3%   1065  0.0055  0.02 UPDATE user_presents
#   20 0x50395CBB44EFB941B9A1D04B28581D9F   5.6541  1.2%   1065  0.0053  0.02 SELECT user_items
# MISC 0xMISC                              67.3287 14.5% 229081  0.0003   0.0 <161 ITEMS>

# Query 1: 25.76 QPS, 1.72x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 207963630
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.16
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1314
# Exec time     18     88s   147us   733ms    67ms   293ms   103ms    11ms
# Lock time      0     2ms       0   208us     1us     1us     7us     1us
# Rows sent      9  28.28k       0      72   22.04   36.69    9.95   22.53
# Rows examine   5 357.65k      47     686  278.72  652.75  236.41  130.47
# Query size     0 169.37k     127     138  131.99  136.99    5.50  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #######################################################
#   1ms  ############################################################
#  10ms  ################################################################
# 100ms  #############################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 1140315315 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 2: 76.57 QPS, 0.71x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 155564522
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    3905
# Exec time      7     36s     2ms   129ms     9ms    19ms     7ms     8ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  22.88k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###############################
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 3: 419.73 QPS, 0.64x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 201297504
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   21406
# Exec time      7     33s    47us   124ms     2ms     8ms     5ms   131us
# Lock time      0    29ms       0     1ms     1us     1us    13us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     5   5.16M     243     272  252.89  258.32    6.54  246.02
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##################################
# 100us  ################################################################
#   1ms  ###############
#  10ms  #####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (1561416901092924794, 6676176457, 1661712517, 1, 1, 6000, '２.５周年プレゼントです！', 1661712517, 1661712517)\G

# Query 4: 278.20 QPS, 0.63x concurrency, ID 0x3FFFD39D9DB10329B174042FE1810238 at byte 155538251
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   14188
# Exec time      6     32s    67us   141ms     2ms    12ms     7ms   185us
# Lock time      0    19ms       0     2ms     1us     1us    22us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  13.86k       1       1       1       1       0       1
# Query size     1   1.30M      83      98   96.21   97.36    3.81   97.36
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###########
# 100us  ################################################################
#   1ms  #################
#  10ms  ######
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661712501, updated_at=1661712501 WHERE id=1561416901092910041\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661712501, updated_at=1661712501 from user_presents where  id=1561416901092910041\G

# Query 5: 25.52 QPS, 0.63x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 155563053
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:40
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1276
# Exec time      6     31s     3ms   200ms    25ms    87ms    26ms    14ms
# Lock time     80     15s       0   142ms    12ms    71ms    23ms    52us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine  11 798.86k       1   1.25k  641.09   1.14k  360.55  621.67
# Query size     0 129.59k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################
#  10ms  ################################################################
# 100ms  ####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661712501 WHERE token='175572a5-162f-481b-b0fd-2c51e9df471f'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661712501 from user_one_time_tokens where  token='175572a5-162f-481b-b0fd-2c51e9df471f'\G

# Query 6: 25.76 QPS, 0.58x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 209209872
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.12
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1314
# Exec time      6     30s   115us   486ms    23ms   128ms    52ms     3ms
# Lock time      0     3ms       0     1ms     2us     1us    29us     1us
# Rows sent      0   1.28k       1       1       1       1       0       1
# Rows examine   4 329.37k      27     662  256.68  621.67  231.87  118.34
# Query size     0 111.63k      82      93   86.99   92.72    5.50   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #######################################################
#   1ms  ################################################################
#  10ms  #########################################
# 100ms  ############
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 1140315315 AND deleted_at IS NULL\G

# Query 7: 3.18k QPS, 0.45x concurrency, ID 0xDA556F9115773A1A99AA0165670CE848 at byte 189220284
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         32  162052
# Exec time      4     23s    16us    15ms   142us   490us   288us    63us
# Lock time      0    39us       0    22us       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     4   4.64M      30      30      30      30       0      30
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #####################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
administrator command: Prepare\G

# Query 8: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650768
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-20T18:47:50
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      4     21s     21s     21s     21s     21s       0     21s
# Lock time      0     2us     2us     2us     2us     2us       0     2us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 9: 25.56 QPS, 0.29x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 128411929
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:40
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1278
# Exec time      3     15s     3ms    97ms    11ms    28ms     9ms     8ms
# Lock time      8      2s       0    42ms     1ms     8ms     4ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 278.32k     218     229  223.01  223.14    5.04  212.52
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###############################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (1561416901092901960, 1561416901092901430, '5e9ed290-df3b-48d8-b962-29fa857db72f', 1, 1661712491, 1661712491, 1661713091)\G

# Query 10: 22.36 QPS, 0.22x concurrency, ID 0xE3341326DCBBC41D81C9550FEAE6F248 at byte 134916686
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.03
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:40
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1118
# Exec time      2     11s   205us   123ms    10ms    46ms    17ms     2ms
# Lock time      0     2ms       0   630us     1us     1us    18us     1us
# Rows sent      6  19.90k       0      28   18.23   26.08   10.33   26.08
# Rows examine   0  19.90k       0      28   18.23   26.08   10.33   26.08
# Query size     0 217.64k     193     208  199.34  202.40    3.90  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #####################################################
#   1ms  ################################################################
#  10ms  ###################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_present_all_received_history WHERE user_id=1745473183 AND present_all_id IN (1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29)\G

# Query 11: 4.18 QPS, 0.95x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 241562
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:47:11 to 2023-11-20T18:47:22
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      2     10s   176ms   385ms   227ms   293ms    43ms   208ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    44  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (1042148,9904038980,6,720,36,5336,1639932222,1639932222,NULL) /*... omitted ...*/\G

# Query 12: 90.84 QPS, 0.19x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 197789164
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:40
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4542
# Exec time      2      9s    83us    50ms     2ms    10ms     4ms   236us
# Lock time      0    10ms       0     1ms     2us     1us    21us     1us
# Rows sent      1   4.44k       1       1       1       1       0       1
# Rows examine   0   4.44k       1       2    1.00    0.99    0.03    0.99
# Query size     0 353.07k      75      86   79.60   84.10    3.51   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #####################
#  10ms  #####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=2573386456 AND platform_id='6947703'\G

# Query 13: 17.36 QPS, 0.19x concurrency, ID 0x75C006C72A2DD00658309A1A758E1BB6 at byte 155561843
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:40
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     868
# Exec time      2      9s     2ms   144ms    11ms    23ms     9ms     8ms
# Lock time      0     1ms       0    74us     1us     1us     3us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0     868       1       1       1       1       0       1
# Query size     0  72.29k      83      87   85.28   84.10    0.92   84.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ##############################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=7668808772, last_getreward_at=1661712501 WHERE id=1868588956\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=7668808772, last_getreward_at=1661712501 from users where  id=1868588956\G

# Query 14: 146.98 QPS, 0.17x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 138196625
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:40
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    7349
# Exec time      1      8s    67us    54ms     1ms     4ms     2ms   626us
# Lock time      0    16ms       0     3ms     2us     1us    33us     1us
# Rows sent      2   7.18k       0       1    1.00    0.99    0.01    0.99
# Rows examine  57   3.85M       4   1.09k  549.81 1012.63  317.94  537.02
# Query size     0 760.71k      81     106  106.00  102.22    0.26  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##
# 100us  ################################################################
#   1ms  #######################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='24af5d21-a214-4551-92f1-04ea8870529f' AND deleted_at IS NULL\G

# Query 15: 331.35 QPS, 0.15x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 155556930
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   16899
# Exec time      1      8s    37us    63ms   465us     2ms     2ms   103us
# Lock time      0    33ms       0     4ms     1us     1us    35us     1us
# Rows sent      5  16.50k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  16.50k       0       1    1.00    0.99    0.01    0.99
# Query size     0 711.80k      32      48   43.13   46.83    4.24   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###############################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=6667808393\G

# Query 16: 245.65 QPS, 0.13x concurrency, ID 0xD858CC1645CE084FE3844E34483B662E at byte 155554232
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   12528
# Exec time      1      7s    60us   137ms   540us     2ms     2ms   125us
# Lock time      0    16ms       0     2ms     1us     1us    18us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  12.23k       1       1       1       1       0       1
# Query size     0 710.33k      48      60   58.06   59.77    2.76   59.77
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########################
# 100us  ################################################################
#   1ms  #######
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=7697951028 WHERE id=3322779133\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=7697951028 from users where  id=3322779133\G

# Query 17: 216.12 QPS, 0.12x concurrency, ID 0x41CEDDDAFB6289B60E5F30D0462408DB at byte 162405549
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:40
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   10806
# Exec time      1      6s    40us    55ms   572us     2ms     2ms    98us
# Lock time      0    16ms       0     1ms     1us     1us    20us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1   2.03M     190     201  197.06  192.76    4.52  192.76
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #############################################################
#   1ms  #########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_present_all_received_history'\G
#    SHOW CREATE TABLE `isucon`.`user_present_all_received_history`\G
INSERT INTO user_present_all_received_history(id, user_id, present_all_id, received_at, created_at, updated_at) VALUES (1561416901092912578, 1561416901092912478, 1, 1661712504, 1661712504, 1661712504)\G

# Query 18: 261.90 QPS, 0.12x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 191030418
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2   13357
# Exec time      1      6s    60us    43ms   450us     2ms     1ms   131us
# Lock time      0    16ms       0   823us     1us     1us    13us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  13.04k       1       1       1       1       0       1
# Query size     0 979.49k      72      82   75.09   72.65    0.95   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ######################
# 100us  ################################################################
#   1ms  ######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=51, updated_at=1661712514 WHERE id=20464847781\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=51, updated_at=1661712514 from user_items where  id=20464847781\G

# Query 19: 20.88 QPS, 0.11x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 175796612
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1065
# Exec time      1      6s   139us    87ms     5ms    26ms    11ms     1ms
# Lock time      0     1ms       0   106us     1us     1us     4us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0  13.90k       4      48   13.36   20.43    5.04   13.83
# Query size     0 277.54k     134     697  266.86  346.17   56.23  258.32
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ##################################################
#  10ms  ####################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661712508, updated_at=1661712508 WHERE id IN (2405027373, 6690557373, 31958638105, 44298646020, 44840848489, 49927677557, 50676445267, 65227028673, 67106987802, 70907509714, 71534563292, 74195900551, 82886855148, 95241324102, 96897968139)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661712508, updated_at=1661712508 from user_presents where  id IN (2405027373, 6690557373, 31958638105, 44298646020, 44840848489, 49927677557, 50676445267, 65227028673, 67106987802, 70907509714, 71534563292, 74195900551, 82886855148, 95241324102, 96897968139)\G

# Query 20: 20.88 QPS, 0.11x concurrency, ID 0x50395CBB44EFB941B9A1D04B28581D9F at byte 141952025
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-20T18:47:50 to 2023-11-20T18:48:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1065
# Exec time      1      6s    78us    87ms     5ms    27ms    11ms   657us
# Lock time      0     1ms       0    41us     1us     1us     2us     1us
# Rows sent      1   5.01k       0      11    4.82    8.91    2.81    5.75
# Rows examine   0  10.78k       0      14   10.36   13.83    5.27   12.54
# Query size     0 125.02k      81     257  120.21  143.84   19.10  118.34
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###
# 100us  ################################################################
#   1ms  ###################################
#  10ms  ####################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_items WHERE user_id=4138097531 AND item_id IN (20, 24, 18, 17, 19, 21, 17, 17, 21, 17, 21, 21, 18, 17, 17, 22, 18, 17, 18, 17, 21, 23)\G
