
# 13.6s user time, 90ms system time, 59.78M rss, 390.00G vsz
# Current date: Thu Nov 23 19:20:05 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 320.33k total, 178 unique, 3.34k QPS, 4.82x concurrency _______
# Time range: 2023-11-23T10:17:27 to 2023-11-23T10:19:03
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           462s     1us     15s     1ms     5ms    27ms   194us
# Lock time             3s       0   193ms     8us     1us   612us     1us
# Rows sent        791.33k       0    1012    2.53   26.08    7.09    0.99
# Rows examine       1.87M       0    1012    6.11   42.48   14.05    0.99
# Query size       113.67M       6 1008.95k  372.11  381.65  14.54k   69.19

# Profile
# Rank Query ID                            Response time  Calls  R/Call  V
# ==== =================================== ============== ====== ======= =
#    1 0x6E790EE92EFF4755B6E0FA83F9CA8363   82.2991 17.8%   3919  0.0210  0.05 UPDATE user_presents
#    2 0x03FFA53B9AEA23779E51FE7DD3DC165E   33.5081  7.2%   5741  0.0058  0.02 INSERT user_presents
#    3 0xE89B4FB5E77ED142BEAF8C3B369FA2FE   21.9659  4.8%   3919  0.0056  0.02 SELECT user_presents
#    4 0xFFFCA4D67EA0A788813031B8BBC3B329   21.1859  4.6%  11765  0.0018  0.02 COMMIT
#    5 0x611363ACBD1690538F137757E45B738C   21.1422  4.6%   3938  0.0054  0.01 SELECT user_presents
#    6 0x8CA5C26DA1F53D285B58FE47352DA00A   18.9680  4.1%  21796  0.0009  0.01 SELECT user_sessions
#    7 0x162DA0A184B905E35E1254C1FDBF900B   18.4963  4.0%   6183  0.0030  0.02 SELECT user_cards
#    8 0x79A889ED30BFA8BF517F86F6D70065B6   15.1526  3.3%      1 15.1526  0.00 LOAD DATA user_presents
#    9 0xBC551EACF5A3BE27E3F2CC3C5133F3D5   14.7439  3.2%  12202  0.0012  0.01 SELECT gacha_item_masters
#   10 0x07D5CE9B533D56A3B70C17C590E82A7F   14.5894  3.2%  25572  0.0006  0.01 SELECT version_masters
#   11 0x2372FB123B18A108CFBB5352F61B370B   13.3090  2.9%  22177  0.0006  0.01 SELECT users
#   12 0xAB2AB35C6EFA17C04018A132A84A16C9   12.5896  2.7%  24660  0.0005  0.00 SELECT user_bans
#   13 0x584D7D428BA6602840353479CEB359A1   12.1969  2.6%  13124  0.0009  0.01 SELECT user_devices
#   14 0x0B3509236B570F5C5FE423B079765901   10.7843  2.3%  15679  0.0007  0.01 INSERT user_cards
#   15 0x975F0A7CC9BCA46BBC7DAD888BA0794F   10.0382  2.2%  14953  0.0007  0.01 SELECT item_masters
#   16 0x2096778F723F6666B5D7DDC9D01010C7   10.0234  2.2%     46  0.2179  0.05 INSERT user_cards
#   17 0x1049606E13674A053E0CC69500F839DC    8.9331  1.9%   3863  0.0023  0.01 UPDATE user_one_time_tokens
#   18 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A    8.4441  1.8%   3889  0.0022  0.01 INSERT user_one_time_tokens
#   19 0xE63C5805E48DA98A0AD3A20E4E0B9976    7.1042  1.5%   9474  0.0007  0.00 SELECT user_login_bonuses
#   20 0xD858CC1645CE084FE3844E34483B662E    6.6072  1.4%   9957  0.0007  0.01 UPDATE users
# MISC 0xMISC                              100.2102 21.7% 107470  0.0009   0.0 <158 ITEMS>

# Query 1: 65.32 QPS, 1.37x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 165459064
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-23T10:18:03 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3919
# Exec time     17     82s   170us   413ms    21ms    87ms    31ms     8ms
# Lock time      0    11ms       0     1ms     2us     1us    32us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   5  99.24k       1      64   25.93   46.83   11.73   26.08
# Query size     1   1.49M      93     887  398.37  652.75  145.92  400.73
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ###########
#   1ms  ################################################################
#  10ms  #######################################################
# 100ms  #####
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661681932, updated_at=1661681932 WHERE id IN (63635601, 301728385, 390600783, 538011662, 712483350, 896978813, 1082670523, 1205306564, 1317346064, 1338490366, 1543049834, 2203910757, 2246838912, 2370341262, 2613125991, 2633105826, 2735029986, 2886895811, 2979352910, 3022460194, 3119104332, 3396945067, 3606598132, 3651990366, 4160616517, 9502030837, 12098894782, 12396205269, 15999574553, 28157155415, 33651860377, 39053745931, 39117180117, 46985402508, 47992781362, 50032036672, 50597832958, 51872960243, 55671461892, 55812033989, 62760345998, 63840968357, 64466348858, 71447727137, 76581281950, 77597896801, 84480723552, 84632352424, 85246056660)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661681932, updated_at=1661681932 from user_presents where  id IN (63635601, 301728385, 390600783, 538011662, 712483350, 896978813, 1082670523, 1205306564, 1317346064, 1338490366, 1543049834, 2203910757, 2246838912, 2370341262, 2613125991, 2633105826, 2735029986, 2886895811, 2979352910, 3022460194, 3119104332, 3396945067, 3606598132, 3651990366, 4160616517, 9502030837, 12098894782, 12396205269, 15999574553, 28157155415, 33651860377, 39053745931, 39117180117, 46985402508, 47992781362, 50032036672, 50597832958, 51872960243, 55671461892, 55812033989, 62760345998, 63840968357, 64466348858, 71447727137, 76581281950, 77597896801, 84480723552, 84632352424, 85246056660)\G

# Query 2: 94.11 QPS, 0.55x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 159350845
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-23T10:18:02 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    5741
# Exec time      7     34s    82us   139ms     6ms    26ms    11ms     2ms
# Lock time      0    23ms       0     6ms     4us     1us    93us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     7   8.14M     234   3.32k   1.45k   3.19k  896.06   1.26k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ###########################################
#   1ms  ################################################################
#  10ms  ####################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (4047810033, 3691187847, 1661681929, 1, 1, 3000, 'リリース記念プレゼントです！', 1661681929, 1661681929),(2065004512, 3691187847, 1661681929, 1, 1, 1000, '１ヶ月突破プレゼントです！', 1661681929, 1661681929),(526709598, 3691187847, 1661681929, 1, 1, 1000, '２ヶ月突破プレゼントです！', 1661681929, 1661681929),(2815801872, 3691187847, 1661681929, 1, 1, 2000, '３ヶ月突破プレゼントです！', 1661681929, 1661681929),(2301633390, 3691187847, 1661681929, 1, 1, 2000, '４ヶ月突破プレゼントです！', 1661681929, 1661681929),(320106382, 3691187847, 1661681929, 1, 1, 2000, '５ヶ月突破プレゼントです！', 1661681929, 1661681929),(2605973919, 3691187847, 1661681929, 1, 1, 3000, 'ハーフアニバーサリープレゼントです！', 1661681929, 1661681929),(3562673357, 3691187847, 1661681929, 1, 1, 2000, '７ヶ月突破プレゼントです！', 1661681929, 1661681929),(2456422345, 3691187847, 1661681929, 1, 1, 2000, '８ヶ月突破プレゼントです！', 1661681929, 1661681929),(2996321928, 3691187847, 1661681929, 1, 1, 2000, '９ヶ月突破プレゼントです！', 1661681929, 1661681929),(1424494423, 3691187847, 1661681929, 1, 1, 2000, '１０ヶ月突破プレゼントです！', 1661681929, 1661681929),(1487298491, 3691187847, 1661681929, 1, 1, 2000, '１１ヶ月突破プレゼントです！', 1661681929, 1661681929),(2908150693, 3691187847, 1661681929, 1, 1, 3000, '１周年突破プレゼントです！', 1661681929, 1661681929),(262665434, 3691187847, 1661681929, 1, 1, 6000, '周年記念プレゼントです！', 1661681929, 1661681929),(3614174642, 3691187847, 1661681929, 1, 1, 2000, '１３ヶ月突破プレゼントです！', 1661681929, 1661681929),(1154096010, 3691187847, 1661681929, 1, 1, 2000, '１４ヶ月突破プレゼントです！', 1661681929, 1661681929),(4154981441, 3691187847, 1661681929, 1, 1, 2000, '１５ヶ月突破プレゼントです１', 1661681929, 1661681929),(3257213516, 3691187847, 1661681929, 1, 1, 2000, '１６ヶ月突破プレゼントです！', 1661681929, 1661681929),(507879953, 3691187847, 1661681929, 1, 1, 2000, '１７ヶ月突破プレゼントです！', 1661681929, 1661681929),(4250937051, 3691187847, 1661681929, 1, 1, 2000, '１８ヶ月突破プレゼントです！', 1661681929, 1661681929),(3140034622, 3691187847, 1661681929, 1, 1, 2000, '１９ヶ月突破プレゼントです！', 1661681929, 1661681929),(1650610758, 3691187847, 1661681929, 1, 1, 2000, '２０ヶ月突破プレゼントです！', 1661681929, 1661681929),(679001593, 3691187847, 1661681929, 1, 1, 2000, '２１ヶ月プレゼントです！', 1661681929, 1661681929),(728459169, 3691187847, 1661681929, 1, 1, 2000, '２２ヶ月プレゼントです！', 1661681929, 1661681929),(244815442, 3691187847, 1661681929, 1, 1, 2000, '２３ヶ月プレゼントです！', 1661681929, 1661681929),(1131501624, 3691187847, 1661681929, 1, 1, 6000, '２周年記念プレゼントです！', 1661681929, 1661681929),(3335735892, 3691187847, 1661681929, 1, 1, 6000, '２.５周年プレゼントです！', 1661681929, 1661681929),(2933990114, 3691187847, 1661681929, 1, 1, 6000, 'CM放映記念プレゼントです！', 1661681929, 1661681929)\G

# Query 3: 65.32 QPS, 0.37x concurrency, ID 0xE89B4FB5E77ED142BEAF8C3B369FA2FE at byte 140751726
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-23T10:18:03 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3919
# Exec time      4     22s    95us   151ms     6ms    27ms    11ms   972us
# Lock time      0    18ms       0     4ms     4us     1us    70us     1us
# Rows sent     12  99.24k       1      64   25.93   46.83   11.73   26.08
# Rows examine   5  99.24k       1      64   25.93   46.83   11.73   26.08
# Query size     1   1.42M      74     868  379.37  621.67  145.85  381.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ############################################
#  10ms  #####################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents WHERE id IN (318301602, 873610885, 942083944, 1133996439, 1347230896, 1582484331, 1645768011, 1820760938, 1833194790, 2360198853, 2783679015, 3093622601, 3570198701, 3925974997, 4047185131, 289908939, 642426487, 797250698, 1487221771, 1902400432, 1937428147, 2206042129, 2897906675, 3314649942, 3363877321, 72237945472, 15140086390, 23047732981, 2870848416, 22812919658, 59984420797, 69066196694, 18980452755, 37581425284, 16015372215, 28708506302, 58766089115, 2668383114, 96800303222, 47745628719, 47171167335, 60725470878, 57966377210, 37352239131, 63870754563, 94722566779, 28309222956, 91402814612, 96860214839) AND deleted_at IS NULL\G

# Query 4: 192.87 QPS, 0.35x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 177490073
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-23T10:18:02 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   11765
# Exec time      4     21s    34us   113ms     2ms     8ms     5ms   332us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  68.94k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ################################
# 100us  ################################################################
#   1ms  #############################
#  10ms  #####
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 5: 65.63 QPS, 0.35x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 137758161
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T10:18:03 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3938
# Exec time      4     21s   162us   103ms     5ms    21ms     8ms     2ms
# Lock time      0    24ms       0    11ms     6us     1us   173us     1us
# Rows sent     12  99.62k       0      64   25.91   46.83   11.74   26.08
# Rows examine   5  99.62k       0      64   25.91   46.83   11.74   26.08
# Query size     0 495.42k     126     129  128.82  124.25       0  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ###########################
#   1ms  ################################################################
#  10ms  #################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 1525404726 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 6: 363.27 QPS, 0.32x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 148042428
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T10:18:03 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   21796
# Exec time      4     19s    88us   116ms   870us     4ms     3ms   224us
# Lock time      6   188ms       0    24ms     8us     1us   220us     1us
# Rows sent      2  21.28k       0       1    1.00    0.99    0.01    0.99
# Rows examine   1  21.28k       0       1    1.00    0.99    0.01    0.99
# Query size     1   2.20M      81     106  106.00  102.22    0.15  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='4a88fee4-01a4-42e1-8a3c-a494e96056ba' AND deleted_at IS NULL\G

# Query 7: 103.05 QPS, 0.31x concurrency, ID 0x162DA0A184B905E35E1254C1FDBF900B at byte 151958123
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-23T10:18:03 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    6183
# Exec time      4     18s    86us    94ms     3ms    16ms     7ms   273us
# Lock time      1    39ms       0     5ms     6us     1us    98us     1us
# Rows sent      2  18.11k       3       3       3       3       0       3
# Rows examine   0  18.11k       3       3       3       3       0       3
# Query size     0 451.08k      67      76   74.71   72.65    1.29   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###################
#  10ms  ########
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_cards WHERE id IN (2565923421, 4118127315, 3045782369)\G

# Query 8: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650857
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-23T10:18:02
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      3     15s     15s     15s     15s     15s       0     15s
# Lock time      0     4us     4us     4us     4us     4us       0     4us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 9: 203.37 QPS, 0.25x concurrency, ID 0xBC551EACF5A3BE27E3F2CC3C5133F3D5 at byte 165304118
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T10:18:03 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   12202
# Exec time      3     15s   118us    62ms     1ms     5ms     3ms   366us
# Lock time      3    94ms       0    13ms     7us     1us   173us     1us
# Rows sent     42 339.60k      27      29   28.50   28.75       1   28.75
# Rows examine  35 679.20k      54      58   57.00   56.92       2   56.92
# Query size     0 792.39k      66      68   66.50   65.89       0   65.89
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ##################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'gacha_item_masters'\G
#    SHOW CREATE TABLE `isucon`.`gacha_item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM gacha_item_masters WHERE gacha_id=31 ORDER BY id ASC\G

# Query 10: 419.21 QPS, 0.24x concurrency, ID 0x07D5CE9B533D56A3B70C17C590E82A7F at byte 89693301
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T10:18:02 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   25572
# Exec time      3     15s    52us   108ms   570us     2ms     2ms   144us
# Lock time      5   159ms       0     7ms     6us     1us   112us     1us
# Rows sent      3  24.97k       1       1       1       1       0       1
# Rows examine   2  42.42k       1       2    1.70    1.96    0.45    1.96
# Query size     0   1.07M      44      44      44      44       0      44
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ########################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'version_masters'\G
#    SHOW CREATE TABLE `isucon`.`version_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM version_masters WHERE status=1\G

# Query 11: 363.56 QPS, 0.22x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 176071668
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T10:18:02 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   22177
# Exec time      2     13s    50us    58ms   600us     2ms     2ms   144us
# Lock time      5   138ms       0    13ms     6us     1us   154us     1us
# Rows sent      2  21.66k       0       1    1.00    0.99    0.01    0.99
# Rows examine   1  21.66k       0       1    1.00    0.99    0.01    0.99
# Query size     0 841.11k      33      39   38.84   38.53    0.66   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##############################
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=8098338401\G

# Query 12: 404.26 QPS, 0.21x concurrency, ID 0xAB2AB35C6EFA17C04018A132A84A16C9 at byte 177760083
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-23T10:18:02 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   24660
# Exec time      2     13s    43us    47ms   510us     2ms     1ms   125us
# Lock time      4   134ms       0    17ms     5us     1us   138us     1us
# Rows sent      0     585       0       1    0.02       0    0.15       0
# Rows examine   0     585       0       1    0.02       0    0.15       0
# Query size     0   1.13M      45      48   47.84   46.83    0.26   46.83
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########################################
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_bans'\G
#    SHOW CREATE TABLE `isucon`.`user_bans`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_bans WHERE user_id=4293229382\G

# Query 13: 215.15 QPS, 0.20x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 146047831
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T10:18:02 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   13124
# Exec time      2     12s   105us    75ms   929us     4ms     3ms   236us
# Lock time      3    83ms       0     8ms     6us     1us   127us     1us
# Rows sent      1  12.82k       1       1       1       1       0       1
# Rows examine   0  12.83k       1       2    1.00    0.99    0.03    0.99
# Query size     0 990.49k      74      78   77.28   76.28    1.18   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=1461531223 AND platform_id='19016215'\G

# Query 14: 261.32 QPS, 0.18x concurrency, ID 0x0B3509236B570F5C5FE423B079765901 at byte 156792458
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T10:18:03 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   15679
# Exec time      2     11s    46us   109ms   687us     3ms     2ms   144us
# Lock time      3   103ms       0    16ms     6us     1us   185us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     2   2.55M     165     176  170.23  166.51    0.90  166.51
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #########################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO user_cards(id, user_id, card_id, amount_per_sec, level, total_exp, created_at, updated_at) VALUES (3052364730, 3620362008, 2, 1, 1, 0, 1661681928, 1661681928)\G

# Query 15: 245.13 QPS, 0.16x concurrency, ID 0x975F0A7CC9BCA46BBC7DAD888BA0794F at byte 111728572
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T10:18:02 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          4   14953
# Exec time      2     10s    57us    96ms   671us     3ms     2ms   167us
# Lock time      2    70ms       0    12ms     4us     1us   136us     1us
# Rows sent      1  14.60k       1       1       1       1       0       1
# Rows examine   0  14.60k       1       1       1       1       0       1
# Query size     0 777.17k      53      54   53.22   51.63       0   51.63
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ######################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'item_masters'\G
#    SHOW CREATE TABLE `isucon`.`item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM item_masters WHERE id=4 AND item_type=2\G

# Query 16: 4.60 QPS, 1.00x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 39415214
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2023-11-23T10:17:31 to 2023-11-23T10:17:41
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      2     10s   140ms   494ms   218ms   433ms   100ms   171ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    39  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (82696878935,2338266922,5,320,32,2672,1560798201,1560798201,NULL) /*... omitted ...*/\G

# Query 17: 64.38 QPS, 0.15x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 172332876
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T10:18:03 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3863
# Exec time      1      9s   140us   108ms     2ms    10ms     5ms   541us
# Lock time      0    18ms       0     4ms     4us     1us    77us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0   3.77k       1       1       1       1       0       1
# Query size     0 392.34k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ################################
#  10ms  #####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661681936 WHERE token='43bffedd-45b4-4140-bf3e-883cd533ca00'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661681936 from user_one_time_tokens where  token='43bffedd-45b4-4140-bf3e-883cd533ca00'\G

# Query 18: 64.82 QPS, 0.14x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 148521891
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T10:18:03 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3889
# Exec time      1      8s    87us    73ms     2ms    10ms     5ms   515us
# Lock time      0    18ms       0     3ms     4us     1us    63us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 799.67k     207     211  210.56  202.40       0  202.40
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###########################
#  10ms  #####
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (1428019998, 1809711656, '95e6aa81-0fc1-46a5-a7f2-ff3d65a37307', 1, 1661681923, 1661681923, 1661682523)\G

# Query 19: 155.31 QPS, 0.12x concurrency, ID 0xE63C5805E48DA98A0AD3A20E4E0B9976 at byte 177330380
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-23T10:18:02 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9474
# Exec time      1      7s    80us    36ms   749us     3ms     2ms   185us
# Lock time      2    59ms       0    13ms     6us     1us   155us     1us
# Rows sent      0   6.68k       0       1    0.72    0.99    0.44    0.99
# Rows examine   0   6.68k       0       1    0.72    0.99    0.44    0.99
# Query size     0 720.24k      75      78   77.85   76.28    0.41   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ##########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_login_bonuses'\G
#    SHOW CREATE TABLE `isucon`.`user_login_bonuses`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_login_bonuses WHERE user_id=7785042523 AND login_bonus_id=2\G

# Query 20: 165.95 QPS, 0.11x concurrency, ID 0xD858CC1645CE084FE3844E34483B662E at byte 166926346
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T10:18:03 to 2023-11-23T10:19:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3    9957
# Exec time      1      7s    54us    55ms   663us     3ms     2ms   144us
# Lock time      2    55ms       0    14ms     5us     1us   163us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0   9.72k       1       1       1       1       0       1
# Query size     0 509.19k      46      57   52.37   54.21    2.95   49.17
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###################
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
UPDATE users SET isu_coin=9236513627 WHERE id=1994919041\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  isu_coin=9236513627 from users where  id=1994919041\G
