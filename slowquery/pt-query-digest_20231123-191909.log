
# 14.6s user time, 70ms system time, 60.09M rss, 390.00G vsz
# Current date: Thu Nov 23 18:21:29 2023
# Hostname: YusukenoMac-mini.local
# Files: slowquery/log/mysql-slow.log
# Overall: 348.38k total, 177 unique, 3.79k QPS, 4.76x concurrency _______
# Time range: 2023-11-23T09:19:14 to 2023-11-23T09:20:46
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           438s     1us     13s     1ms     4ms    22ms   185us
# Lock time             3s       0   235ms     8us     1us   640us     1us
# Rows sent        760.54k       0    1012    2.24   21.45    6.62    0.99
# Rows examine       1.84M       0    1012    5.53   42.48   13.28    0.99
# Query size       112.43M       6 1008.95k  338.41  234.30  13.94k   72.65

# Profile
# Rank Query ID                            Response time Calls  R/Call  V/
# ==== =================================== ============= ====== ======= ==
#    1 0x6E790EE92EFF4755B6E0FA83F9CA8363  65.2940 14.9%   3890  0.0168  0.04 UPDATE user_presents
#    2 0x03FFA53B9AEA23779E51FE7DD3DC165E  36.1842  8.3%   5612  0.0064  0.02 INSERT user_presents
#    3 0xED0711EB833D06BBD84F496A9784760B  26.6433  6.1%  40416  0.0007  0.01 UPDATE user_items
#    4 0xFFFCA4D67EA0A788813031B8BBC3B329  20.6107  4.7%  11666  0.0018  0.01 COMMIT
#    5 0xE89B4FB5E77ED142BEAF8C3B369FA2FE  20.3457  4.6%   3890  0.0052  0.02 SELECT user_presents
#    6 0x8CA5C26DA1F53D285B58FE47352DA00A  18.6012  4.2%  21554  0.0009  0.01 SELECT user_sessions
#    7 0x611363ACBD1690538F137757E45B738C  18.4922  4.2%   3904  0.0047  0.01 SELECT user_presents
#    8 0x07D5CE9B533D56A3B70C17C590E82A7F  14.3452  3.3%  25264  0.0006  0.01 SELECT version_masters
#    9 0xBC551EACF5A3BE27E3F2CC3C5133F3D5  14.2329  3.2%  11965  0.0012  0.01 SELECT gacha_item_masters
#   10 0x2372FB123B18A108CFBB5352F61B370B  12.8992  2.9%  21899  0.0006  0.01 SELECT users
#   11 0x79A889ED30BFA8BF517F86F6D70065B6  12.7218  2.9%      1 12.7218  0.00 LOAD DATA user_presents
#   12 0xAB2AB35C6EFA17C04018A132A84A16C9  12.6517  2.9%  24322  0.0005  0.01 SELECT user_bans
#   13 0x584D7D428BA6602840353479CEB359A1  11.0590  2.5%  12910  0.0009  0.01 SELECT user_devices
#   14 0x2096778F723F6666B5D7DDC9D01010C7  11.0384  2.5%     46  0.2400  0.06 INSERT user_cards
#   15 0x1049606E13674A053E0CC69500F839DC   9.3789  2.1%   3835  0.0024  0.01 UPDATE user_one_time_tokens
#   16 0x0B3509236B570F5C5FE423B079765901   8.8351  2.0%  13863  0.0006  0.01 INSERT user_cards
#   17 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A   8.6850  2.0%   3857  0.0023  0.01 INSERT user_one_time_tokens
#   18 0x975F0A7CC9BCA46BBC7DAD888BA0794F   8.5730  2.0%  12944  0.0007  0.00 SELECT item_masters
#   19 0xE63C5805E48DA98A0AD3A20E4E0B9976   7.4466  1.7%   9270  0.0008  0.01 SELECT user_login_bonuses
#   20 0xF0F3320DE1260EAD27BC0426FCB34A4D   7.1477  1.6%   3904  0.0018  0.01 SELECT user_presents
# MISC 0xMISC                              92.7912 21.2% 113368  0.0008   0.0 <157 ITEMS>

# Query 1: 64.83 QPS, 1.09x concurrency, ID 0x6E790EE92EFF4755B6E0FA83F9CA8363 at byte 175425709
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.04
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3890
# Exec time     14     65s   149us   262ms    17ms    68ms    26ms     5ms
# Lock time      0     9ms       0     1ms     2us     1us    28us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   4  90.46k       1      65   23.81   44.60   11.10   24.84
# Query size     1   1.38M      93     904  373.19  621.67  137.65  381.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ##############
#   1ms  ################################################################
#  10ms  ##############################################
# 100ms  ###
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
UPDATE user_presents SET deleted_at=1661678439, updated_at=1661678439 WHERE id IN (125663798, 533319422, 1377405047, 1430076719, 1610246643, 1845780268, 2114736748, 2602620559, 2865854738, 2869466464, 2875486873, 2898682058, 2980122016, 3012011445, 3049224474, 3174139528, 3264827769, 3346332082, 3347369731, 3365123069, 3468176579, 3786032209, 4095645640, 4206582820, 4228422030, 6439255040, 6871005267, 7285663208, 10751924989, 14986987123, 22165774471, 24728539243, 35141625562, 38029955243, 41175392265, 47303582803, 58953979712, 62618047716, 62959694971, 68918736764, 69674957113, 75108532273, 76175324896, 81540706558, 82484983718, 83979151578, 92744045694)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661678439, updated_at=1661678439 from user_presents where  id IN (125663798, 533319422, 1377405047, 1430076719, 1610246643, 1845780268, 2114736748, 2602620559, 2865854738, 2869466464, 2875486873, 2898682058, 2980122016, 3012011445, 3049224474, 3174139528, 3264827769, 3346332082, 3347369731, 3365123069, 3468176579, 3786032209, 4095645640, 4206582820, 4228422030, 6439255040, 6871005267, 7285663208, 10751924989, 14986987123, 22165774471, 24728539243, 35141625562, 38029955243, 41175392265, 47303582803, 58953979712, 62618047716, 62959694971, 68918736764, 69674957113, 75108532273, 76175324896, 81540706558, 82484983718, 83979151578, 92744045694)\G

# Query 2: 93.53 QPS, 0.60x concurrency, ID 0x03FFA53B9AEA23779E51FE7DD3DC165E at byte 127810579
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    5612
# Exec time      8     36s    87us   152ms     6ms    30ms    12ms     2ms
# Lock time      1    37ms       0     9ms     6us     1us   170us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     7   8.10M     235   3.32k   1.48k   3.19k  905.53   1.26k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ####################################################
#   1ms  ################################################################
#  10ms  #########################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
INSERT INTO user_presents(id, user_id, sent_at, item_type, item_id, amount, present_message, created_at, updated_at) VALUES (511466310, 1095237834, 1661678414, 1, 1, 3000, 'リリース記念プレゼントです！', 1661678414, 1661678414),(2008196233, 1095237834, 1661678414, 1, 1, 1000, '１ヶ月突破プレゼントです！', 1661678414, 1661678414),(881094098, 1095237834, 1661678414, 1, 1, 1000, '２ヶ月突破プレゼントです！', 1661678414, 1661678414),(2747503841, 1095237834, 1661678414, 1, 1, 2000, '３ヶ月突破プレゼントです！', 1661678414, 1661678414),(3901093071, 1095237834, 1661678414, 1, 1, 2000, '４ヶ月突破プレゼントです！', 1661678414, 1661678414),(220334729, 1095237834, 1661678414, 1, 1, 2000, '５ヶ月突破プレゼントです！', 1661678414, 1661678414),(703847103, 1095237834, 1661678414, 1, 1, 3000, 'ハーフアニバーサリープレゼントです！', 1661678414, 1661678414),(2300587820, 1095237834, 1661678414, 1, 1, 2000, '７ヶ月突破プレゼントです！', 1661678414, 1661678414),(4001958302, 1095237834, 1661678414, 1, 1, 2000, '８ヶ月突破プレゼントです！', 1661678414, 1661678414),(112668664, 1095237834, 1661678414, 1, 1, 2000, '９ヶ月突破プレゼントです！', 1661678414, 1661678414),(1461303347, 1095237834, 1661678414, 1, 1, 2000, '１０ヶ月突破プレゼントです！', 1661678414, 1661678414),(1062825927, 1095237834, 1661678414, 1, 1, 2000, '１１ヶ月突破プレゼントです！', 1661678414, 1661678414),(2234360854, 1095237834, 1661678414, 1, 1, 3000, '１周年突破プレゼントです！', 1661678414, 1661678414),(2682992493, 1095237834, 1661678414, 1, 1, 6000, '周年記念プレゼントです！', 1661678414, 1661678414),(1107258108, 1095237834, 1661678414, 1, 1, 2000, '１３ヶ月突破プレゼントです！', 1661678414, 1661678414),(1087795546, 1095237834, 1661678414, 1, 1, 2000, '１４ヶ月突破プレゼントです！', 1661678414, 1661678414),(870005354, 1095237834, 1661678414, 1, 1, 2000, '１５ヶ月突破プレゼントです１', 1661678414, 1661678414),(749943458, 1095237834, 1661678414, 1, 1, 2000, '１６ヶ月突破プレゼントです！', 1661678414, 1661678414),(2230419489, 1095237834, 1661678414, 1, 1, 2000, '１７ヶ月突破プレゼントです！', 1661678414, 1661678414),(3239720217, 1095237834, 1661678414, 1, 1, 2000, '１８ヶ月突破プレゼントです！', 1661678414, 1661678414),(3738057779, 1095237834, 1661678414, 1, 1, 2000, '１９ヶ月突破プレゼントです！', 1661678414, 1661678414),(2487945285, 1095237834, 1661678414, 1, 1, 2000, '２０ヶ月突破プレゼントです！', 1661678414, 1661678414),(4207791390, 1095237834, 1661678414, 1, 1, 2000, '２１ヶ月プレゼントです！', 1661678414, 1661678414),(3693528297, 1095237834, 1661678414, 1, 1, 2000, '２２ヶ月プレゼントです！', 1661678414, 1661678414),(1525253208, 1095237834, 1661678414, 1, 1, 2000, '２３ヶ月プレゼントです！', 1661678414, 1661678414),(3561001259, 1095237834, 1661678414, 1, 1, 6000, '２周年記念プレゼントです！', 1661678414, 1661678414),(418661630, 1095237834, 1661678414, 1, 1, 6000, '２.５周年プレゼントです！', 1661678414, 1661678414),(3670807214, 1095237834, 1661678414, 1, 1, 6000, 'CM放映記念プレゼントです！', 1661678414, 1661678414)\G

# Query 3: 673.60 QPS, 0.44x concurrency, ID 0xED0711EB833D06BBD84F496A9784760B at byte 148982849
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         11   40416
# Exec time      6     27s    47us    83ms   659us     3ms     2ms   131us
# Lock time      5   163ms       0    17ms     4us     1us   118us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   2  39.47k       1       1       1       1       0       1
# Query size     2   2.89M      69      76   74.91   72.65    0.45   72.65
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################
# 100us  ################################################################
#   1ms  #############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_items'\G
#    SHOW CREATE TABLE `isucon`.`user_items`\G
UPDATE user_items SET amount=12, updated_at=1661678425 WHERE id=67173780468\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  amount=12, updated_at=1661678425 from user_items where  id=67173780468\G

# Query 4: 194.43 QPS, 0.34x concurrency, ID 0xFFFCA4D67EA0A788813031B8BBC3B329 at byte 147276164
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   11666
# Exec time      4     21s    32us   117ms     2ms     8ms     5ms   301us
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  68.36k       6       6       6       6       0       6
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #####################################
# 100us  ################################################################
#   1ms  #############################
#  10ms  #####
# 100ms  #
#    1s
#  10s+
COMMIT\G

# Query 5: 64.83 QPS, 0.34x concurrency, ID 0xE89B4FB5E77ED142BEAF8C3B369FA2FE at byte 154721931
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3890
# Exec time      4     20s    97us   121ms     5ms    27ms    11ms   839us
# Lock time      1    39ms       0     7ms     9us     1us   173us     1us
# Rows sent     11  90.46k       1      65   23.81   44.60   11.10   24.84
# Rows examine   4  90.46k       1      65   23.81   44.60   11.10   24.84
# Query size     1   1.31M      74     885  354.19  621.67  137.18  363.48
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #####################################
#  10ms  ##################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents WHERE id IN (2972121479, 49660414707, 65136168259, 43692914586, 36434851779, 19383584775, 7589246281, 36501412134, 14128332015, 20933942625, 29245558898, 52245859017) AND deleted_at IS NULL\G

# Query 6: 359.23 QPS, 0.31x concurrency, ID 0x8CA5C26DA1F53D285B58FE47352DA00A at byte 174349917
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   21554
# Exec time      4     19s    94us    62ms   863us     3ms     2ms   214us
# Lock time      4   127ms       0    11ms     5us     1us   120us     1us
# Rows sent      2  21.05k       0       1    1.00    0.99    0.01    0.99
# Rows examine   1  21.05k       0       1    1.00    0.99    0.01    0.99
# Query size     1   2.18M      81     106  106.00  102.22    0.15  102.22
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_sessions'\G
#    SHOW CREATE TABLE `isucon`.`user_sessions`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_sessions WHERE session_id='3471c197-49a5-4e03-89c3-9b21a2835ddb' AND deleted_at IS NULL\G

# Query 7: 65.07 QPS, 0.31x concurrency, ID 0x611363ACBD1690538F137757E45B738C at byte 166278181
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3904
# Exec time      4     18s   163us    87ms     5ms    20ms     8ms     2ms
# Lock time      2    56ms       0    17ms    14us     1us   320us     1us
# Rows sent     11  90.71k       0      65   23.79   44.60   11.10   24.84
# Rows examine   4  90.71k       0      65   23.79   44.60   11.10   24.84
# Query size     0 491.14k     126     129  128.82  124.25       0  124.25
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  #####################################
#   1ms  ################################################################
#  10ms  ##############
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_presents 
	WHERE user_id = 6919751391 AND deleted_at IS NULL
	ORDER BY created_at DESC, id
	LIMIT 100 OFFSET 0\G

# Query 8: 421.07 QPS, 0.24x concurrency, ID 0x07D5CE9B533D56A3B70C17C590E82A7F at byte 91267240
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   25264
# Exec time      3     14s    51us   101ms   567us     2ms     2ms   138us
# Lock time      4   129ms       0    11ms     5us     1us   111us     1us
# Rows sent      3  24.67k       1       1       1       1       0       1
# Rows examine   2  41.82k       1       2    1.69    1.96    0.45    1.96
# Query size     0   1.06M      44      44      44      44       0      44
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ############################
# 100us  ################################################################
#   1ms  #########
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'version_masters'\G
#    SHOW CREATE TABLE `isucon`.`version_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM version_masters WHERE status=1\G

# Query 9: 199.42 QPS, 0.24x concurrency, ID 0xBC551EACF5A3BE27E3F2CC3C5133F3D5 at byte 154673482
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   11965
# Exec time      3     14s   116us   119ms     1ms     5ms     3ms   348us
# Lock time      2    61ms       0     9ms     5us     1us   107us     1us
# Rows sent     43 333.00k      27      29   28.50   28.75       1   28.75
# Rows examine  35 666.00k      54      58   57.00   56.92       2   56.92
# Query size     0 777.00k      66      68   66.50   65.89       0   65.89
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #################
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'gacha_item_masters'\G
#    SHOW CREATE TABLE `isucon`.`gacha_item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM gacha_item_masters WHERE gacha_id=37 ORDER BY id ASC\G

# Query 10: 364.98 QPS, 0.21x concurrency, ID 0x2372FB123B18A108CFBB5352F61B370B at byte 168253235
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   21899
# Exec time      2     13s    47us    39ms   589us     2ms     2ms   144us
# Lock time      3   106ms       0    20ms     4us     1us   168us     1us
# Rows sent      2  21.38k       0       1    1.00    0.99    0.01    0.99
# Rows examine   1  21.38k       0       1    1.00    0.99    0.01    0.99
# Query size     0 830.59k      33      39   38.84   38.53    0.66   38.53
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##################################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'users'\G
#    SHOW CREATE TABLE `isucon`.`users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id=9889421457\G

# Query 11: 0 QPS, 0x concurrency, ID 0x79A889ED30BFA8BF517F86F6D70065B6 at byte 76650857
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2023-11-23T09:19:45
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      2     13s     13s     13s     13s     13s       0     13s
# Lock time      0     2us     2us     2us     2us     2us       0     2us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0     146     146     146     146     146       0     146
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s
#  10s+  ################################################################
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
LOAD DATA INFILE '/var/lib/mysql-files/5_user_presents_not_receive_data.tsv' REPLACE INTO TABLE user_presents FIELDS ESCAPED BY '|' IGNORE 1 LINES\G

# Query 12: 405.37 QPS, 0.21x concurrency, ID 0xAB2AB35C6EFA17C04018A132A84A16C9 at byte 181504154
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   24322
# Exec time      2     13s    43us    71ms   520us     2ms     2ms   125us
# Lock time      6   176ms       0    38ms     7us     1us   265us     1us
# Rows sent      0     586       0       1    0.02       0    0.15       0
# Rows examine   0     586       0       1    0.02       0    0.15       0
# Query size     0   1.11M      45      48   47.84   46.83    0.26   46.83
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #############################################
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_bans'\G
#    SHOW CREATE TABLE `isucon`.`user_bans`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_bans WHERE user_id=4215458528\G

# Query 13: 215.17 QPS, 0.18x concurrency, ID 0x584D7D428BA6602840353479CEB359A1 at byte 150799052
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   12910
# Exec time      2     11s    94us    53ms   856us     3ms     2ms   224us
# Lock time      2    64ms       0     5ms     4us     1us    81us     1us
# Rows sent      1  12.61k       1       1       1       1       0       1
# Rows examine   0  12.61k       1       1       1       1       0       1
# Query size     0 974.08k      74      78   77.26   76.28    1.20   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_devices'\G
#    SHOW CREATE TABLE `isucon`.`user_devices`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_devices WHERE user_id=6655840267 AND platform_id='11923979'\G

# Query 14: 4.18 QPS, 1.00x concurrency, ID 0x2096778F723F6666B5D7DDC9D01010C7 at byte 35291584
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.06
# Time range: 2023-11-23T09:19:15 to 2023-11-23T09:19:26
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      46
# Exec time      2     11s   139ms   545ms   240ms   477ms   120ms   171ms
# Lock time      0       0       0       0       0       0       0       0
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size    40  45.18M 970.86k 1006.59k 1005.76k 961.27k       0 961.27k
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO `user_cards` VALUES (74058928079,9909014657,6,780,39,8643,1584709110,1584709110,NULL) /*... omitted ...*/\G

# Query 15: 63.92 QPS, 0.16x concurrency, ID 0x1049606E13674A053E0CC69500F839DC at byte 139293488
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3835
# Exec time      2      9s   136us    75ms     2ms    12ms     5ms   541us
# Lock time      0    23ms       0     5ms     5us     1us   108us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0   3.75k       1       1       1       1       0       1
# Query size     0 389.49k     104     104     104     104       0     104
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ###############################
#  10ms  ######
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
UPDATE user_one_time_tokens SET deleted_at=1661678421 WHERE token='7ef4024b-a9f4-4653-99f6-2a60b99fb00c'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  deleted_at=1661678421 from user_one_time_tokens where  token='7ef4024b-a9f4-4653-99f6-2a60b99fb00c'\G

# Query 16: 231.05 QPS, 0.15x concurrency, ID 0x0B3509236B570F5C5FE423B079765901 at byte 149061177
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   13863
# Exec time      2      9s    48us   110ms   637us     2ms     2ms   138us
# Lock time      2    84ms       0    20ms     6us     1us   199us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     2   2.25M     166     176  170.20  166.51    0.85  166.51
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ##########################
# 100us  ################################################################
#   1ms  ############
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_cards'\G
#    SHOW CREATE TABLE `isucon`.`user_cards`\G
INSERT INTO user_cards(id, user_id, card_id, amount_per_sec, level, total_exp, created_at, updated_at) VALUES (1082617947, 725379448, 5, 10, 1, 0, 1661678425, 1661678425)\G

# Query 17: 64.28 QPS, 0.14x concurrency, ID 0xAFB4A7475DFDCF1D0D23CC5EC1952C3A at byte 149118018
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3857
# Exec time      1      9s    91us   123ms     2ms    10ms     6ms   490us
# Lock time      1    39ms       0    15ms    10us     1us   247us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0 793.13k     206     211  210.57  202.40       0  202.40
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  #########################
#  10ms  #####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_one_time_tokens'\G
#    SHOW CREATE TABLE `isucon`.`user_one_time_tokens`\G
INSERT INTO user_one_time_tokens(id, user_id, token, token_type, created_at, updated_at, expired_at) VALUES (2498576196, 1099314680, 'fc46c57f-1087-4909-8673-ee931f7a0a17', 1, 1661678425, 1661678425, 1661679025)\G

# Query 18: 215.73 QPS, 0.14x concurrency, ID 0x975F0A7CC9BCA46BBC7DAD888BA0794F at byte 120762347
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          3   12944
# Exec time      1      9s    55us    40ms   662us     3ms     2ms   159us
# Lock time      2    80ms       0     9ms     6us     1us   140us     1us
# Rows sent      1  12.64k       1       1       1       1       0       1
# Rows examine   0  12.64k       1       1       1       1       0       1
# Query size     0 672.91k      53      54   53.23   51.63       0   51.63
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  ############################
# 100us  ################################################################
#   1ms  #############
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'item_masters'\G
#    SHOW CREATE TABLE `isucon`.`item_masters`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM item_masters WHERE id=2 AND item_type=2\G

# Query 19: 154.50 QPS, 0.12x concurrency, ID 0xE63C5805E48DA98A0AD3A20E4E0B9976 at byte 128361385
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    9270
# Exec time      1      7s    77us   120ms   803us     3ms     3ms   194us
# Lock time      1    49ms       0    14ms     5us     1us   164us     1us
# Rows sent      0   6.39k       0       1    0.71    0.99    0.45    0.99
# Rows examine   0   6.39k       0       1    0.71    0.99    0.45    0.99
# Query size     0 704.75k      75      78   77.85   76.28    0.44   76.28
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###########
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_login_bonuses'\G
#    SHOW CREATE TABLE `isucon`.`user_login_bonuses`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user_login_bonuses WHERE user_id=2342008267 AND login_bonus_id=1\G

# Query 20: 65.07 QPS, 0.12x concurrency, ID 0xF0F3320DE1260EAD27BC0426FCB34A4D at byte 130133801
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2023-11-23T09:19:46 to 2023-11-23T09:20:46
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    3904
# Exec time      1      7s   113us    56ms     2ms     8ms     4ms   424us
# Lock time      0    13ms       0     2ms     3us     1us    36us     1us
# Rows sent      0   3.81k       1       1       1       1       0       1
# Rows examine   4  90.71k       0      65   23.79   44.60   11.10   24.84
# Query size     0 319.58k      81      84   83.82   80.10       0   80.10
# String:
# Databases    isucon
# Hosts        localhost
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #####################
#  10ms  ###
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon` LIKE 'user_presents'\G
#    SHOW CREATE TABLE `isucon`.`user_presents`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) FROM user_presents WHERE user_id = 3024189200 AND deleted_at IS NULL\G
